

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Perform Incremental Backup and Restore &mdash; SynxDB Elastic Documentation Preview documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
      <link rel="stylesheet" type="text/css" href="../../_static/custom.css?v=53dc447f" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=f1f14d95"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../_static/copybutton.js?v=529101c1"></script>
      <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="High Availability" href="../high-availability/ha-index.html" />
    <link rel="prev" title="Perform Full Backup and Restore" href="full-backup-and-restore.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            SynxDB Elastic Documentation
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../product-overview/product-index.html">Product Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deploy-guides/deploy-guides-index.html">Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../load-data/load-data-index.html">Load Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../operate-with-data/operate-with-data-index.html">Operate with Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../optimize-performance/optimize-performance-index.html">Optimize Performance</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../manage-system-index.html">Manage System</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../configure-database-system.html">Configure Database System</a></li>
<li class="toctree-l2"><a class="reference internal" href="../routine-maintenance.html">Routine Maintenance Operations</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="br-index.html">Backup and Restore</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="br-overview.html">Backup and Restore Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="full-backup-and-restore.html">Perform Full Backup and Restore</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Perform Incremental Backup and Restore</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#about-incremental-backup-sets">About incremental backup sets</a></li>
<li class="toctree-l4"><a class="reference internal" href="#use-incremental-backups">Use incremental backups</a></li>
<li class="toctree-l4"><a class="reference internal" href="#incremental-backup-notes">Incremental backup notes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../high-availability/ha-index.html">High Availability</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../security-and-permissions/set-security-and-permission-index.html">Configure Security and Permissions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../develop-guides/develop-with-db-index.html">Developer Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/tutorials-index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../references/references-index.html">Reference Guide</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">SynxDB Elastic Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../manage-system-index.html">Manage System</a></li>
          <li class="breadcrumb-item"><a href="br-index.html">Backup and Restore</a></li>
      <li class="breadcrumb-item active">Perform Incremental Backup and Restore</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="perform-incremental-backup-and-restore">
<h1>Perform Incremental Backup and Restore<a class="headerlink" href="#perform-incremental-backup-and-restore" title="Link to this heading"></a></h1>
<p>Before reading this document, you are expected to first read the <a class="reference internal" href="full-backup-and-restore.html#perform-full-backup-and-restore"><span class="std std-ref">Perform Full Backup and Restore</span></a> document.</p>
<p>To back up and restore tables incrementally, use the <code class="docutils literal notranslate"><span class="pre">gpbackup</span></code> and <code class="docutils literal notranslate"><span class="pre">gprestore</span></code> utilities. Incremental backups include all specified heap tables, and append-optimized tables (including column-oriented ones) that have changed. Even a single row change triggers a backup of the entire append-optimized table. For partitioned append-optimized tables, only the modified leaf partitions are backed up.</p>
<p>Incremental backups are efficient when the total amount of data in append-optimized tables or table partitions that changed is small compared to the data that has not changed since the last backup.</p>
<p>An incremental backup backs up an append-optimized table only if one of the following operations have been performed on the table after the last full or incremental backup:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ALTER</span> <span class="pre">TABLE</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DELETE</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">INSERT</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">TRUNCATE</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">UPDATE</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DROP</span></code> and then re-create the table</p></li>
</ul>
<p>To restore data from incremental backups, you need a complete incremental backup set.</p>
<section id="about-incremental-backup-sets">
<h2>About incremental backup sets<a class="headerlink" href="#about-incremental-backup-sets" title="Link to this heading"></a></h2>
<p>An incremental backup set includes the following backups:</p>
<ul class="simple">
<li><p>A full backup. This is the full backup that the incremental backups are based on.</p></li>
<li><p>The set of incremental backups that capture the changes to the database from the time of the full backup.</p></li>
</ul>
<p>For example, you can create a full backup and then create 3 daily incremental backups. The full backup and all 3 incremental backups are the backup set. For information about using an incremental backup set, see <a class="reference internal" href="#example-using-incremental-backup-sets"><span class="std std-ref">Example using incremental backup sets</span></a>.</p>
<p>When you create or add to an incremental backup set, <code class="docutils literal notranslate"><span class="pre">gpbackup</span></code> ensures that the backups in the set are created with a consistent set of backup options to ensure that the backup set can be used in a restore operation. For information about backup set consistency, see <a class="reference internal" href="#use-incremental-backups"><span class="std std-ref">Use incremental backups</span></a>.</p>
<p>When you create an incremental backup you include these options with the other <code class="docutils literal notranslate"><span class="pre">gpbackup</span></code> options to create a backup:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">--leaf-partition-data</span></code>: required for all backups in the incremental backup set.</p>
<ul class="simple">
<li><p>Required when you create a full backup that will be the base backup for an incremental backup set.</p></li>
<li><p>Required when you create an incremental backup.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">--incremental</span></code>: required when you create an incremental backup.</p>
<p>You cannot combine <code class="docutils literal notranslate"><span class="pre">--data-only</span></code> or <code class="docutils literal notranslate"><span class="pre">--metadata-only</span></code> with <code class="docutils literal notranslate"><span class="pre">--incremental</span></code>.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">--from-timestamp</span></code>: optional. This option can be used with <code class="docutils literal notranslate"><span class="pre">--incremental</span></code>. The timestamp you specify is an existing backup. The timestamp can be either a full backup or incremental backup. The backup being created must be compatible with the backup specified with the <code class="docutils literal notranslate"><span class="pre">--from-timestamp</span></code> option.</p></li>
</ul>
</section>
<section id="use-incremental-backups">
<h2>Use incremental backups<a class="headerlink" href="#use-incremental-backups" title="Link to this heading"></a></h2>
<p>When you add an incremental backup to a backup set, <code class="docutils literal notranslate"><span class="pre">gpbackup</span></code> ensures that the full backup and the incremental backups are consistent by checking these <code class="docutils literal notranslate"><span class="pre">gpbackup</span></code> options:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">--dbname</span></code>: the database must be the same.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--backup-dir</span></code>: the directory must be the same. The backup set, the full backup and the incremental backups, must be in the same location.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--single-data-file</span></code>: this option must be either specified or absent for all backups in the set.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--include-table-file</span></code>, <code class="docutils literal notranslate"><span class="pre">--include-schema</span></code>, or any other options that filter tables and schemas must be the same. When checking schema filters, only the schema names are checked, not the objects contained in the schemas.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--no-compression</span></code>: if this option is specified, it must be specified for all backups in the backup set.</p>
<p>If compression is used on the on the full backup, compression must be used on the incremental backups. Different compression levels are allowed for the backups in the backup set. For a backup, the default is compression level 1.</p>
</li>
</ul>
<p>If you try to add an incremental backup to a backup set, the backup operation fails if the <code class="docutils literal notranslate"><span class="pre">gpbackup</span></code> options are not consistent.</p>
<section id="example-using-incremental-backup-sets">
<h3>Example using incremental backup sets<a class="headerlink" href="#example-using-incremental-backup-sets" title="Link to this heading"></a></h3>
<p>Each backup has a timestamp taken when the backup is created. For example, if you create a backup on May 14, 2023, the backup file names contain <code class="docutils literal notranslate"><span class="pre">20230514hhmmss</span></code>. The <code class="docutils literal notranslate"><span class="pre">hhmmss</span></code> represents the time: hour, minute, and second.</p>
<p>This example assumes that you have created two full backups and incremental backups of the database <code class="docutils literal notranslate"><span class="pre">mytest</span></code>. To create the full backups, you used this command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gpbackup<span class="w"> </span>--dbname<span class="w"> </span>mytest<span class="w"> </span>--backup-dir<span class="w"> </span>/mybackup<span class="w"> </span>--leaf-partition-data
</pre></div>
</div>
<p>You created incremental backups with this command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gpbackup<span class="w"> </span>--dbname<span class="w"> </span>mytest<span class="w"> </span>--backup-dir<span class="w"> </span>/mybackup<span class="w"> </span>--leaf-partition-data<span class="w"> </span>--incremental
</pre></div>
</div>
<p>When you specify the <code class="docutils literal notranslate"><span class="pre">--backup-dir</span></code> option, the backups are created in the <code class="docutils literal notranslate"><span class="pre">/mybackup</span></code> directory on each SynxDB Elastic host.</p>
<p>In the example, the full backups have the timestamp keys <code class="docutils literal notranslate"><span class="pre">20230514054532</span></code> and <code class="docutils literal notranslate"><span class="pre">20231114064330</span></code>. The other backups are incremental backups. The example consists of two backup sets, the first with two incremental backups, and second with one incremental backup. The backups are listed from earliest to most recent.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">20230514054532</span></code> (full backup)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">20230714095512</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">20230914081205</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">20231114064330</span></code> (full backup)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">20230114051246</span></code></p></li>
</ul>
<p>To create a new incremental backup based on the latest incremental backup, you must include the same <code class="docutils literal notranslate"><span class="pre">--backup-dir</span></code> option as the incremental backup as well as the options <code class="docutils literal notranslate"><span class="pre">--leaf-partition-data</span></code> and <code class="docutils literal notranslate"><span class="pre">--incremental</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gpbackup<span class="w"> </span>--dbname<span class="w"> </span>mytest<span class="w"> </span>--backup-dir<span class="w"> </span>/mybackup<span class="w"> </span>--leaf-partition-data<span class="w"> </span>--incremental
</pre></div>
</div>
<p>You can specify the <code class="docutils literal notranslate"><span class="pre">--from-timestamp</span></code> option to create an incremental backup based on an existing incremental or full backup. Based on the example, this command adds a fourth incremental backup to the backup set that includes <code class="docutils literal notranslate"><span class="pre">20230914081205</span></code> as an incremental backup and uses <code class="docutils literal notranslate"><span class="pre">20230514054532</span></code> as the full backup.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gpbackup<span class="w"> </span>--dbname<span class="w"> </span>mytest<span class="w"> </span>--backup-dir<span class="w"> </span>/mybackup<span class="w"> </span>--leaf-partition-data<span class="w"> </span>--incremental<span class="w"> </span>--from-timestamp<span class="w"> </span><span class="m">20230914081205</span>
</pre></div>
</div>
<p>This command creates an incremental backup set based on the full backup <code class="docutils literal notranslate"><span class="pre">20231114064330</span></code> and is separate from the backup set that includes the incremental backup <code class="docutils literal notranslate"><span class="pre">20230114051246</span></code>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gpbackup<span class="w"> </span>--dbname<span class="w"> </span>mytest<span class="w"> </span>--backup-dir<span class="w"> </span>/mybackup<span class="w"> </span>--leaf-partition-data<span class="w"> </span>--incremental<span class="w"> </span>--from-timestamp<span class="w"> </span><span class="m">20231114064330</span>
</pre></div>
</div>
<p>To restore a database with the incremental backup <code class="docutils literal notranslate"><span class="pre">20230914081205</span></code>, you need the incremental backups <code class="docutils literal notranslate"><span class="pre">20120914081205</span></code> and <code class="docutils literal notranslate"><span class="pre">20230714095512</span></code>, and the full backup <code class="docutils literal notranslate"><span class="pre">20230514054532</span></code>. This would be the <code class="docutils literal notranslate"><span class="pre">gprestore</span></code> command.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>gprestore<span class="w"> </span>--backup-dir<span class="w"> </span>/backupdir<span class="w"> </span>--timestamp<span class="w"> </span><span class="m">20230914081205</span>
</pre></div>
</div>
</section>
<section id="create-an-incremental-backup-with-gpbackup">
<h3>Create an incremental backup with <code class="docutils literal notranslate"><span class="pre">gpbackup</span></code><a class="headerlink" href="#create-an-incremental-backup-with-gpbackup" title="Link to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">gpbackup</span></code> output displays the timestamp of the backup on which the incremental backup is based. In this example, the incremental backup is based on the backup with timestamp <code class="docutils literal notranslate"><span class="pre">20230802171642</span></code>. The backup <code class="docutils literal notranslate"><span class="pre">20230802171642</span></code> can be an incremental or full backup.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>gpbackup<span class="w"> </span>--dbname<span class="w"> </span><span class="nb">test</span><span class="w"> </span>--backup-dir<span class="w"> </span>/backups<span class="w"> </span>--leaf-partition-data<span class="w"> </span>--incremental

<span class="m">20230803</span>:15:40:51<span class="w"> </span>gpbackup:gpadmin:mdw:002907-<span class="o">[</span>INFO<span class="o">]</span>:-Starting<span class="w"> </span>backup<span class="w"> </span>of<span class="w"> </span>database<span class="w"> </span><span class="nb">test</span>
<span class="m">20230803</span>:15:40:52<span class="w"> </span>gpbackup:gpadmin:mdw:002907-<span class="o">[</span>INFO<span class="o">]</span>:-Backup<span class="w"> </span><span class="nv">Timestamp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">20230803154051</span>
<span class="m">20230803</span>:15:40:52<span class="w"> </span>gpbackup:gpadmin:mdw:002907-<span class="o">[</span>INFO<span class="o">]</span>:-Backup<span class="w"> </span><span class="nv">Database</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">test</span>
<span class="m">20230803</span>:15:40:52<span class="w"> </span>gpbackup:gpadmin:mdw:002907-<span class="o">[</span>INFO<span class="o">]</span>:-Gathering<span class="w"> </span>list<span class="w"> </span>of<span class="w"> </span>tables<span class="w"> </span><span class="k">for</span><span class="w"> </span>backup
<span class="m">20230803</span>:15:40:52<span class="w"> </span>gpbackup:gpadmin:mdw:002907-<span class="o">[</span>INFO<span class="o">]</span>:-Acquiring<span class="w"> </span>ACCESS<span class="w"> </span>SHARE<span class="w"> </span>locks<span class="w"> </span>on<span class="w"> </span>tables
Locks<span class="w"> </span>acquired:<span class="w">  </span><span class="m">5</span><span class="w"> </span>/<span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="o">[================================================================]</span><span class="w"> </span><span class="m">100</span>.00%<span class="w"> </span>0s
<span class="m">20230803</span>:15:40:52<span class="w"> </span>gpbackup:gpadmin:mdw:002907-<span class="o">[</span>INFO<span class="o">]</span>:-Gathering<span class="w"> </span>additional<span class="w"> </span>table<span class="w"> </span>metadata
<span class="m">20230803</span>:15:40:52<span class="w"> </span>gpbackup:gpadmin:mdw:002907-<span class="o">[</span>INFO<span class="o">]</span>:-Metadata<span class="w"> </span>will<span class="w"> </span>be<span class="w"> </span>written<span class="w"> </span>to<span class="w"> </span>/backups/gpseg-1/backups/20230803/20230803154051/gpbackup_20230803154051_metadata.sql
<span class="m">20230803</span>:15:40:52<span class="w"> </span>gpbackup:gpadmin:mdw:002907-<span class="o">[</span>INFO<span class="o">]</span>:-Writing<span class="w"> </span>global<span class="w"> </span>database<span class="w"> </span>metadata
<span class="m">20230803</span>:15:40:52<span class="w"> </span>gpbackup:gpadmin:mdw:002907-<span class="o">[</span>INFO<span class="o">]</span>:-Global<span class="w"> </span>database<span class="w"> </span>metadata<span class="w"> </span>backup<span class="w"> </span><span class="nb">complete</span>
<span class="m">20230803</span>:15:40:52<span class="w"> </span>gpbackup:gpadmin:mdw:002907-<span class="o">[</span>INFO<span class="o">]</span>:-Writing<span class="w"> </span>pre-data<span class="w"> </span>metadata
<span class="m">20230803</span>:15:40:52<span class="w"> </span>gpbackup:gpadmin:mdw:002907-<span class="o">[</span>INFO<span class="o">]</span>:-Pre-data<span class="w"> </span>metadata<span class="w"> </span>backup<span class="w"> </span><span class="nb">complete</span>
<span class="m">20230803</span>:15:40:52<span class="w"> </span>gpbackup:gpadmin:mdw:002907-<span class="o">[</span>INFO<span class="o">]</span>:-Writing<span class="w"> </span>post-data<span class="w"> </span>metadata
<span class="m">20230803</span>:15:40:52<span class="w"> </span>gpbackup:gpadmin:mdw:002907-<span class="o">[</span>INFO<span class="o">]</span>:-Post-data<span class="w"> </span>metadata<span class="w"> </span>backup<span class="w"> </span><span class="nb">complete</span>
<span class="m">20230803</span>:15:40:52<span class="w"> </span>gpbackup:gpadmin:mdw:002907-<span class="o">[</span>INFO<span class="o">]</span>:-Basing<span class="w"> </span>incremental<span class="w"> </span>backup<span class="w"> </span>off<span class="w"> </span>of<span class="w"> </span>backup<span class="w"> </span>with<span class="w"> </span><span class="nv">timestamp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">20230802171642</span>
<span class="m">20230803</span>:15:40:52<span class="w"> </span>gpbackup:gpadmin:mdw:002907-<span class="o">[</span>INFO<span class="o">]</span>:-Writing<span class="w"> </span>data<span class="w"> </span>to<span class="w"> </span>file
Tables<span class="w"> </span>backed<span class="w"> </span>up:<span class="w">  </span><span class="m">4</span><span class="w"> </span>/<span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="o">[==============================================================]</span><span class="w"> </span><span class="m">100</span>.00%<span class="w"> </span>0s
<span class="m">20230803</span>:15:40:52<span class="w"> </span>gpbackup:gpadmin:mdw:002907-<span class="o">[</span>INFO<span class="o">]</span>:-Data<span class="w"> </span>backup<span class="w"> </span><span class="nb">complete</span>
<span class="m">20230803</span>:15:40:53<span class="w"> </span>gpbackup:gpadmin:mdw:002907-<span class="o">[</span>INFO<span class="o">]</span>:-Found<span class="w"> </span>neither<span class="w"> </span>/usr/local/greenplum-db/./bin/gp_email_contacts.yaml<span class="w"> </span>nor<span class="w"> </span>/home/gpadmin/gp_email_contacts.yaml
<span class="m">20230803</span>:15:40:53<span class="w"> </span>gpbackup:gpadmin:mdw:002907-<span class="o">[</span>INFO<span class="o">]</span>:-Email<span class="w"> </span>containing<span class="w"> </span>gpbackup<span class="w"> </span>report<span class="w"> </span>/backups/gpseg-1/backups/20230803/20230803154051/gpbackup_20230803154051_report<span class="w"> </span>will<span class="w"> </span>not<span class="w"> </span>be<span class="w"> </span>sent
<span class="m">20230803</span>:15:40:53<span class="w"> </span>gpbackup:gpadmin:mdw:002907-<span class="o">[</span>INFO<span class="o">]</span>:-Backup<span class="w"> </span>completed<span class="w"> </span>successfully
</pre></div>
</div>
</section>
<section id="restore-from-an-incremental-backup-with-gprestore">
<h3>Restore from an incremental backup with <code class="docutils literal notranslate"><span class="pre">gprestore</span></code><a class="headerlink" href="#restore-from-an-incremental-backup-with-gprestore" title="Link to this heading"></a></h3>
<p>When restoring an from an incremental backup, you can specify the <code class="docutils literal notranslate"><span class="pre">--verbose</span></code> option to display the backups that are used in the restore operation on the command line. For example, the following <code class="docutils literal notranslate"><span class="pre">gprestore</span></code> command restores a backup using the timestamp <code class="docutils literal notranslate"><span class="pre">20230807092740</span></code>, an incremental backup. The output includes the backups that were used to restore the database data.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>gprestore<span class="w"> </span>--create-db<span class="w"> </span>--timestamp<span class="w"> </span><span class="m">20230807162904</span><span class="w"> </span>--verbose
...
<span class="m">20230807</span>:16:31:56<span class="w"> </span>gprestore:gpadmin:mdw:008603-<span class="o">[</span>INFO<span class="o">]</span>:-Pre-data<span class="w"> </span>metadata<span class="w"> </span>restore<span class="w"> </span><span class="nb">complete</span>
<span class="m">20230807</span>:16:31:56<span class="w"> </span>gprestore:gpadmin:mdw:008603-<span class="o">[</span>DEBUG<span class="o">]</span>:-Verifying<span class="w"> </span>backup<span class="w"> </span>file<span class="w"> </span>count
<span class="m">20230807</span>:16:31:56<span class="w"> </span>gprestore:gpadmin:mdw:008603-<span class="o">[</span>DEBUG<span class="o">]</span>:-Restoring<span class="w"> </span>data<span class="w"> </span>from<span class="w"> </span>backup<span class="w"> </span>with<span class="w"> </span>timestamp:<span class="w"> </span><span class="m">20230807162654</span>
<span class="m">20230807</span>:16:31:56<span class="w"> </span>gprestore:gpadmin:mdw:008603-<span class="o">[</span>DEBUG<span class="o">]</span>:-Reading<span class="w"> </span>data<span class="w"> </span><span class="k">for</span><span class="w"> </span>table<span class="w"> </span>public.tbl_ao<span class="w"> </span>from<span class="w"> </span>file<span class="w"> </span><span class="o">(</span>table<span class="w"> </span><span class="m">1</span><span class="w"> </span>of<span class="w"> </span><span class="m">1</span><span class="o">)</span>
<span class="m">20230807</span>:16:31:56<span class="w"> </span>gprestore:gpadmin:mdw:008603-<span class="o">[</span>DEBUG<span class="o">]</span>:-Checking<span class="w"> </span>whether<span class="w"> </span>segment<span class="w"> </span>agents<span class="w"> </span>had<span class="w"> </span>errors<span class="w"> </span>during<span class="w"> </span>restore
<span class="m">20230807</span>:16:31:56<span class="w"> </span>gprestore:gpadmin:mdw:008603-<span class="o">[</span>DEBUG<span class="o">]</span>:-Restoring<span class="w"> </span>data<span class="w"> </span>from<span class="w"> </span>backup<span class="w"> </span>with<span class="w"> </span>timestamp:<span class="w"> </span><span class="m">20230807162819</span>
<span class="m">20230807</span>:16:31:56<span class="w"> </span>gprestore:gpadmin:mdw:008603-<span class="o">[</span>DEBUG<span class="o">]</span>:-Reading<span class="w"> </span>data<span class="w"> </span><span class="k">for</span><span class="w"> </span>table<span class="w"> </span>public.test_ao<span class="w"> </span>from<span class="w"> </span>file<span class="w"> </span><span class="o">(</span>table<span class="w"> </span><span class="m">1</span><span class="w"> </span>of<span class="w"> </span><span class="m">1</span><span class="o">)</span>
<span class="m">20230807</span>:16:31:56<span class="w"> </span>gprestore:gpadmin:mdw:008603-<span class="o">[</span>DEBUG<span class="o">]</span>:-Checking<span class="w"> </span>whether<span class="w"> </span>segment<span class="w"> </span>agents<span class="w"> </span>had<span class="w"> </span>errors<span class="w"> </span>during<span class="w"> </span>restore
<span class="m">20230807</span>:16:31:56<span class="w"> </span>gprestore:gpadmin:mdw:008603-<span class="o">[</span>DEBUG<span class="o">]</span>:-Restoring<span class="w"> </span>data<span class="w"> </span>from<span class="w"> </span>backup<span class="w"> </span>with<span class="w"> </span>timestamp:<span class="w"> </span><span class="m">20230807162904</span>
<span class="m">20230807</span>:16:31:56<span class="w"> </span>gprestore:gpadmin:mdw:008603-<span class="o">[</span>DEBUG<span class="o">]</span>:-Reading<span class="w"> </span>data<span class="w"> </span><span class="k">for</span><span class="w"> </span>table<span class="w"> </span>public.homes2<span class="w"> </span>from<span class="w"> </span>file<span class="w"> </span><span class="o">(</span>table<span class="w"> </span><span class="m">1</span><span class="w"> </span>of<span class="w"> </span><span class="m">4</span><span class="o">)</span>
<span class="m">20230807</span>:16:31:56<span class="w"> </span>gprestore:gpadmin:mdw:008603-<span class="o">[</span>DEBUG<span class="o">]</span>:-Reading<span class="w"> </span>data<span class="w"> </span><span class="k">for</span><span class="w"> </span>table<span class="w"> </span>public.test2<span class="w"> </span>from<span class="w"> </span>file<span class="w"> </span><span class="o">(</span>table<span class="w"> </span><span class="m">2</span><span class="w"> </span>of<span class="w"> </span><span class="m">4</span><span class="o">)</span>
<span class="m">20230807</span>:16:31:56<span class="w"> </span>gprestore:gpadmin:mdw:008603-<span class="o">[</span>DEBUG<span class="o">]</span>:-Reading<span class="w"> </span>data<span class="w"> </span><span class="k">for</span><span class="w"> </span>table<span class="w"> </span>public.homes2a<span class="w"> </span>from<span class="w"> </span>file<span class="w"> </span><span class="o">(</span>table<span class="w"> </span><span class="m">3</span><span class="w"> </span>of<span class="w"> </span><span class="m">4</span><span class="o">)</span>
<span class="m">20230807</span>:16:31:56<span class="w"> </span>gprestore:gpadmin:mdw:008603-<span class="o">[</span>DEBUG<span class="o">]</span>:-Reading<span class="w"> </span>data<span class="w"> </span><span class="k">for</span><span class="w"> </span>table<span class="w"> </span>public.test2a<span class="w"> </span>from<span class="w"> </span>file<span class="w"> </span><span class="o">(</span>table<span class="w"> </span><span class="m">4</span><span class="w"> </span>of<span class="w"> </span><span class="m">4</span><span class="o">)</span>
<span class="m">20230807</span>:16:31:56<span class="w"> </span>gprestore:gpadmin:mdw:008603-<span class="o">[</span>DEBUG<span class="o">]</span>:-Checking<span class="w"> </span>whether<span class="w"> </span>segment<span class="w"> </span>agents<span class="w"> </span>had<span class="w"> </span>errors<span class="w"> </span>during<span class="w"> </span>restore
<span class="m">20230807</span>:16:31:57<span class="w"> </span>gprestore:gpadmin:mdw:008603-<span class="o">[</span>INFO<span class="o">]</span>:-Data<span class="w"> </span>restore<span class="w"> </span><span class="nb">complete</span>
<span class="m">20230807</span>:16:31:57<span class="w"> </span>gprestore:gpadmin:mdw:008603-<span class="o">[</span>INFO<span class="o">]</span>:-Restoring<span class="w"> </span>post-data<span class="w"> </span>metadata
<span class="m">20230807</span>:16:31:57<span class="w"> </span>gprestore:gpadmin:mdw:008603-<span class="o">[</span>INFO<span class="o">]</span>:-Post-data<span class="w"> </span>metadata<span class="w"> </span>restore<span class="w"> </span><span class="nb">complete</span>
...
</pre></div>
</div>
<p>The output shows that the restore operation used three backups.</p>
<p>When restoring an from an incremental backup, <code class="docutils literal notranslate"><span class="pre">gprestore</span></code> also lists the backups that are used in the restore operation in the <code class="docutils literal notranslate"><span class="pre">gprestore</span></code> log file.</p>
<p>During the restore operation, <code class="docutils literal notranslate"><span class="pre">gprestore</span></code> displays an error if the full backup or other required incremental backup is not available.</p>
</section>
</section>
<section id="incremental-backup-notes">
<h2>Incremental backup notes<a class="headerlink" href="#incremental-backup-notes" title="Link to this heading"></a></h2>
<p>To create an incremental backup, or to restore data from an incremental backup set, you need the complete backup set. When you archive incremental backups, the complete backup set must be archived. You must archive all the files created on the coordinator and all segments.</p>
<p>If you do not specify the <code class="docutils literal notranslate"><span class="pre">--from-timestamp</span></code> option when you create an incremental backup, <code class="docutils literal notranslate"><span class="pre">gpbackup</span></code> uses the most recent backup with a consistent set of options.</p>
<p>If you specify the <code class="docutils literal notranslate"><span class="pre">--from-timestamp</span></code> option when you create an incremental backup, <code class="docutils literal notranslate"><span class="pre">gpbackup</span></code> ensures that the options of the backup that is being created are consistent with the options of the specified backup.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">gpbackup</span></code> option <code class="docutils literal notranslate"><span class="pre">--with-stats</span></code> is not required to be the same for all backups in the backup set. However, to perform a restore operation with the <code class="docutils literal notranslate"><span class="pre">gprestore</span></code> option –with-stats to restore statistics, the backup you specify must have must have used the <code class="docutils literal notranslate"><span class="pre">--with-stats</span></code> when creating the backup.</p>
<p>You can perform a restore operation from any backup in the backup set. However, changes captured in incremental backups later than the backup use to restore database data will not be restored.</p>
<p>When restoring from an incremental backup set, <code class="docutils literal notranslate"><span class="pre">gprestore</span></code> checks the backups and restores each append-optimized table from the most recent version of the append-optimized table in the backup set and restores the heap tables from the latest backup.</p>
<p>The incremental back up set, a full backup and associated incremental backups, must be on a single device. For example, the backups in a backup set must all be on a file system or must all be on a Data Domain system.</p>
<p>If you specify the <code class="docutils literal notranslate"><span class="pre">gprestore</span></code> option <code class="docutils literal notranslate"><span class="pre">--incremental</span></code> to restore data from a specific incremental backup, you must also specify the <code class="docutils literal notranslate"><span class="pre">--data-only</span></code> option. Before performing the restore operation, <code class="docutils literal notranslate"><span class="pre">gprestore</span></code> ensures that the tables being restored exist. If a table does not exist, <code class="docutils literal notranslate"><span class="pre">gprestore</span></code> returns an error and exits.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Changes to the SynxDB Elastic segment configuration invalidate incremental backups. After you change the segment configuration (add or remove segment instances), you must create a full backup before you can create an incremental backup.</p>
</div>
</section>
</section>


           </div>
          </div>
          


  <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      <a href="../high-availability/ha-index.html" class="btn btn-neutral float-right" title="High Availability" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      <a href="full-backup-and-restore.html" class="btn btn-neutral float-left" title="Perform Full Backup and Restore" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
  </div>

<footer class="footer">
  <div class="container">
    <div class="footer-content">
      <div class="footer-section">
        <p>&copy; 2025, Synx Data Labs, Inc. All rights reserved.</p>
      </div>
      <div class="footer-section">
        <p>SynxDB Elastic Documentation</p>
      </div>
    </div>
  </div>
</footer>

<style>
.footer {
  background-color: var(--bg-secondary);
  border-top: 1px solid var(--border);
  padding: 1.5rem 0;
  margin-top: 3rem;
}

.footer-content {
  display: flex;
  justify-content: space-between;
  align-items: center;
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 2rem;
}

.footer-section p {
  margin: 0;
  color: var(--text-secondary);
  font-size: 0.9rem;
  font-family: 'Inter', sans-serif;
}

@media (max-width: 768px) {
  .footer-content {
    flex-direction: column;
    gap: 0.5rem;
    text-align: center;
  }
}
</style>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>