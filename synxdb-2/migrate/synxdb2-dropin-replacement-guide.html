<!DOCTYPE HTML>
<html lang="en" class="ayu sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Replacement and Fallback Procedures - SynxDB 2 Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "ayu";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">SynxDB 2 Documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <a href="https://www.synxdata.com/"><img id="fa fa-print" src="../SYNX-Text-and-Circular-Logo-142x28-White-text-Black-background.png" alt="Synx Data Labs Logo"/></a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="replacement-and-fallback-procedures"><a class="header" href="#replacement-and-fallback-procedures">Replacement and Fallback Procedures</a></h1>
<p>This topic describes the process of replacing a running Greenplum 6 installation with SynxDB 2 while maintaining fallback capability.</p>
<h2 id="important-notes"><a class="header" href="#important-notes">Important Notes</a></h2>
<ol>
<li>The Greenplum 6 installation is intentionally preserved to enable fallback if needed.</li>
<li>The drop-in replacement process uses symbolic links to switch between Greenplum and SynxDB.</li>
<li>Always start a new <code>gpadmin</code> shell after switching between versions to ensure proper environment setup.</li>
</ol>
<h2 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites</a></h2>
<p>Before you make any configuration changes to your Greenplum 6 system:</p>
<ul>
<li>Perform the <a href="synxdb2-pre-migration-guide.html">SynxDB 2: Pre-Migration Procedure</a> to ensure that GPCC and QuickLZ are not being used in your Greenplum 6 installation.</li>
<li>Perform a full backup of your data.</li>
<li>Backup the <code>postgresql.conf</code> files from each segment data directory.</li>
<li>Document any existing configuration changes that you have made to Greenplum 6 or to Greenplum 6 host machines.</li>
<li>Create an <code>all_hosts.txt</code> file that lists each hostname in the Greenplum 6 cluster.</li>
<li>Ensure that the <code>gpadmin</code> user has sudo access to all cluster hosts.</li>
<li>Preserve the existing Greenplum 6 installation for fallback capability.</li>
</ul>
<p>This guide assumes that each host can access the Synx Data Labs repositories. If your environment restricts internet access, or if you prefer to host repositories within your infrastructure to ensure consistent package availability, contact Synx Data Labs to obtain a complete repository mirror for local hosting.</p>
<h2 id="installation-and-start-up-procedure"><a class="header" href="#installation-and-start-up-procedure">Installation and Start-up Procedure</a></h2>
<p>Follow these steps to install the SynxDB software to Greenplum 6 hosts, and then start the SynxDB cluster.</p>
<h3 id="1-import-the-synxdb-gpg-key-across-cluster"><a class="header" href="#1-import-the-synxdb-gpg-key-across-cluster">1. Import the SynxDB GPG Key Across Cluster</a></h3>
<p>This step establishes trust for signed SynxDB packages across your cluster:</p>
<pre><code class="language-bash"># Download and verify GPG key
gpssh -f ~/all_hosts.txt -e 'wget -nv https://synxdb-repo.s3.us-west-2.amazonaws.com/gpg/RPM-GPG-KEY-SYNXDB'

# Import the verified key into the RPM database
gpssh -f ~/all_hosts.txt -e 'sudo rpm --import RPM-GPG-KEY-SYNXDB'

# Verify the key was imported correctly
gpssh -f ~/all_hosts.txt -e 'rpm -q gpg-pubkey --qf "%{NAME}-%{VERSION}-%{RELEASE} %{SUMMARY}\n" | grep SynxDB'
</code></pre>
<h3 id="2-install-the-synxdb-repository"><a class="header" href="#2-install-the-synxdb-repository">2. Install the SynxDB Repository</a></h3>
<p>Each package is verified for authenticity and integrity:</p>
<pre><code class="language-bash"># Download release package
gpssh -f ~/all_hosts.txt -e 'wget -nv https://synxdb-repo.s3.us-west-2.amazonaws.com/repo-release/synxdb2-release-1-1.rpm'

# Verify package signature against imported GPG key
gpssh -f ~/all_hosts.txt -e 'rpm --checksig synxdb2-release-1-1.rpm'

# Install repository package
gpssh -f ~/all_hosts.txt -e 'sudo dnf install -y synxdb2-release-1-1.rpm'

# Verify repository installation
gpssh -f ~/all_hosts.txt -e 'sudo dnf repolist'
gpssh -f ~/all_hosts.txt -e 'rpm -qi synxdb-release'
</code></pre>
<h3 id="3-install-synxdb"><a class="header" href="#3-install-synxdb">3. Install SynxDB</a></h3>
<pre><code class="language-bash"># Install SynxDB package
gpssh -f ~/all_hosts.txt -e 'sudo dnf install -y synxdb'

# Verify installation
gpssh -f ~/all_hosts.txt -e 'ls -ld /usr/local/synxdb*'
gpssh -f ~/all_hosts.txt -e 'rpm -q synxdb'
gpssh -f ~/all_hosts.txt -e 'rpm -qi synxdb'
</code></pre>
<h3 id="4-verify-the-current-greenplum-6-installation"><a class="header" href="#4-verify-the-current-greenplum-6-installation">4. Verify the Current Greenplum 6 Installation</a></h3>
<pre><code class="language-bash">psql -c 'select version()'
which postgres
postgres --version
postgres --gp-version
which psql
psql --version
</code></pre>
<h3 id="5-stop-the-greenplum-cluster"><a class="header" href="#5-stop-the-greenplum-cluster">5. Stop the Greenplum Cluster</a></h3>
<pre><code class="language-bash">gpstop -a
</code></pre>
<h3 id="6-configure-synxdb-as-a-drop-in-replacement"><a class="header" href="#6-configure-synxdb-as-a-drop-in-replacement">6. Configure SynxDB as a Drop-in Replacement</a></h3>
<pre><code class="language-bash"># Create symbolic links for drop-in replacement
gpssh -f ~/all_hosts.txt -e 'sudo rm -v /usr/local/greenplum-db'
gpssh -f ~/all_hosts.txt -e 'sudo ln -s /usr/local/synxdb /usr/local/greenplum-db'
gpssh -f ~/all_hosts.txt -e 'sudo ln -s /usr/local/synxdb/synxdb_path.sh /usr/local/synxdb/greenplum_path.sh'
</code></pre>
<h3 id="7-start-the-cluster-using-synxdb"><a class="header" href="#7-start-the-cluster-using-synxdb">7. Start the Cluster using SynxDB</a></h3>
<p>⚠️ <strong>IMPORTANT:</strong> Start a new gpadmin shell session before proceeding. This ensures that:</p>
<ul>
<li>Old environment variables are cleared</li>
<li>The new environment is configured via <code>/usr/local/greenplum-db/greenplum_path.sh</code></li>
<li>The correct binaries are referenced in <code>PATH</code></li>
</ul>
<pre><code class="language-bash"># In your new gpadmin shell:
gpstart -a

# Verify SynxDB is running
psql -c 'select version()'
which postgres
postgres --version
postgres --gp-version
which psql
psql --version
</code></pre>
<h2 id="fallback-procedure"><a class="header" href="#fallback-procedure">Fallback Procedure</a></h2>
<p>If necessary, you can revert to using the Greenplum 6 software by following these steps.</p>
<h3 id="1-stop-the-cluster"><a class="header" href="#1-stop-the-cluster">1. Stop the Cluster</a></h3>
<pre><code class="language-bash">gpstop -a
</code></pre>
<h3 id="2-restore-the-greenplum-symbolic-links"><a class="header" href="#2-restore-the-greenplum-symbolic-links">2. Restore the Greenplum Symbolic Links</a></h3>
<pre><code class="language-bash"># Adjust the version number to match your Greenplum installation
gpssh -f ~/all_hosts.txt -e 'sudo rm -v /usr/local/greenplum-db'
gpssh -f ~/all_hosts.txt -e 'sudo ln -s /usr/local/greenplum-db-6.26.4 /usr/local/greenplum-db'
</code></pre>
<h3 id="3-start-the-cluster-with-greenplum-6"><a class="header" href="#3-start-the-cluster-with-greenplum-6">3. Start the Cluster with Greenplum 6</a></h3>
<p>⚠️ <strong>IMPORTANT:</strong> Start a new gpadmin shell session before proceeding. This ensures that:</p>
<ul>
<li>Old environment variables are cleared</li>
<li>The new environment is configured via <code>/usr/local/greenplum-db/greenplum_path.sh</code></li>
<li>The correct binaries are referenced in <code>PATH</code></li>
</ul>
<pre><code class="language-bash"># In your new gpadmin shell:
gpstart -a

# Verify Greenplum is running
psql -c 'select version()'
which postgres
postgres --version
postgres --gp-version
which psql
psql --version
</code></pre>
<h2 id="disclaimer--attribution"><a class="header" href="#disclaimer--attribution">Disclaimer &amp; Attribution</a></h2>
<p>SynxDB is derived from the last open-source version of Greenplum, originally developed by Pivotal Software, Inc., and maintained under Broadcom Inc.’s stewardship. Greenplum® is a registered trademark of Broadcom Inc. Synx Data Labs, Inc. and SynxDB are not affiliated with, endorsed by, or sponsored by Broadcom Inc. References to Greenplum are provided for comparative, interoperability, and attribution purposes in compliance with open-source licensing requirements.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../migrate/synxdb2-pre-migration-guide.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../admin_guide/intro/partI.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../migrate/synxdb2-pre-migration-guide.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../admin_guide/intro/partI.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
