<!DOCTYPE HTML>
<html lang="en" class="ayu sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>PL/R Language - SynxDB 2 Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "ayu";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">SynxDB 2 Documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <a href="https://www.synxdata.com/"><img id="fa fa-print" src="../SYNX-Text-and-Circular-Logo-142x28-White-text-Black-background.png" alt="Synx Data Labs Logo"/></a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="plr-language"><a class="header" href="#plr-language">PL/R Language</a></h1>
<p>This chapter contains the following information:</p>
<ul>
<li><a href="#topic2">About SynxDB PL/R</a></li>
<li><a href="#topic_irz_m3l_v3b">Installing R</a></li>
<li><a href="#topic3">Installing PL/R</a></li>
<li><a href="#topic6">Uninstalling PL/R</a></li>
<li><a href="#topic5">Enabling PL/R Language Support</a></li>
<li><a href="#topic9">Examples</a></li>
<li><a href="#topic13">Downloading and Installing R Packages</a></li>
<li><a href="#topic14">Displaying R Library Information</a></li>
<li><a href="#topic_g12_gwt_3gb">Loading R Modules at Startup</a></li>
<li><a href="#topic15">References</a></li>
</ul>
<h2 id="about-synxdb-plr"><a class="header" href="#about-synxdb-plr"><a id="topic2"></a>About SynxDB PL/R</a></h2>
<p>PL/R is a procedural language. With the SynxDB PL/R extension you can write database functions in the R programming language and use R packages that contain R functions and data sets.</p>
<p>For information about supported PL/R versions, see the <em>SynxDB Release Notes</em>.</p>
<h3 id="installing-r"><a class="header" href="#installing-r"><a id="topic_irz_m3l_v3b"></a>Installing R</a></h3>
<p>For RHEL and CentOS, installing the PL/R package installs R in <code>$GPHOME/ext/R-&lt;version&gt;</code> and updates <code>$GPHOME/synxdb_path.sh</code> for SynxDB to use R.</p>
<p>To use PL/R on Ubuntu host systems, you must install and configure R on all SynxDB host systems before installing PL/R.</p>
<blockquote>
<p><strong>Note</strong> You can use the <a href="../utility_guide/ref/gpssh.html">gpssh</a> utility to run bash shell commands on multiple remote hosts.</p>
</blockquote>
<ol>
<li>
<p>To install R, run these <code>apt</code> commands on all host systems.</p>
<pre><code>$ sudo apt update &amp;&amp; sudo apt install r-base
</code></pre>
<p>Installing <code>r-base</code> also installs dependent packages including <code>r-base-core</code>.</p>
</li>
<li>
<p>To configure SynxDB to use R, add the <code>R_HOME</code> environment variable to <code>$GPHOME/synxdb_path.sh</code> on all hosts. This example command returns the R home directory.</p>
<pre><code>$ R RHOME
/usr/lib/R
</code></pre>
<p>Using the previous R home directory as an example, add this line to the file on all hosts.</p>
<pre><code>export R_HOME=/usr/lib/R
</code></pre>
</li>
<li>
<p>Source <code>$GPHOME/synxdb_path.sh</code> and restart SynxDB. For example, run these commands on the SynxDB master host.</p>
<pre><code>$ source $GPHOME/synxdb_path.sh
$ gpstop -r
</code></pre>
</li>
</ol>
<h3 id="installing-plr"><a class="header" href="#installing-plr"><a id="topic3"></a>Installing PL/R</a></h3>
<p>The PL/R extension is available as a package. Download the package and install it with the SynxDB Package Manager (<code>gppkg</code>).</p>
<p>The <a href="../utility_guide/ref/gppkg.html">gppkg</a> utility installs SynxDB extensions, along with any dependencies, on all hosts across a cluster. It also automatically installs extensions on new hosts in the case of system expansion and segment recovery.</p>
<h4 id="installing-the-extension-package"><a class="header" href="#installing-the-extension-package"><a id="topic4"></a>Installing the Extension Package</a></h4>
<p>Before you install the PL/R extension, make sure that your SynxDB is running, you have sourced <code>synxdb_path.sh</code>, and that the <code>$MASTER_DATA_DIRECTORY</code> and <code>$GPHOME</code> variables are set.</p>
<ol>
<li>
<p>Download the PL/R extension package.</p>
</li>
<li>
<p>Copy the PL/R package to the SynxDB master host.</p>
</li>
<li>
<p>Install the software extension package by running the <code>gppkg</code> command. This example installs the PL/R extension on a Linux system:</p>
<pre><code>$ gppkg -i plr-3.0.3-gp6-rhel7_x86_64.gppkg
</code></pre>
</li>
<li>
<p>Source the file <code>$GPHOME/synxdb_path.sh</code>.</p>
</li>
<li>
<p>Restart SynxDB.</p>
<pre><code>$ gpstop -r
</code></pre>
</li>
</ol>
<h3 id="enabling-plr-language-support"><a class="header" href="#enabling-plr-language-support"><a id="topic5"></a>Enabling PL/R Language Support</a></h3>
<p>For each database that requires its use, register the PL/R language with the SQL command <code>CREATE EXTENSION</code>. Because PL/R is an untrusted language, only superusers can register PL/R with a database. For example, run this command as the <code>gpadmin</code> user to register the language with the database named <code>testdb</code>:</p>
<pre><code>$ psql -d testdb -c 'CREATE EXTENSION plr;'
</code></pre>
<p>PL/R is registered as an untrusted language.</p>
<h3 id="uninstalling-plr"><a class="header" href="#uninstalling-plr"><a id="topic6"></a>Uninstalling PL/R</a></h3>
<ul>
<li><a href="#topic7">Remove PL/R Support for a Database</a></li>
<li><a href="#topic8">Uninstall the Extension Package</a></li>
<li><a href="#topic_ifv_tsf_w3b">Uninstall R (Ubuntu)</a></li>
</ul>
<p>When you remove PL/R language support from a database, the PL/R routines that you created in the database will no longer work.</p>
<h4 id="remove-plr-support-for-a-database"><a class="header" href="#remove-plr-support-for-a-database"><a id="topic7"></a>Remove PL/R Support for a Database</a></h4>
<p>For a database that no longer requires the PL/R language, remove support for PL/R with the SQL command <code>DROP EXTENSION</code>. Because PL/R is an untrusted language, only superusers can remove support for the PL/R language from a database. For example, run this command as the <code>gpadmin</code> user to remove support for PL/R from the database named <code>testdb</code>:</p>
<pre><code>$ psql -d testdb -c 'DROP EXTENSION plr;'
</code></pre>
<p>The default command fails if any existing objects (such as functions) depend on the language. Specify the <code>CASCADE</code> option to also drop all dependent objects, including functions that you created with PL/R.</p>
<h4 id="uninstall-the-extension-package"><a class="header" href="#uninstall-the-extension-package"><a id="topic8"></a>Uninstall the Extension Package</a></h4>
<p>If no databases have PL/R as a registered language, uninstall the SynxDB PL/R extension with the <code>gppkg</code> utility. This example uninstalls PL/R package version 3.0.3.</p>
<pre><code>$ gppkg -r plr-3.0.3
</code></pre>
<p>On RHEL and CentOS systems, uninstalling the extension uninstalls the R software that was installed with the extension.</p>
<p>You can run the <code>gppkg</code> utility with the options <code>-q --all</code> to list the installed extensions and their versions.</p>
<p>For Ubuntu systems, remove the <code>R_HOME</code> environment variable from <code>synxdb_path.sh</code> on all SynxDB host systems.</p>
<p>Source the file <code>$GPHOME/synxdb_path.sh</code> and restart the database.</p>
<pre><code>$ gpstop -r
</code></pre>
<h4 id="uninstall-r-ubuntu"><a class="header" href="#uninstall-r-ubuntu"><a id="topic_ifv_tsf_w3b"></a>Uninstall R (Ubuntu)</a></h4>
<p>For Ubuntu systems, remove R from all SynxDB host systems. These commands remove R from an Ubuntu system.</p>
<pre><code>$ sudo apt remove r-base
$ sudo apt remove r-base-core
</code></pre>
<p>Removing <code>r-base</code> does not uninstall the R executable. Removing <code>r-base-core</code> uninstalls the R executable.</p>
<h3 id="examples"><a class="header" href="#examples"><a id="topic9"></a>Examples</a></h3>
<p>The following are simple PL/R examples.</p>
<h4 id="example-1-using-plr-for-single-row-operators"><a class="header" href="#example-1-using-plr-for-single-row-operators"><a id="topic10"></a>Example 1: Using PL/R for single row operators</a></h4>
<p>This function generates an array of numbers with a normal distribution using the R function <code>rnorm()</code>.</p>
<pre><code>CREATE OR REPLACE FUNCTION r_norm(n integer, mean float8,
  std_dev float8) RETURNS float8[ ] AS
$$
  x&lt;-rnorm(n,mean,std_dev)
  return(x)
$$
LANGUAGE 'plr';
</code></pre>
<p>The following <code>CREATE TABLE</code> command uses the <code>r_norm()</code> function to populate the table. The <code>r_norm()</code> function creates an array of 10 numbers.</p>
<pre><code>CREATE TABLE test_norm_var
  AS SELECT id, r_norm(10,0,1) as x
  FROM (SELECT generate_series(1,30:: bigint) AS ID) foo
  DISTRIBUTED BY (id);
</code></pre>
<h4 id="example-2-returning-plr-dataframes-in-tabular-form"><a class="header" href="#example-2-returning-plr-dataframes-in-tabular-form"><a id="topic11"></a>Example 2: Returning PL/R data.frames in Tabular Form</a></h4>
<p>Assuming your PL/R function returns an R <code>data.frame</code> as its output, unless you want to use arrays of arrays, some work is required to see your <code>data.frame</code> from PL/R as a simple SQL table:</p>
<ul>
<li>
<p>Create a <code>TYPE</code> in a SynxDB with the same dimensions as your R <code>data.frame:</code></p>
<pre><code>CREATE TYPE t1 AS ...
</code></pre>
</li>
<li>
<p>Use this <code>TYPE</code> when defining your PL/R function</p>
<pre><code>... RETURNS SET OF t1 AS ...
</code></pre>
</li>
</ul>
<p>Sample SQL for this is given in the next example.</p>
<h4 id="example-3-hierarchical-regression-using-plr"><a class="header" href="#example-3-hierarchical-regression-using-plr"><a id="topic12"></a>Example 3: Hierarchical Regression using PL/R</a></h4>
<p>The SQL below defines a <code>TYPE</code> and runs hierarchical regression using PL/R:</p>
<pre><code>--Create TYPE to store model results
DROP TYPE IF EXISTS wj_model_results CASCADE;
CREATE TYPE wj_model_results AS (
  cs text, coefext float, ci_95_lower float, ci_95_upper float,
  ci_90_lower float, ci_90_upper float, ci_80_lower float,
  ci_80_upper float);

--Create PL/R function to run model in R
DROP FUNCTION IF EXISTS wj_plr_RE(float [ ], text [ ]);
CREATE FUNCTION wj_plr_RE(response float [ ], cs text [ ])
RETURNS SETOF wj_model_results AS
$$
  library(arm)
  y&lt;- log(response)
  cs&lt;- cs
  d_temp&lt;- data.frame(y,cs)
  m0 &lt;- lmer (y ~ 1 + (1 | cs), data=d_temp)
  cs_unique&lt;- sort(unique(cs))
  n_cs_unique&lt;- length(cs_unique)
  temp_m0&lt;- data.frame(matrix0,n_cs_unique, 7))
  for (i in 1:n_cs_unique){temp_m0[i,]&lt;-
    c(exp(coef(m0)$cs[i,1] + c(0,-1.96,1.96,-1.65,1.65,
      -1.28,1.28)*se.ranef(m0)$cs[i]))}
  names(temp_m0)&lt;- c("Coefest", "CI_95_Lower",
    "CI_95_Upper", "CI_90_Lower", "CI_90_Upper",
   "CI_80_Lower", "CI_80_Upper")
  temp_m0_v2&lt;- data.frames(cs_unique, temp_m0)
  return(temp_m0_v2)
$$
LANGUAGE 'plr';

--Run modeling plr function and store model results in a
--table
DROP TABLE IF EXISTS wj_model_results_roi;
CREATE TABLE wj_model_results_roi AS SELECT *
  FROM wj_plr_RE('{1,1,1}', '{"a", "b", "c"}');
</code></pre>
<h3 id="downloading-and-installing-r-packages"><a class="header" href="#downloading-and-installing-r-packages"><a id="topic13"></a>Downloading and Installing R Packages</a></h3>
<p>R packages are modules that contain R functions and data sets. You can install R packages to extend R and PL/R functionality in SynxDB.</p>
<p>SynxDB provides a collection of data science-related R libraries that can be used with the SynxDB PL/R language. You can download these libraries in <code>.gppkg</code> format. For information about the libraries, see <a href="../install_guide/install_r_dslib.html">R Data Science Library Package</a>.</p>
<blockquote>
<p><strong>Note</strong> If you expand SynxDB and add segment hosts, you must install the R packages in the R installation of the new hosts.</p>
</blockquote>
<ol>
<li>
<p>For an R package, identify all dependent R packages and each package web URL. The information can be found by selecting the given package from the following navigation page:</p>
<p><a href="https://cran.r-project.org/web/packages/available_packages_by_name.html">https://cran.r-project.org/web/packages/available_packages_by_name.html</a></p>
<p>As an example, the page for the R package arm indicates that the package requires the following R libraries: Matrix, lattice, lme4, R2WinBUGS, coda, abind, foreign, and MASS.</p>
<p>You can also try installing the package with <code>R CMD INSTALL</code> command to determine the dependent packages.</p>
<p>For the R installation included with the SynxDB PL/R extension, the required R packages are installed with the PL/R extension. However, the Matrix package requires a newer version.</p>
</li>
<li>
<p>From the command line, use the <code>wget</code> utility to download the <code>tar.gz</code> files for the arm package to the SynxDB master host:</p>
<pre><code>wget https://cran.r-project.org/src/contrib/Archive/arm/arm_1.5-03.tar.gz
</code></pre>
<pre><code>wget https://cran.r-project.org/src/contrib/Archive/Matrix/Matrix_0.9996875-1.tar.gz
</code></pre>
</li>
<li>
<p>Use the <a href="../utility_guide/ref/gpscp.html">gpscp</a> utility and the <code>hosts_all</code> file to copy the <code>tar.gz</code> files to the same directory on all nodes of the SynxDB cluster. The <code>hosts_all</code> file contains a list of all the SynxDB segment hosts. You might require root access to do this.</p>
<pre><code>gpscp -f hosts_all Matrix_0.9996875-1.tar.gz =:/home/gpadmin 
</code></pre>
<pre><code>gpscp -f /hosts_all arm_1.5-03.tar.gz =:/home/gpadmin
</code></pre>
</li>
<li>
<p>Use the <code>gpssh</code> utility in interactive mode to log into each SynxDB segment host (<code>gpssh -f all_hosts</code>). Install the packages from the command prompt using the <code>R CMD INSTALL</code> command. Note that this may require root access. For example, this R install command installs the packages for the arm package.</p>
<pre><code>$R_HOME/bin/R CMD INSTALL Matrix_0.9996875-1.tar.gz   arm_1.5-03.tar.gz
</code></pre>
</li>
<li>
<p>Ensure that the package is installed in the <code>$R_HOME/library</code> directory on all the segments (the <code>gpssh</code> can be used to install the package). For example, this <code>gpssh</code> command list the contents of the R library directory.</p>
<pre><code>gpssh -s -f all_hosts "ls $R_HOME/library"
</code></pre>
<p>The <code>gpssh</code> option <code>-s</code> sources the <code>synxdb_path.sh</code> file before running commands on the remote hosts.</p>
</li>
<li>
<p>Test if the R package can be loaded.</p>
<p>This function performs a simple test to determine if an R package can be loaded:</p>
<pre><code>CREATE OR REPLACE FUNCTION R_test_require(fname text)
RETURNS boolean AS
$BODY$
    return(require(fname,character.only=T))
$BODY$
LANGUAGE 'plr';
</code></pre>
<p>This SQL command checks if the R package arm can be loaded:</p>
<pre><code>SELECT R_test_require('arm');
</code></pre>
</li>
</ol>
<h3 id="displaying-r-library-information"><a class="header" href="#displaying-r-library-information"><a id="topic14"></a>Displaying R Library Information</a></h3>
<p>You can use the R command line to display information about the installed libraries and functions on the SynxDB host. You can also add and remove libraries from the R installation. To start the R command line on the host, log into the host as the <code>gadmin</code> user and run the script R from the directory <code>$GPHOME/ext/R-3.3.3/bin</code>.</p>
<p>This R function lists the available R packages from the R command line:</p>
<pre><code>&gt; library()
</code></pre>
<p>Display the documentation for a particular R package</p>
<pre><code>&gt; library(help="&lt;package_name&gt;")
&gt; help(package="&lt;package_name&gt;")
</code></pre>
<p>Display the help file for an R function:</p>
<pre><code>&gt; help("&lt;function_name&gt;")
&gt; ?&lt;function_name&gt;
</code></pre>
<p>To see what packages are installed, use the R command <code>installed.packages()</code>. This will return a matrix with a row for each package that has been installed. Below, we look at the first 5 rows of this matrix.</p>
<pre><code>&gt; installed.packages()
</code></pre>
<p>Any package that does not appear in the installed packages matrix must be installed and loaded before its functions can be used.</p>
<p>An R package can be installed with <code>install.packages()</code>:</p>
<pre><code>&gt; install.packages("&lt;package_name&gt;")
&gt; install.packages("mypkg", dependencies = TRUE, type="source")
</code></pre>
<p>Load a package from the R command line.</p>
<pre><code>&gt; library(" &lt;package_name&gt; ") 
</code></pre>
<p>An R package can be removed with <code>remove.packages</code></p>
<pre><code>&gt; remove.packages("&lt;package_name&gt;")
</code></pre>
<p>You can use the R command <code>-e</code> option to run functions from the command line. For example, this command displays help on the R package MASS.</p>
<pre><code>$ R -e 'help("MASS")'
</code></pre>
<h3 id="loading-r-modules-at-startup"><a class="header" href="#loading-r-modules-at-startup"><a id="topic_g12_gwt_3gb"></a>Loading R Modules at Startup</a></h3>
<p>PL/R can automatically load saved R code during interpreter initialization. To use this feature, you create the <code>plr_modules</code> database table and then insert the R modules you want to auto-load into the table. If the table exists, PL/R will load the code it contains into the interpreter.</p>
<p>In a SynxDB system, table rows are usually distributed so that each row exists at only one segment instance. The R interpreter at each segment instance, however, needs to load all of the modules, so a normally distributed table will not work. You must create the <code>plr_modules</code> table as a <em>replicated table</em> in the default schema so that all rows in the table are present at every segment instance. For example:</p>
<pre><code>CREATE TABLE public.plr_modules {
  modseq int4,
  modsrc text
) DISTRIBUTED REPLICATED;
</code></pre>
<p>See <a href="https://www.joeconway.com/plr/doc/plr-module-funcs.html">https://www.joeconway.com/plr/doc/plr-module-funcs.html</a> for more information about using the PL/R auto-load feature.</p>
<h3 id="references"><a class="header" href="#references"><a id="topic15"></a>References</a></h3>
<p><a href="https://www.r-project.org/">https://www.r-project.org/</a> - The R Project home page.</p>
<p><a href="https://cran.r-project.org/src/contrib/Archive/PivotalR/">https://cran.r-project.org/src/contrib/Archive/PivotalR/</a> - The archive page for PivotalR, a package that provides an R interface to operate on SynxDB tables and views that is similar to the R data.frame. PivotalR also supports using the machine learning package <a href="https://madlib.apache.org/">MADlib</a> directly from R.</p>
<p>The following links highlight key topics from the <a href="https://www.joeconway.com/doc/doc.html">R documentation</a>.</p>
<ul>
<li>R Functions and Arguments - <a href="https://www.joeconway.com/doc/plr-funcs.html">https://www.joeconway.com/doc/plr-funcs.html</a></li>
<li>Passing Data Values in R - <a href="https://www.joeconway.com/doc/plr-data.html">https://www.joeconway.com/doc/plr-data.html</a></li>
<li>Aggregate Functions in R - <a href="https://www.joeconway.com/doc/plr-aggregate-funcs.html">https://www.joeconway.com/doc/plr-aggregate-funcs.html</a></li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../analytics/pl_python.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../admin_guide/dml.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../analytics/pl_python.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../admin_guide/dml.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
