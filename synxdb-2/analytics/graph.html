<!DOCTYPE HTML>
<html lang="en" class="ayu sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Graph Analytics - SynxDB 2 Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "ayu";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">SynxDB 2 Documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <a href="https://www.synxdata.com/"><img id="fa fa-print" src="../SYNX-Text-and-Circular-Logo-142x28-White-text-Black-background.png" alt="Synx Data Labs Logo"/></a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="graph-analytics"><a class="header" href="#graph-analytics">Graph Analytics</a></h1>
<p>Many modern business problems involve connections and relationships between entities, and are not solely based on discrete data. Graphs are powerful at representing complex interconnections, and graph data modeling is very effective and flexible when the number and depth of relationships increase exponentially.</p>
<p>The use cases for graph analytics are diverse: social networks, transportation routes, autonomous vehicles, cyber security, criminal networks, fraud detection, health research, epidemiology, and so forth.</p>
<p>This chapter contains the following information:</p>
<ul>
<li><a href="#topic_graph">What is a Graph?</a></li>
<li><a href="#graph_on_greenplum">Graph Analytics on SynxDB</a></li>
<li><a href="#topic_using_graph">Using Graph</a></li>
<li><a href="#topic_graph_modules">Graph Modules</a></li>
<li><a href="#topic_graph_references">References</a></li>
</ul>
<h2 id="what-is-a-graph"><a class="header" href="#what-is-a-graph"><a id="topic_graph"></a>What is a Graph?</a></h2>
<p>Graphs represent the interconnections between objects (vertices) and their relationships (edges). Example objects could be people, locations, cities, computers, or components on a circuit board. Example connections could be roads, circuits, cables, or interpersonal relationships. Edges can have directions and weights, for example the distance between towns.</p>
<p><img src="graphics/graph_example.png" alt="Graph connection example" /></p>
<p>Graphs can be small and easily traversed - as with a small group of friends - or extremely large and complex, similar to contacts in a modern-day social network.</p>
<h2 id="graph-analytics-on-synxdb"><a class="header" href="#graph-analytics-on-synxdb"><a id="graph_on_greenplum"></a>Graph Analytics on SynxDB</a></h2>
<p>Efficient processing of very large graphs can be challenging. SynxDB offers a suitable environment for this work for these key reasons:</p>
<ol>
<li>
<p>Using MADlib graph functions in SynxDB brings the graph computation close to where the data lives. Otherwise, large data sets need to be moved to a specialized graph database, requiring additional time and resources.</p>
</li>
<li>
<p>Specialized graph databases frequently use purpose-built languages. With SynxDB, you can invoke graph functions using the familiar SQL interface. For example, for the <a href="http://madlib.apache.org/docs/latest/group__grp__pagerank.html">PageRank</a> graph algorithm:</p>
<pre><code>SELECT madlib.pagerank('vertex',     -- Vertex table
               'id',                 -- Vertex id column
               'edge',               -- Edge table
               'src=src, dest=dest', -- Comma delimited string of edge arguments
               'pagerank_out',       -- Output table of PageRank
                0.5);                -- Damping factor
SELECT * FROM pagerank_out ORDER BY pagerank DESC;
</code></pre>
</li>
<li>
<p>A lot of data science problems are solved using a combination of models, with graphs being just one. Regression, clustering, and other methods available in SynxDB, make for a powerful combination.</p>
</li>
<li>
<p>SynxDB offers great benefits of scale, taking advantage of years of query execution and optimization research focused on large data sets.</p>
</li>
</ol>
<h2 id="using-graph"><a class="header" href="#using-graph"><a id="topic_using_graph"></a>Using Graph</a></h2>
<p><strong>Installing Graph Modules</strong></p>
<p>To use the MADlib graph modules, install the version of MADlib corresponding to your SynxDB version. For SynxDB 2, see <a href="./madlib.html#topic3">Installing MADlib</a>.</p>
<p>Graph modules on MADlib support many algorithms.</p>
<p><strong>Creating a Graph in SynxDB</strong></p>
<p>To represent a graph in SynxDB, create tables that represent the vertices, edges, and their properties.</p>
<p><img src="graphics/vertex_edge_table.png" alt="Vertex edge table" /></p>
<p>Using SQL, create the relevant tables in the database you want to use. This example uses <code>testdb</code>:</p>
<pre><code>gpadmin@mdw ~]$ psql
dev=# \c testdb
</code></pre>
<p>Create a table for vertices, called <code>vertex</code>, and a table for edges and their weights, called <code>edge</code>:</p>
<pre><code>testdb=# DROP TABLE IF EXISTS vertex, edge; 
testdb=# CREATE TABLE vertex(id INTEGER); 
testdb=# CREATE TABLE edge(         
         src INTEGER,        
         dest INTEGER,           
         weight FLOAT8        
         );
</code></pre>
<p>Insert values related to your specific use case. For example :</p>
<pre><code>testdb#=&gt; INSERT INTO vertex VALUES
(0),
(1),
(2),
(3),
(4),
(5),
(6),
(7); 

testdb#=&gt; INSERT INTO edge VALUES
(0, 1, 1.0),
(0, 2, 1.0),
(0, 4, 10.0),
(1, 2, 2.0),
(1, 3, 10.0),
(2, 3, 1.0),
(2, 5, 1.0),
(2, 6, 3.0),
(3, 0, 1.0),
(4, 0, -2.0),
(5, 6, 1.0),
(6, 7, 1.0);
</code></pre>
<p>Now select the <a href="#topic_graph_modules">Graph Module</a> that suits your analysis.</p>
<h2 id="graph-modules"><a class="header" href="#graph-modules"><a id="topic_graph_modules"></a>Graph Modules</a></h2>
<p>This section lists the graph functions supported in MADlib. They include: <a href="#section_m2x_rkr_xlb">All Pairs Shortest Path (APSP)</a>, <a href="#section_ykg_53s_xlb">Breadth-First Search</a>, <a href="#section_evh_t3s_xlb">Hyperlink-Induced Topic Search (HITS)</a>, <a href="#section_e3f_s3s_xlb">PageRank and Personalized PageRank</a>, <a href="#section_rxc_r3s_xlb">Single Source Shortest Path (SSSP)</a>, <a href="#section_zmd_q3s_xlb">Weakly Connected Components</a>, and <a href="#section_wcn_w3s_xlb">Measures</a>. Explore each algorithm using the example <code>edge</code> and <code>vertex</code> tables already created.</p>
<h3 id="all-pairs-shortest-path-apsp"><a class="header" href="#all-pairs-shortest-path-apsp"><a id="section_m2x_rkr_xlb"></a>All Pairs Shortest Path (APSP)</a></h3>
<p>The all pairs shortest paths (APSP) algorithm finds the length (summed weights) of the shortest paths between all pairs of vertices, such that the sum of the weights of the path edges is minimized.</p>
<p>The function is:</p>
<pre><code>graph_apsp( vertex_table,
vertex_id,
edge_table,            
edge_args,            
out_table,            
grouping_cols          
)
</code></pre>
<p>For details on the parameters, with examples, see the <a href="http://madlib.apache.org/docs/latest/group__grp__apsp.html">All Pairs Shortest Path</a> in the Apache MADlib documentation.</p>
<h3 id="breadth-first-search"><a class="header" href="#breadth-first-search"><a id="section_ykg_53s_xlb"></a>Breadth-First Search</a></h3>
<p>Given a graph and a source vertex, the breadth-first search (BFS) algorithm finds all nodes reachable from the source vertex by searching / traversing the graph in a breadth-first manner.</p>
<p>The function is:</p>
<pre><code>graph_bfs( vertex_table,
          vertex_id,           
          edge_table,           
          edge_args,           
          source_vertex,           
          out_table,           
          max_distance,           
          directed,
          grouping_cols
          )
</code></pre>
<p>For details on the parameters, with examples, see the <a href="http://madlib.apache.org/docs/latest/group__grp__bfs.html">Breadth-First Search</a> in the Apache MADlib documentation.</p>
<h3 id="hyperlink-induced-topic-search-hits"><a class="header" href="#hyperlink-induced-topic-search-hits"><a id="section_evh_t3s_xlb"></a>Hyperlink-Induced Topic Search (HITS)</a></h3>
<p>The all pairs shortest paths (APSP) algorithm finds the length (summed weights) of the shortest paths between all pairs of vertices, such that the sum of the weights of the path edges is minimized.</p>
<p>The function is:</p>
<pre><code>graph_apsp( vertex_table,
           vertex_id,
           edge_table,            
           edge_args,            
           out_table,            
           grouping_cols          
           )
</code></pre>
<p>For details on the parameters, with examples, see the <a href="http://madlib.apache.org/docs/latest/group__grp__hits.html">Hyperlink-Induced Topic Search</a> in the Apache MADlib documentation.</p>
<h3 id="pagerank-and-personalized-pagerank"><a class="header" href="#pagerank-and-personalized-pagerank"><a id="section_e3f_s3s_xlb"></a>PageRank and Personalized PageRank</a></h3>
<p>Given a graph, the PageRank algorithm outputs a probability distribution representing a person’s likelihood to arrive at any particular vertex while randomly traversing the graph.</p>
<p>MADlib graph also includes a personalized PageRank, where a notion of importance provides personalization to a query. For example, importance scores can be biased according to a specified set of graph vertices that are of interest or special in some way.</p>
<p>The function is:</p>
<pre><code>pagerank( vertex_table,
          vertex_id,          
          edge_table,          
          edge_args,          
          out_table,          
          damping_factor,          
          max_iter,          
          threshold,          
          grouping_cols,          
          personalization_vertices         
          )
</code></pre>
<p>For details on the parameters, with examples, see the <a href="http://madlib.apache.org/docs/latest/group__grp__pagerank.html">PageRank</a> in the Apache MADlib documentation.</p>
<h3 id="single-source-shortest-path-sssp"><a class="header" href="#single-source-shortest-path-sssp"><a id="section_rxc_r3s_xlb"></a>Single Source Shortest Path (SSSP)</a></h3>
<p>Given a graph and a source vertex, the single source shortest path (SSSP) algorithm finds a path from the source vertex to every other vertex in the graph, such that the sum of the weights of the path edges is minimized.</p>
<p>The function is:</p>
<pre><code>graph_sssp ( vertex_table, 
vertex_id, 
edge_table, 
edge_args, 
source_vertex, 
out_table, 
grouping_cols 
)
</code></pre>
<p>For details on the parameters, with examples, see the <a href="http://madlib.apache.org/docs/latest/group__grp__sssp.html">Single Source Shortest Path</a> in the Apache MADlib documentation.</p>
<h3 id="weakly-connected-components"><a class="header" href="#weakly-connected-components"><a id="section_zmd_q3s_xlb"></a>Weakly Connected Components</a></h3>
<p>Given a directed graph, a weakly connected component (WCC) is a subgraph of the original graph where all vertices are connected to each other by some path, ignoring the direction of edges.</p>
<p>The function is:</p>
<pre><code>weakly_connected_components( 
vertex_table, 
vertex_id, 
edge_table, 
edge_args, 
out_table, 
grouping_cols 
)
</code></pre>
<p>For details on the parameters, with examples, see the <a href="http://madlib.apache.org/docs/latest/group__grp__wcc.html">Weakly Connected Components</a> in the Apache MADlib documentation.</p>
<h3 id="measures"><a class="header" href="#measures"><a id="section_wcn_w3s_xlb"></a><em>Measures</em></a></h3>
<p>These algorithms relate to metrics computed on a graph and include: <a href="#section_k4q_x3s_xlb">Average Path Length</a>, <a href="#section_a2q_y3s_xlb">Closeness Centrality</a> , <a href="#section_pft_k4s_xlb">Graph Diameter</a>, and <a href="#section_srk_j4s_xlb">In-Out Degree</a>.</p>
<h3 id="average-path-length"><a class="header" href="#average-path-length"><a id="section_k4q_x3s_xlb"></a>Average Path Length</a></h3>
<p>This function computes the shortest path average between pairs of vertices. Average path length is based on “reachable target vertices”, so it averages the path lengths in each connected component and ignores infinite-length paths between unconnected vertices. If the user requires the average path length of a particular component, the weakly connected components function may be used to isolate the relevant vertices.</p>
<p>The function is:</p>
<pre><code>graph_avg_path_length( apsp_table,
                       output_table 
                       )
</code></pre>
<p>This function uses a previously run APSP (All Pairs Shortest Path) output. For details on the parameters, with examples, see the <a href="http://madlib.apache.org/docs/latest/group__grp__graph__avg__path__length.html">Average Path Length</a> in the Apache MADlib documentation.</p>
<h3 id="closeness-centrality"><a class="header" href="#closeness-centrality"><a id="section_a2q_y3s_xlb"></a>Closeness Centrality</a></h3>
<p>The closeness centrality algorithm helps quantify how much information passes through a given vertex. The function returns various closeness centrality measures and the k-degree for a given subset of vertices.</p>
<p>The function is:</p>
<pre><code>graph_closeness( apsp_table,
output_table, 
vertex_filter_expr 
)
</code></pre>
<p>This function uses a previously run APSP (All Pairs Shortest Path) output. For details on the parameters, with examples, see the <a href="http://madlib.apache.org/docs/latest/group__grp__graph__closeness.html">Closeness</a> in the Apache MADlib documentation.</p>
<h3 id="graph-diameter"><a class="header" href="#graph-diameter"><a id="section_pft_k4s_xlb"></a>Graph Diameter</a></h3>
<p>Graph diameter is defined as the longest of all shortest paths in a graph. The function is:</p>
<pre><code>graph_diameter( apsp_table, 
output_table 
)
</code></pre>
<p>This function uses a previously run APSP (All Pairs Shortest Path) output. For details on the parameters, with examples, see the <a href="http://madlib.apache.org/docs/latest/group__grp__graph__diameter.html">Graph Diameter</a> in the Apache MADlib documentation.</p>
<h3 id="in-out-degree"><a class="header" href="#in-out-degree"><a id="section_srk_j4s_xlb"></a>In-Out Degree</a></h3>
<p>This function computes the degree of each node. The node degree is the number of edges adjacent to that node. The node in-degree is the number of edges pointing in to the node and node out-degree is the number of edges pointing out of the node.</p>
<p>The function is:</p>
<pre><code>graph_vertex_degrees( vertex_table,
vertex_id,    
edge_table,
edge_args,    
out_table,
grouping_cols
)
</code></pre>
<p>For details on the parameters, with examples, see the <a href="http://madlib.apache.org/docs/latest/group__grp__graph__vertex__degrees.html">In-out Degree</a> page in the Apache MADlib documentation.</p>
<h2 id="references"><a class="header" href="#references"><a id="topic_graph_references"></a>References</a></h2>
<p>MADlib on SynxDB is at <a href="madlib.html">Machine Learning and Deep Learning using MADlib</a>.</p>
<p>MADlib Apache web site and MADlib release notes are at <a href="http://madlib.apache.org/">http://madlib.apache.org/</a>.</p>
<p>MADlib user documentation is at <a href="http://madlib.apache.org/documentation.html">http://madlib.apache.org/documentation.html</a>.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../analytics/madlib.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../analytics/postGIS.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../analytics/madlib.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../analytics/postGIS.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
