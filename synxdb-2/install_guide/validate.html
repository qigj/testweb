<!DOCTYPE HTML>
<html lang="en" class="ayu sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Validating Your Systems - SynxDB 2 Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "ayu";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">SynxDB 2 Documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <a href="https://www.synxdata.com/"><img id="fa fa-print" src="../SYNX-Text-and-Circular-Logo-142x28-White-text-Black-background.png" alt="Synx Data Labs Logo"/></a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="validating-your-systems"><a class="header" href="#validating-your-systems">Validating Your Systems</a></h1>
<p>Validate your hardware and network performance.</p>
<p>SynxDB provides a management utility called <a href="../utility_guide/ref/gpcheckperf.html">gpcheckperf</a>, which can be used to identify hardware and system-level issues on the machines in your SynxDB array. <a href="../utility_guide/ref/gpcheckperf.html">gpcheckperf</a> starts a session on the specified hosts and runs the following performance tests:</p>
<ul>
<li>Network Performance (<code>gpnetbench*</code>)</li>
<li>Disk I/O Performance (<code>dd</code> test)</li>
<li>Memory Bandwidth (<code>stream</code> test)</li>
</ul>
<p>Before using <code>gpcheckperf</code>, you must have a trusted host setup between the hosts involved in the performance test. You can use the utility <a href="../utility_guide/ref/gpssh-exkeys.html">gpssh-exkeys</a> to update the known host files and exchange public keys between hosts if you have not done so already. Note that <code>gpcheckperf</code> calls to <a href="../utility_guide/ref/gpssh.html">gpssh</a> and <a href="../utility_guide/ref/gpscp.html">gpscp</a>, so these SynxDB utilities must be in your <code>$PATH</code>.</p>
<ul>
<li>
<p><strong><a href="validate.html">Validating Network Performance</a></strong></p>
</li>
<li>
<p><strong><a href="validate.html">Validating Disk I/O and Memory Bandwidth</a></strong></p>
</li>
</ul>
<h2 id="validating-network-performance"><a class="header" href="#validating-network-performance"><a id="topic4"></a>Validating Network Performance</a></h2>
<p>To test network performance, run <a href="../utility_guide/ref/gpcheckperf.html">gpcheckperf</a> with one of the network test run options: parallel pair test (<code>-r N</code>), serial pair test (<code>-r n</code>), or full matrix test (<code>-r M</code>). The utility runs a network benchmark program that transfers a 5 second stream of data from the current host to each remote host included in the test. By default, the data is transferred in parallel to each remote host and the minimum, maximum, average and median network transfer rates are reported in megabytes (MB) per second. If the summary transfer rate is slower than expected (less than 100 MB/s), you can run the network test serially using the <code>-r n</code> option to obtain per-host results. To run a full-matrix bandwidth test, you can specify <code>-r M</code> which will cause every host to send and receive data from every other host specified. This test is best used to validate if the switch fabric can tolerate a full-matrix workload.</p>
<p>Most systems in a SynxDB array are configured with multiple network interface cards (NICs), each NIC on its own subnet. When testing network performance, it is important to test each subnet individually. For example, considering the following network configuration of two NICs per host:</p>
<div class="table-wrapper"><table><thead><tr><th>SynxDB Host</th><th>Subnet1 NICs</th><th>Subnet2 NICs</th></tr></thead><tbody>
<tr><td>Segment 1</td><td>sdw1-1</td><td>sdw1-2</td></tr>
<tr><td>Segment 2</td><td>sdw2-1</td><td>sdw2-2</td></tr>
<tr><td>Segment 3</td><td>sdw3-1</td><td>sdw3-2</td></tr>
</tbody></table>
</div>
<p>You would create four distinct host files for use with the <a href="../utility_guide/ref/gpcheckperf.html">gpcheckperf</a> network test:</p>
<div class="table-wrapper"><table><thead><tr><th>hostfile_gpchecknet_ic1</th><th>hostfile_gpchecknet_ic2</th></tr></thead><tbody>
<tr><td>sdw1-1</td><td>sdw1-2</td></tr>
<tr><td>sdw2-1</td><td>sdw2-2</td></tr>
<tr><td>sdw3-1</td><td>sdw3-2</td></tr>
</tbody></table>
</div>
<p>You would then run <a href="../utility_guide/ref/gpcheckperf.html">gpcheckperf</a> once per subnet. For example (if testing an <em>even</em> number of hosts, run in parallel pairs test mode):</p>
<pre><code>$ gpcheckperf -f hostfile_gpchecknet_ic1 -r N -d /tmp &gt; subnet1.out
$ gpcheckperf -f hostfile_gpchecknet_ic2 -r N -d /tmp &gt; subnet2.out
</code></pre>
<p>If you have an <em>odd</em> number of hosts to test, you can run in serial test mode (<code>-r n</code>).</p>
<h2 id="validating-disk-io-and-memory-bandwidth"><a class="header" href="#validating-disk-io-and-memory-bandwidth"><a id="topic5"></a>Validating Disk I/O and Memory Bandwidth</a></h2>
<p>To test disk and memory bandwidth performance, run <a href="../utility_guide/ref/gpcheckperf.html">gpcheckperf</a> with the disk and stream test run options (<code>-r ds</code>). The disk test uses the <code>dd</code> command (a standard UNIX utility) to test the sequential throughput performance of a logical disk or file system. The memory test uses the STREAM benchmark program to measure sustainable memory bandwidth. Results are reported in MB per second (MB/s).</p>
<h3 id="to-run-the-disk-and-stream-tests"><a class="header" href="#to-run-the-disk-and-stream-tests"><a id="jj161569"></a>To run the disk and stream tests</a></h3>
<ol>
<li>
<p>Log in on the master host as the <code>gpadmin</code> user.</p>
</li>
<li>
<p>Source the <code>synxdb_path.sh</code> path file from your SynxDB installation. For example:</p>
<pre><code>$ source /usr/local/synxdb/synxdb_path.sh
</code></pre>
</li>
<li>
<p>Create a host file named <code>hostfile_gpcheckperf</code> that has one host name per segment host. Do not include the master host. For example:</p>
<pre><code>sdw1
sdw2
sdw3
sdw4
</code></pre>
</li>
<li>
<p>Run the <code>gpcheckperf</code> utility using the <code>hostfile_gpcheckperf</code> file you just created. Use the <code>-d</code> option to specify the file systems you want to test on each host (you must have write access to these directories). You will want to test all primary and mirror segment data directory locations. For example:</p>
<pre><code>$ gpcheckperf -f hostfile_gpcheckperf -r ds -D \
  -d /data1/primary -d  /data2/primary \
  -d /data1/mirror -d  /data2/mirror
</code></pre>
</li>
<li>
<p>The utility may take a while to perform the tests as it is copying very large files between the hosts. When it is finished you will see the summary results for the Disk Write, Disk Read, and Stream tests.</p>
</li>
</ol>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../install_guide/create_data_dirs.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../install_guide/init_gpdb.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../install_guide/create_data_dirs.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../install_guide/init_gpdb.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
