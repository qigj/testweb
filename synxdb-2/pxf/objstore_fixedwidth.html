<!DOCTYPE HTML>
<html lang="en" class="ayu sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Reading and Writing Fixed-Width Text Data - SynxDB 2 Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "ayu";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">SynxDB 2 Documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <a href="https://www.synxdata.com/"><img id="fa fa-print" src="../SYNX-Text-and-Circular-Logo-142x28-White-text-Black-background.png" alt="Synx Data Labs Logo"/></a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="reading-and-writing-fixed-width-text-data-in-an-object-store"><a class="header" href="#reading-and-writing-fixed-width-text-data-in-an-object-store">Reading and Writing Fixed-Width Text Data in an Object Store</a></h1>
<p>The PXF object store connectors support reading and writing fixed-width text using the SynxDB <a href="../admin_guide/load/topics/g-importing-and-exporting-fixed-width-data.html">fixed width custom formatter</a>. This section describes how to use PXF to access fixed-width text, including how to create, query, and insert data into an external table that references files in the object store.</p>
<p><strong>Note</strong>: Accessing fixed-width text data from an object store is very similar to accessing such data in HDFS.</p>
<h2 id="prerequisites"><a class="header" href="#prerequisites"><a id="prereq"></a>Prerequisites</a></h2>
<p>Ensure that you have met the PXF Object Store <a href="access_objstore.html#objstore_prereq">Prerequisites</a> before you attempt to read data from or write data to an object store.</p>
<h2 id="reading-text-data-with-fixed-widths"><a class="header" href="#reading-text-data-with-fixed-widths"><a id="profile_fixedwidth"></a>Reading Text Data with Fixed Widths</a></h2>
<p>Use the <code>&lt;objstore&gt;:fixedwidth</code> profile when you read fixed-width text from an object store where each line is a single record.  PXF supports the following <code>&lt;objstore&gt;</code> profile prefixes:</p>
<div class="table-wrapper"><table><thead><tr><th>Object Store</th><th>Profile Prefix</th></tr></thead><tbody>
<tr><td>Azure Blob Storage</td><td>wasbs</td></tr>
<tr><td>Azure Data Lake Storage Gen2</td><td>abfss</td></tr>
<tr><td>Google Cloud Storage</td><td>gs</td></tr>
<tr><td>MinIO</td><td>s3</td></tr>
<tr><td>AWS S3</td><td>s3</td></tr>
</tbody></table>
</div>
<p>The following syntax creates a SynxDB readable external table that references such a text file in an object store:Â </p>
<pre><code class="language-sql">CREATE EXTERNAL TABLE &lt;table_name&gt; 
    ( &lt;column_name&gt; &lt;data_type&gt; [, ...] | LIKE &lt;other_table&gt; )
LOCATION ('pxf://&lt;path-to-file&gt;?PROFILE=&lt;objstore&gt;:fixedwidth[&amp;SERVER=&lt;server_name&gt;][&amp;NEWLINE=&lt;bytecode&gt;][&amp;IGNORE_MISSING_PATH=&lt;boolean&gt;]')
FORMAT 'CUSTOM' (FORMATTER='fixedwidth_in', &lt;field_name&gt;='&lt;width&gt;' [, ...] [, line_delim[=|&lt;space&gt;][E]'&lt;delim_value&gt;']);
</code></pre>
<p>The specific keywords and values used in the SynxDB <a href="../ref_guide/sql_commands/CREATE_EXTERNAL_TABLE.html">CREATE EXTERNAL TABLE</a> command are described in the table below.</p>
<div class="table-wrapper"><table><thead><tr><th>Keyword</th><th>Value</th></tr></thead><tbody>
<tr><td>&lt;pathâtoâfile&gt;</td><td>The path to the directory or file in the object store. When the <code>&lt;server_name&gt;</code> configuration includes a <a href="cfg_server.html#pxf-fs-basepath"><code>pxf.fs.basePath</code></a> property setting, PXF considers &lt;pathâtoâfile&gt; to be relative to the base path specified. Otherwise, PXF considers it to be an absolute path. &lt;pathâtoâfile&gt; must not specify a relative path nor include the dollar sign (<code>$</code>) character.</td></tr>
<tr><td>PROFILE=&lt;objstore&gt;:fixedwidth</td><td>The <code>PROFILE</code> must identify the specific object store. For example, <code>s3:fixedwidth</code>.</td></tr>
<tr><td>SERVER=&lt;server_name&gt;</td><td>The named server configuration that PXF uses to access the data. PXF uses the <code>default</code> server if not specified.</td></tr>
<tr><td>NEWLINE=&lt;bytecode&gt;</td><td>When the <code>line_delim</code> formatter option contains <code>\r</code>, <code>\r\n</code>, or a set of custom escape characters, you must set <code>&lt;bytecode&gt;</code> to <code>CR</code>, <code>CRLF</code>, or the set of bytecode characters, respectively.</td></tr>
<tr><td>IGNORE_MISSING_PATH=&lt;boolean&gt;</td><td>Specify the action to take when &lt;path-to-file&gt; is missing or invalid. The default value is <code>false</code>, PXF returns an error in this situation. When the value is <code>true</code>, PXF ignores missing path errors and returns an empty fragment.</td></tr>
<tr><td>FORMAT âCUSTOMâ</td><td>Use <code>FORMAT</code> â<code>CUSTOM</code>â with <code>FORMATTER='fixedwidth_in'</code> (read).</td></tr>
<tr><td>&lt;field_name&gt;=â&lt;width&gt;â</td><td>The name and the width of the field. For example: <code>first_name='15'</code> specifies that the <code>first_name</code> field is <code>15</code> characters long. By default, when the field value is less than <code>&lt;width&gt;</code> size, SynxDB expects the field to be right-padded with spaces to that size.</td></tr>
<tr><td>line_delim</td><td>The line delimiter character in the data. Preface the &lt;delim_value&gt; with an <code>E</code> when the value is an escape sequence. Examples: <code>line_delim=E'\n'</code>, <code>line_delim 'aaa'</code>. The default value is <code>'\n'</code>.</td></tr>
</tbody></table>
</div>
<p><strong>Note</strong>: PXF does not support the <code>(HEADER)</code> formatter option in the <code>CREATE EXTERNAL TABLE</code> command.</p>
<p>If you are accessing an S3 object store, you can provide S3 credentials via custom options in the <code>CREATE EXTERNAL TABLE</code> command as described in <a href="access_s3.html#s3_override">Overriding the S3 Server Configuration with DDL</a>.</p>
<h2 id="about-specifying-field_name-and-width"><a class="header" href="#about-specifying-field_name-and-width"><a id="about_fields"></a>About Specifying field_name and width</a></h2>
<p>SynxDB loads all fields in a line of fixed-width data in their physical order. The <code>&lt;field_name&gt;</code>s that you specify in the <code>FORMAT</code> options must match the order that you define the columns in the <code>CREATE [WRITABLE] EXTERNAL TABLE</code> command. You specify the size of each field in the <code>&lt;width&gt;</code> value.</p>
<p>Refer to the SynxDB <a href="../admin_guide/load/topics/g-importing-and-exporting-fixed-width-data.html">fixed width custom formatter documentation</a> for more information about the formatter options.</p>
<h2 id="about-the-line_delim-and-newline-formatter-options"><a class="header" href="#about-the-line_delim-and-newline-formatter-options"><a id="about_lineend"></a>About the line_delim and NEWLINE Formatter Options</a></h2>
<p>By default, SynxDB uses the <code>\n</code> (LF) character for the new line delimiter. When the line delimiter for the external file is also <code>\n</code>, you need not specify the <code>line_delim</code> option. If the <code>line_delim</code> formatter option is provided and contains <code>\r</code> (CR), <code>\r\n</code> (CRLF), or a set of custom escape characters, you must specify the <code>NEWLINE</code> option in the external table <code>LOCATION</code> clause, and set the value to <code>CR</code>, <code>CRLF</code>, or the set of bytecode characters, respectively.</p>
<p>Refer to the SynxDB <a href="../admin_guide/load/topics/g-importing-and-exporting-fixed-width-data.html">fixed width custom formatter documentation</a> for more information about the formatter options.</p>
<h2 id="example-reading-fixed-width-text-data-on-s3"><a class="header" href="#example-reading-fixed-width-text-data-on-s3"><a id="fixedwidth_read_example"></a>Example: Reading Fixed-Width Text Data on S3</a></h2>
<p>Perform the following procedure to create a sample text file, copy the file to S3, and use the <code>s3:fixedwidth</code> profile to create a PXF external table to query the data.</p>
<p>To run this example, you must:</p>
<ul>
<li>Have the AWS CLI tools installed on your system</li>
<li>Know your AWS access ID and secret key</li>
<li>Have write permission to an S3 bucket</li>
</ul>
<p>Procedure:</p>
<ol>
<li>
<p>Create a directory in S3 for PXF example data files. For example, if you have write access to an S3 bucket named <code>BUCKET</code>:</p>
<pre><code class="language-shell">$ aws s3 mb s3://BUCKET/pxf_examples
</code></pre>
</li>
<li>
<p>Locally create a plain text data file named <code>pxf_s3_fixedwidth.txt</code>:</p>
<pre><code class="language-shell">$ echo 'Prague         Jan 101   4875.33   
Rome           Mar 87    1557.39   
Bangalore      May 317   8936.99   
Beijing        Jul 411   11600.67  ' &gt; /tmp/pxf_s3_fixedwidth.txt
</code></pre>
<p>In this sample file, the first field is 15 characters long, the second is 4 characters, the third is 6 characters, and the last field is 10 characters long.</p>
<blockquote>
<p><strong>Note</strong> Open the <code>/tmp/pxf_s3_fixedwidth.txt</code> file in the editor of your choice, and ensure that the last field is right-padded with spaces to 10 characters in size.</p>
</blockquote>
</li>
<li>
<p>Copy the data file to the S3 directory that you created in Step 1:</p>
<pre><code class="language-shell">$ aws s3 cp /tmp/pxf_s3_fixedwidth.txt s3://BUCKET/pxf_examples/
</code></pre>
</li>
<li>
<p>Verify that the file now resides in S3:</p>
<pre><code class="language-shell">$ aws s3 ls s3://BUCKET/pxf_examples/pxf_s3s_fixedwidth.txt
</code></pre>
</li>
<li>
<p>Start the <code>psql</code> subsystem:</p>
<pre><code class="language-shell">$ psql -d postgres
</code></pre>
</li>
<li>
<p>Use the PXF <code>s3:fixedwidth</code> profile to create a SynxDB external table that references the <code>pxf_s3_fixedwidth.txt</code> file that you just created and added to S3. For example, if your server name is <code>s3srvcfg</code>:</p>
<pre><code class="language-sql">postgres=# CREATE EXTERNAL TABLE pxf_s3_fixedwidth_r(location text, month text, num_orders int, total_sales float8)
             LOCATION ('pxf://data/pxf_examples/pxf_s3_fixedwidth.txt?PROFILE=s3:fixedwidth&amp;SERVER=s3srvcfg&amp;NEWLINE=CRLF')
           FORMAT 'CUSTOM' (formatter='fixedwidth_in', location='15', month='4', num_orders='6', total_sales='10', line_delim=E'\r\n');
</code></pre>
</li>
<li>
<p>Query the external table:</p>
<pre><code class="language-sql">postgres=# SELECT * FROM pxf_s3_fixedwidth_r;
</code></pre>
<pre><code class="language-pre">   location    | month | num_orders | total_sales 
---------------+-------+------------+-------------
 Prague        | Jan   |        101 |     4875.33
 Rome          | Mar   |         87 |     1557.39
 Bangalore     | May   |        317 |     8936.99
 Beijing       | Jul   |        411 |    11600.67
(4 rows)
</code></pre>
</li>
</ol>
<h2 id="writing-fixed-width-text-data"><a class="header" href="#writing-fixed-width-text-data"><a id="s3write_text"></a>Writing Fixed-Width Text Data</a></h2>
<p>The <code>&lt;objstore&gt;:fixedwidth</code> profiles support writing fixed-width text to an object store. When you create a writable external table with PXF, you specify the name of a directory. When you insert records into a writable external table, the block(s) of data that you insert are written to one or more files in the directory that you specified.</p>
<p><strong>Note</strong>: External tables that you create with a writable profile can only be used for <code>INSERT</code> operations. If you want to query the data that you inserted, you must create a separate readable external table that references the directory.</p>
<p>Use the following syntax to create a SynxDB writable external table that references an object store directory:Â </p>
<pre><code class="language-sql">CREATE WRITABLE EXTERNAL TABLE &lt;table_name&gt; 
    ( &lt;column_name&gt; &lt;data_type&gt; [, ...] | LIKE &lt;other_table&gt; )
LOCATION ('pxf://&lt;path-to-dir&gt;
    ?PROFILE=&lt;objstore&gt;:fixedwidth[&amp;SERVER=&lt;server_name&gt;][&amp;NEWLINE=&lt;bytecode&gt;][&amp;&lt;write-option&gt;=&lt;value&gt;[...]]')
FORMAT 'CUSTOM' (FORMATTER='fixedwidth_out' [, &lt;field_name&gt;='&lt;width&gt;'] [, ...] [, line_delim[=|&lt;space&gt;][E]'&lt;delim_value&gt;']);
[DISTRIBUTED BY (&lt;column_name&gt; [, ... ] ) | DISTRIBUTED RANDOMLY];
</code></pre>
<p>The specific keywords and values used in the <a href="../ref_guide/sql_commands/CREATE_EXTERNAL_TABLE.html">CREATE EXTERNAL TABLE</a> command are described in the table below.</p>
<div class="table-wrapper"><table><thead><tr><th>Keyword</th><th>Value</th></tr></thead><tbody>
<tr><td>&lt;pathâtoâdir&gt;</td><td>The path to the directory in the data store. When the <code>&lt;server_name&gt;</code> configuration includes a <a href="cfg_server.html#pxf-fs-basepath"><code>pxf.fs.basePath</code></a> property setting, PXF considers &lt;pathâtoâdir&gt; to be relative to the base path specified. Otherwise, PXF considers it to be an absolute path. &lt;pathâtoâdir&gt; must not specify a relative path nor include the dollar sign (<code>$</code>) character.</td></tr>
<tr><td>PROFILE=&lt;objstore&gt;:fixedwidth</td><td>The <code>PROFILE</code> must identify the specific object store. For example, <code>s3:fixedwidth</code>.</td></tr>
<tr><td>SERVER=&lt;server_name&gt;</td><td>The named server configuration that PXF uses to access the data. PXF uses the <code>default</code> server if not specified.</td></tr>
<tr><td>NEWLINE=&lt;bytecode&gt;</td><td>When the <code>line_delim</code> formatter option contains <code>\r</code>, <code>\r\n</code>, or a set of custom escape characters, you must set <code>&lt;bytecode&gt;</code> to <code>CR</code>, <code>CRLF</code>, or the set of bytecode characters, respectively.</td></tr>
<tr><td>&lt;writeâoption&gt;=&lt;value&gt;</td><td>&lt;write-option&gt;s are described below.</td></tr>
<tr><td>FORMAT âCUSTOMâ</td><td>Use <code>FORMAT</code> â<code>CUSTOM</code>â with <code>FORMATTER='fixedwidth_out'</code> (write).</td></tr>
<tr><td>&lt;field_name&gt;=â&lt;width&gt;â</td><td>The name and the width of the field. For example: <code>first_name='15'</code> specifies that the <code>first_name</code> field is <code>15</code> characters long. By default, when writing to the external file and the field value is less than <code>&lt;width&gt;</code> size, SynxDB right-pads the field with spaces to <code>&lt;width&gt;</code> size.</td></tr>
<tr><td>line_delim</td><td>The line delimiter character in the data. Preface the &lt;delim_value&gt; with an <code>E</code> when the value is an escape sequence. Examples: <code>line_delim=E'\n'</code>, <code>line_delim 'aaa'</code>. The default value is <code>'\n'</code>.</td></tr>
<tr><td>DISTRIBUTED BY</td><td>If you want to load data from an existing SynxDB table into the writable external table, consider specifying the same distribution policy or <code>&lt;column_name&gt;</code> on both tables. Doing so will avoid extra motion of data between segments on the load operation.</td></tr>
</tbody></table>
</div>
<p>Writable external tables that you create using the <code>&lt;objstore&gt;:fixedwidth</code> profile can optionally use record or block compression. You specify the compression codec via an option in the <code>CREATE WRITABLE EXTERNAL TABLE</code> <code>LOCATION</code> clause:</p>
<div class="table-wrapper"><table><thead><tr><th>Write Option</th><th>Value Description</th></tr></thead><tbody>
<tr><td>COMPRESSION_CODEC</td><td>The compression codec alias. Supported compression codecs for writing fixed-width text data include: <code>default</code>, <code>bzip2</code>, <code>gzip</code>, and <code>uncompressed</code>. If this option is not provided, SynxDB performs no data compression.</td></tr>
</tbody></table>
</div>
<h2 id="example-writing-fixed-width-text-data-to-s3"><a class="header" href="#example-writing-fixed-width-text-data-to-s3"><a id="fixedwidth_write_example"></a>Example: Writing Fixed-Width Text Data to S3</a></h2>
<p>This example utilizes the data schema introduced in <a href="#fixedwidth_read_example">Example: Reading Fixed-Width Text Data on S3</a>.</p>
<p>| Column Name  | Width | Data Type |
|âââ|âââââââââââââ|
| location | 15 | text |
| month | 4 | text |
| number_of_orders | 6 | int |
| total_sales | 10 | float8 |</p>
<h4 id="procedure"><a class="header" href="#procedure"><a id="fixedwidth_write_proc" class="no-quick-link"></a>Procedure</a></h4>
<p>Perform the following procedure to create a SynxDB writable external table utilizing the same data schema as described above. You will use the PXF <code>s3:fixedwidth</code> profile to write data to S3. You will also create a separate, readable external table to read the data that you wrote to #3.</p>
<ol>
<li>
<p>Create a SynxDB writable external table utilizing the data schema described above. Write to the S3 directory <code>BUCKET/pxf_examples/fixedwidth_write</code>. Create the table specifying <code>\n</code> as the line delimiter. For example, if your server name is <code>s3srvcfg</code>:</p>
<pre><code class="language-sql">postgres=# CREATE WRITABLE EXTERNAL TABLE pxf_s3_fixedwidth_w(location text, month text, num_orders int, total_sales float8)
             LOCATION ('pxf://BUCKET/pxf_examples/fixedwidth_write?PROFILE=s3:fixedwidth&amp;SERVER=s3srvcfg')
           FORMAT 'CUSTOM' (formatter='fixedwidth_out', location='15', month='4', num_orders='6', total_sales='10');
</code></pre>
</li>
<li>
<p>Write a few individual records to the <code>fixedwidth_write</code> S3 directory by using the <code>INSERT</code> command on the <code>pxf_s3_fixedwidth_w</code> table:</p>
<pre><code class="language-sql">postgres=# INSERT INTO pxf_s3_fixedwidth_w VALUES ( 'Frankfurt', 'Mar', 777, 3956.98 );
postgres=# INSERT INTO pxf_s3_fixedwidth_w VALUES ( 'Cleveland', 'Oct', 3812, 96645.37 );
</code></pre>
</li>
<li>
<p>SynxDB does not support directly querying a writable external table. To query the data that you just added to S3, you must create a readable external SynxDB table that references the S3 directory:</p>
<pre><code class="language-sql">postgres=# CREATE EXTERNAL TABLE pxf_s3_fixedwidth_r2(location text, month text, num_orders int, total_sales float8)
             LOCATION ('pxf://BUCKET/pxf_examples/fixedwidth_write?PROFILE=s3:fixedwidth&amp;SERVER=s3srvcfg')
           FORMAT 'CUSTOM' (formatter='fixedwidth_in', location='15', month='4', num_orders='6', total_sales='10');
</code></pre>
</li>
<li>
<p>Query the readable external table:</p>
<pre><code class="language-sql">postgres=# SELECT * FROM pxf_s3_fixedwidth_r2 ORDER BY total_sales;
</code></pre>
<pre><code class="language-pre"> location  | month | num_orders | total_sales 
-----------+-------+------------+-------------
 Frankfurt | Mar   |        777 |     3956.98
 Cleveland | Oct   |       3812 |    96645.37
(2 rows)
</code></pre>
</li>
</ol>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../pxf/objstore_text.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../pxf/objstore_avro.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../pxf/objstore_text.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../pxf/objstore_avro.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
