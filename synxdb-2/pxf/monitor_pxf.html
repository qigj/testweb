<!DOCTYPE HTML>
<html lang="en" class="ayu sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Monitoring - SynxDB 2 Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "ayu";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">SynxDB 2 Documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <a href="https://www.synxdata.com/"><img id="fa fa-print" src="../SYNX-Text-and-Circular-Logo-142x28-White-text-Black-background.png" alt="Synx Data Labs Logo"/></a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="monitoring-pxf"><a class="header" href="#monitoring-pxf">Monitoring PXF</a></h1>
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<p>You can monitor the status of PXF from the command line.</p>
<p>PXF also provides additional information about the runtime status of the PXF Service by exposing HTTP endpoints that you can use to query the health, build information, and various metrics of the running process.</p>
<h2 id="viewing-pxf-status-on-the-command-line"><a class="header" href="#viewing-pxf-status-on-the-command-line"><a id="status"></a> Viewing PXF Status on the Command Line</a></h2>
<p>The <code>pxf cluster status</code> command displays the status of the PXF Service instance on all hosts in your SynxDB cluster. <code>pxf status</code> displays the status of the PXF Service instance on the local SynxDB host.</p>
<p>Only the <code>gpadmin</code> user can request the status of the PXF Service.</p>
<p>Perform the following procedure to request the PXF status of your SynxDB cluster.</p>
<ol>
<li>
<p>Log in to the SynxDB coordinator host:</p>
<pre><code class="language-shell">$ ssh gpadmin@&lt;coordinator&gt;
</code></pre>
</li>
<li>
<p>Run the <code>pxf cluster status</code> command:</p>
<pre><code class="language-shell">gpadmin@coordinator$ pxf cluster status
</code></pre>
</li>
</ol>
<h2 id="about-pxf-service-runtime-monitoring"><a class="header" href="#about-pxf-service-runtime-monitoring"><a id="about_rtm"></a> About PXF Service Runtime Monitoring</a></h2>
<p>PXF exposes the following HTTP endpoints that you can use to monitor a running PXF Service on the local host:</p>
<ul>
<li><code>actuator/health</code> - Returns the status of the PXF Service.</li>
<li><code>actuator/info</code> - Returns build information for the PXF Service.</li>
<li><code>actuator/metrics</code> - Returns JVM, extended Tomcat, system, process, Log4j2, and PXF-specific metrics for the PXF Service.</li>
<li><code>actuator/prometheus</code> - Returns all metrics in a format that can be scraped by a Prometheus server.</li>
</ul>
<p>Any user can access the HTTP endpoints and view the monitoring information that PXF returns.</p>
<p>You can view the data associated with a specific endpoint by viewing in a browser, or <code>curl</code>-ing, a URL of the following format (default PXF deployment topology):</p>
<pre><code class="language-pre">http://localhost:5888/&lt;endpoint&gt;[/&lt;name&gt;]
</code></pre>
<p>If you chose the <a href="deployment_topos.html#alt_topo">alternate deployment topology</a> for PXF, the URL is:</p>
<pre><code class="language-pre">http://&lt;pxf_listen_address&gt;:&lt;port&gt;/&lt;endpoint&gt;[/&lt;name&gt;]
</code></pre>
<p>For example, to view the build information for the PXF service running on <code>localhost</code>, query the <code>actuator/info</code> endpoint:</p>
<pre><code class="language-pre">http://localhost:5888/actuator/info
</code></pre>
<p>Sample output:</p>
<pre><code class="language-pre">{"build":{"version":"6.0.0","artifact":"pxf-service","name":"pxf-service","pxfApiVersion":"16","group":"org.synxdb.pxf","time":"2021-03-29T22:26:22.780Z"}}
</code></pre>
<p>To view the status of the PXF Service running on the local SynxDB host, query the <code>actuator/health</code> endpoint:</p>
<pre><code class="language-pre">http://localhost:5888/actuator/health
</code></pre>
<p>Sample output:</p>
<pre><code class="language-pre">{"status":"UP","groups":["liveness","readiness"]}
</code></pre>
<h3 id="examining-pxf-metrics"><a class="header" href="#examining-pxf-metrics"><a id="examine_metrics"></a> Examining PXF Metrics</a></h3>
<p>PXF exposes JVM, extended Tomcat, and system metrics via its integration with Spring Boot. Refer to <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-features.html">Supported Metrics</a> in the Spring Boot documentation for more information about these metrics.</p>
<p>PXF also exposes metrics that are specific to its processing, including:</p>
<div class="table-wrapper"><table><thead><tr><th>Metric Name</th><th>Description</th></tr></thead><tbody>
<tr><td>pxf.fragments.sent</td><td>The number of fragments, and the total time that it took to send all fragments to SynxDB.</td></tr>
<tr><td>pxf.records.sent</td><td>The number of records that PXF sent to SynxDB.</td></tr>
<tr><td>pxf.records.received</td><td>The number of records that PXF received from SynxDB.</td></tr>
<tr><td>pxf.bytes.sent</td><td>The number of bytes that PXF sent to SynxDB.</td></tr>
<tr><td>pxf.bytes.received</td><td>The number of bytes that PXF received from SynxDB.</td></tr>
<tr><td>http.server.requests</td><td>Standard metric augmented with PXF tags.</td></tr>
</tbody></table>
</div>
<p>The information that PXF returns when you query a metric is the aggregate data collected since the last (re)start of the PXF Service.</p>
<p>To view a list of all of the metrics (names) available from the PXF Service, query just the <code>metrics</code> endpoint:</p>
<pre><code class="language-pre">http://localhost:5888/actuator/metrics
</code></pre>
<h3 id="filtering-metric-data"><a class="header" href="#filtering-metric-data"><a id="filter_metrics"></a> Filtering Metric Data</a></h3>
<p>PXF tags all metrics that it returns with an <code>application</code> label; the value of this tag is always <code>pxf-service</code>.</p>
<p>PXF tags its specific metrics with the additional labels: <code>user</code>, <code>segment</code>, <code>profile</code>, and <code>server</code>. All of these tags are present for each PXF metric.  PXF returns the tag value <code>unknown</code> when the value cannot be determined.</p>
<p>You can use the tags to filter the information returned for PXF-specific metrics. For example, to examine the <code>pxf.records.received</code> metric for the PXF server named <code>hadoop1</code> located on <code>segment</code> 1 on the local host:</p>
<pre><code class="language-pre">http://localhost:5888/actuator/metrics/pxf.records.received?tag=segment:1&amp;tag=server:hadoop1
</code></pre>
<p>Certain metrics, such as <code>pxf.fragments.sent</code>, include an additional tag named <code>outcome</code>; you can examine its value (<code>success</code> or <code>error</code>) to determine if all data for the fragment was sent. You can also use this tag to filter the aggregated data.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../pxf/reg_jar_depend.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../pxf/adv_admin_pxf.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../pxf/reg_jar_depend.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../pxf/adv_admin_pxf.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
