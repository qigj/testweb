<!DOCTYPE HTML>
<html lang="en" class="ayu sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Registering Library Dependencies - SynxDB 2 Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "ayu";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">SynxDB 2 Documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <a href="https://www.synxdata.com/"><img id="fa fa-print" src="../SYNX-Text-and-Circular-Logo-142x28-White-text-Black-background.png" alt="Synx Data Labs Logo"/></a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="registering-library-dependencies"><a class="header" href="#registering-library-dependencies">Registering Library Dependencies</a></h1>
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<p>You use PXF to access data stored on external systems. Depending upon the external data store, this access may require that you install and/or configure additional components or services for the external data store.</p>
<p>PXF depends on JAR files and other configuration information provided by these additional components. In most cases, PXF manages internal JAR dependencies as necessary based on the connectors that you use.</p>
<p>Should you need to register a JAR or native library dependency with PXF, you copy the library to a location known to PXF <em>or</em> you inform PXF of a custom location, and then you must synchronize and restart PXF.</p>
<h2 id="registering-a-jar-dependency"><a class="header" href="#registering-a-jar-dependency"><a id="reg_jar"></a> Registering a JAR Dependency</a></h2>
<p>PXF loads JAR dependencies from the following directories, in this order:</p>
<ol>
<li>
<p>The directories that you specify in the <code>$PXF_BASE/conf/pxf-env.sh</code> configuration file, <code>PXF_LOADER_PATH</code> environment variable. The <code>pxf-env.sh</code> file includes this commented-out block:</p>
<pre><code class="language-pre"># Additional locations to be class-loaded by PXF
# export PXF_LOADER_PATH=
</code></pre>
<p>You would uncomment the <code>PXF_LOADER_PATH</code> setting and specify one or more colon-separated directory names.</p>
</li>
<li>
<p>The default PXF JAR directory <code>$PXF_BASE/lib</code>.</p>
</li>
</ol>
<p>To add a JAR dependency for PXF, for example a MySQL driver JAR file, you must log in to the SynxDB coordinator host, copy the JAR file to the PXF user configuration runtime library directory (<code>$PXF_BASE/lib</code>), sync the PXF configuration to the SynxDB cluster, and then restart PXF on each host. For example:</p>
<pre><code class="language-shell">$ ssh gpadmin@&lt;coordinator&gt;
gpadmin@coordinator$ cp new_dependent_jar.jar $PXF_BASE/lib/
gpadmin@coordinator$ pxf cluster sync
gpadmin@coordinator$ pxf cluster restart
</code></pre>
<p>Alternatively, you could have identified the file system location of the JAR in the <code>pxf-env.sh</code> <code>PXF_LOADER_PATH</code> environment variable. If you choose this registration option, you must ensure that you copy the JAR file to the same location on the SynxDB standby coordinator host and segment hosts before you synchronize and restart PXF.</p>
<h2 id="registering-a-native-library-dependency"><a class="header" href="#registering-a-native-library-dependency"><a id="reg_native"></a> Registering a Native Library Dependency</a></h2>
<p>PXF loads native libraries from the following directories, in this order:</p>
<ol>
<li>
<p>The directories that you specify in the <code>$PXF_BASE/conf/pxf-env.sh</code> configuration file, <code>LD_LIBRARY_PATH</code> environment variable. The <code>pxf-env.sh</code> file includes this commented-out block:</p>
<pre><code class="language-pre"># Additional native libraries to be loaded by PXF
# export LD_LIBRARY_PATH=
</code></pre>
<p>You would uncomment the <code>LD_LIBRARY_PATH</code> setting and specify one or more colon-separated directory names.</p>
</li>
<li>
<p>The default PXF native library directory <code>$PXF_BASE/lib/native</code>.</p>
</li>
<li>
<p>The default Hadoop native library directory <code>/usr/lib/hadoop/lib/native</code>.</p>
</li>
</ol>
<p>As such, you have three file location options when you register a native library with PXF:</p>
<ul>
<li>Copy the library to the default PXF native library directory, <code>$PXF_BASE/lib/native</code>, on only the SynxDB coordinator host. When you next synchronize PXF, PXF copies the native library to all hosts in the SynxDB cluster.</li>
<li>Copy the library to the default Hadoop native library directory, <code>/usr/lib/hadoop/lib/native</code>, on the SynxDB coordinator host, standby coordinator host, and each segment host.</li>
<li>Copy the library to the same custom location on the SynxDB coordinator host, standby coordinator host, and each segment host, and uncomment and add the directory path to the <code>pxf-env.sh</code> <code>LD_LIBRARY_PATH</code> environment variable.</li>
</ul>
<h3 id="procedure"><a class="header" href="#procedure"><a id="reg_native_proc"></a> Procedure</a></h3>
<ol>
<li>
<p>Copy the native library file to one of the following:</p>
<ul>
<li>The <code>$PXF_BASE/lib/native</code> directory on the SynxDB coordinator host. (You may need to create this directory.)</li>
<li>The <code>/usr/lib/hadoop/lib/native</code> directory on all SynxDB hosts.</li>
<li>A user-defined location on all SynxDB hosts; note the file system location of the native library.</li>
</ul>
</li>
<li>
<p>If you copied the native library to a custom location:</p>
<ol>
<li>
<p>Open the <code>$PXF_BASE/conf/pxf-env.sh</code> file in the editor of your choice, and uncomment the <code>LD_LIBRARY_PATH</code> setting:</p>
<pre><code class="language-pre"># Additional native libraries to be loaded by PXF
export LD_LIBRARY_PATH=
</code></pre>
</li>
<li>
<p>Specify the custom location in the <code>LD_LIBRARY_PATH</code> environment variable. For example, if you copied a library named <code>dependent_native_lib.so</code> to <code>/usr/local/lib</code> on all SynxDB hosts, you would set <code>LD_LIBRARY_PATH</code> as follows:</p>
<pre><code class="language-shell">export LD_LIBRARY_PATH=/usr/local/lib
</code></pre>
</li>
<li>
<p>Save the file and exit the editor.</p>
</li>
</ol>
</li>
<li>
<p>Synchronize the PXF configuration from the SynxDB coordinator host to the standby coordinator host and segment hosts.</p>
<pre><code class="language-shell">gpadmin@coordinator$ pxf cluster sync
</code></pre>
<p>If you copied the native library to the <code>$PXF_BASE/lib/native</code> directory, this command copies the library to the same location on the SynxDB standby coordinator host and segment hosts.</p>
<p>If you updated the <code>pxf-env.sh</code> <code>LD_LIBRARY_PATH</code> environment variable, this command copies the configuration change to the SynxDB standby coordinator host and segment hosts.</p>
</li>
<li>
<p>Restart PXF on all SynxDB hosts:</p>
<pre><code class="language-shell">gpadmin@coordinator$ pxf cluster restart
</code></pre>
</li>
</ol>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../pxf/using_pxf.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../pxf/monitor_pxf.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../pxf/using_pxf.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../pxf/monitor_pxf.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
