<!DOCTYPE HTML>
<html lang="en" class="ayu sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Considerations when Using GPORCA - SynxDB 2 Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../../favicon.svg">
        <link rel="shortcut icon" href="../../../favicon.png">
        <link rel="stylesheet" href="../../../css/variables.css">
        <link rel="stylesheet" href="../../../css/general.css">
        <link rel="stylesheet" href="../../../css/chrome.css">
        <link rel="stylesheet" href="../../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../../highlight.css">
        <link rel="stylesheet" href="../../../tomorrow-night.css">
        <link rel="stylesheet" href="../../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "ayu";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">SynxDB 2 Documentation</h1>

                    <div class="right-buttons">
                        <a href="../../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <a href="https://www.synxdata.com/"><img id="fa fa-print" src="../../../SYNX-Text-and-Circular-Logo-142x28-White-text-Black-background.png" alt="Synx Data Labs Logo"/></a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="considerations-when-using-gporca"><a class="header" href="#considerations-when-using-gporca">Considerations when Using GPORCA</a></h1>
<p>To run queries optimally with GPORCA, consider the query criteria closely.</p>
<p>Ensure the following criteria are met:</p>
<ul>
<li>
<p>The table does not contain multi-column partition keys.</p>
</li>
<li>
<p>The multi-level partitioned table is a uniform multi-level partitioned table. See <a href="query-piv-uniform-part-tbl.html">About Uniform Multi-level Partitioned Tables</a>.</p>
</li>
<li>
<p>The server configuration parameter <code>optimizer_enable_master_only_queries</code> is set to <code>on</code> when running against master only tables such as the system table <em>pg_attribute</em>. For information about the parameter, see the <em>SynxDB Reference Guide</em>.</p>
<blockquote>
<p><strong>Note</strong> Enabling this parameter decreases performance of short running catalog queries. To avoid this issue, set this parameter only for a session or a query.</p>
</blockquote>
</li>
<li>
<p>Statistics have been collected on the root partition of a partitioned table.</p>
</li>
</ul>
<p>If the partitioned table contains more than 20,000 partitions, consider a redesign of the table schema.</p>
<p>These server configuration parameters affect GPORCA query processing.</p>
<ul>
<li>
<p><code>optimizer_cte_inlining_bound</code> controls the amount of inlining performed for common table expression (CTE) queries (queries that contain a <code>WHERE</code> clause).</p>
</li>
<li>
<p><code>optimizer_force_comprehensive_join_implementation</code> affects GPORCAâ€™s consideration of nested loop join and hash join alternatives. When the value is <code>false</code> (the default), GPORCA does not consider nested loop join alternatives when a hash join is available.</p>
</li>
<li>
<p><code>optimizer_force_multistage_agg</code> forces GPORCA to choose a multi-stage aggregate plan for a scalar distinct qualified aggregate. When the value is <code>off</code> (the default), GPORCA chooses between a one-stage and two-stage aggregate plan based on cost.</p>
</li>
<li>
<p><code>optimizer_force_three_stage_scalar_dqa</code> forces GPORCA to choose a plan with multistage aggregates when such a plan alternative is generated.</p>
</li>
<li>
<p><code>optimizer_join_order</code> sets the query optimization level for join ordering by specifying which types of join ordering alternatives to evaluate.</p>
</li>
<li>
<p><code>optimizer_join_order_threshold</code> specifies the maximum number of join children for which GPORCA uses the dynamic programming-based join ordering algorithm.</p>
</li>
<li>
<p><code>optimizer_nestloop_factor</code> controls nested loop join cost factor to apply to during query optimization.</p>
</li>
<li>
<p><code>optimizer_parallel_union</code> controls the amount of parallelization that occurs for queries that contain a <code>UNION</code> or <code>UNION ALL</code> clause. When the value is <code>on</code>, GPORCA can generate a query plan of the child operations of a <code>UNION</code> or <code>UNION ALL</code> operation run in parallel on segment instances.</p>
</li>
<li>
<p><code>optimizer_sort_factor</code> controls the cost factor that GPORCA applies to sorting operations during query optimization. The cost factor can be adjusted for queries when data skew is present.</p>
</li>
<li>
<p><code>gp_enable_relsize_collection</code> controls how GPORCA (and the Postgres Planner) handle a table without statistics. By default, GPORCA uses a default value to estimate the number of rows if statistics are not available. When this value is <code>on</code>, GPORCA uses the estimated size of a table if there are no statistics for the table.</p>
<p>This parameter is ignored for a root partition of a partitioned table. If the root partition does not have statistics, GPORCA always uses the default value. You can use <code>ANALZYE ROOTPARTITION</code> to collect statistics on the root partition. See <a href="../../../ref_guide/sql_commands/ANALYZE.html">ANALYZE</a>.</p>
</li>
</ul>
<p>These server configuration parameters control the display and logging of information.</p>
<ul>
<li><code>optimizer_print_missing_stats</code> controls the display of column information about columns with missing statistics for a query (default is <code>true</code>)</li>
<li><code>optimizer_print_optimization_stats</code> controls the logging of GPORCA query optimization metrics for a query (default is <code>off</code>)</li>
</ul>
<p>For information about the parameters, see the <em>SynxDB Reference Guide</em>.</p>
<p>GPORCA generates minidumps to describe the optimization context for a given query. The minidump files are used by Synx Data Labs support to analyze SynxDB issues. The information in the file is not in a format that can be easily used for debugging or troubleshooting. The minidump file is located under the master data directory and uses the following naming format:</p>
<p><code>Minidump_date_time.mdp</code></p>
<p>For information about the minidump file, see the server configuration parameter <code>optimizer_minidump</code> in the <em>SynxDB Reference Guide</em>.</p>
<p>When the <code>EXPLAIN ANALYZE</code> command uses GPORCA, the <code>EXPLAIN</code> plan shows only the number of partitions that are being eliminated. The scanned partitions are not shown. To show the name of the scanned partitions in the segment logs set the server configuration parameter <code>gp_log_dynamic_partition_pruning</code> to <code>on</code>. This example <code>SET</code> command enables the parameter.</p>
<pre><code>SET gp_log_dynamic_partition_pruning = on;
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../../admin_guide/query/topics/query-piv-opt-root-partition.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../../admin_guide/query/topics/query-piv-opt-features.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../../admin_guide/query/topics/query-piv-opt-root-partition.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../../admin_guide/query/topics/query-piv-opt-features.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../../elasticlunr.min.js"></script>
        <script src="../../../mark.min.js"></script>
        <script src="../../../searcher.js"></script>

        <script src="../../../clipboard.min.js"></script>
        <script src="../../../highlight.js"></script>
        <script src="../../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
