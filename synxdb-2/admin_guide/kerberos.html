<!DOCTYPE HTML>
<html lang="en" class="ayu sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Using Kerberos Authentication - SynxDB 2 Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "ayu";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">SynxDB 2 Documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <a href="https://www.synxdata.com/"><img id="fa fa-print" src="../SYNX-Text-and-Circular-Logo-142x28-White-text-Black-background.png" alt="Synx Data Labs Logo"/></a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="using-kerberos-authentication"><a class="header" href="#using-kerberos-authentication">Using Kerberos Authentication</a></h1>
<p>You can control access to SynxDB with a Kerberos authentication server.</p>
<p>SynxDB supports the Generic Security Service Application Program Interface (GSSAPI) with Kerberos authentication. GSSAPI provides automatic authentication (single sign-on) for systems that support it. You specify the SynxDB users (roles) that require Kerberos authentication in the SynxDB configuration file pg_hba.conf. The login fails if Kerberos authentication is not available when a role attempts to log in to SynxDB.</p>
<p>Kerberos provides a secure, encrypted authentication service. It does not encrypt data exchanged between the client and database and provides no authorization services. To encrypt data exchanged over the network, you must use an SSL connection. To manage authorization for access to SynxDB databases and objects such as schemas and tables, you use settings in the pg_hba.conf file and privileges given to SynxDB users and roles within the database. For information about managing authorization privileges, see <a href="roles_privs.html">Managing Roles and Privileges</a>.</p>
<p>For more information about Kerberos, see <a href="http://web.mit.edu/kerberos/">http://web.mit.edu/kerberos/</a>.</p>
<h2 id="prerequisites"><a class="header" href="#prerequisites"><a id="kerberos_prereq"></a>Prerequisites</a></h2>
<p>Before configuring Kerberos authentication for SynxDB, ensure that:</p>
<ul>
<li>You can identify the KDC server you use for Kerberos authentication and the Kerberos realm for your SynxDB system. If you have not yet configured your MIT Kerberos KDC server, see <a href="#task_setup_kdc">Installing and Configuring a Kerberos KDC Server</a> for example instructions.</li>
<li>System time on the Kerberos Key Distribution Center (KDC) server and SynxDB master is synchronized. (For example, install the <code>ntp</code> package on both servers.)</li>
<li>Network connectivity exists between the KDC server and the SynxDB master host.</li>
<li>Java 1.7.0_17 or later is installed on all SynxDB hosts. Java 1.7.0_17 is required to use Kerberos-authenticated JDBC on Red Hat Enterprise Linux 6.x or 7.x.</li>
</ul>
<h2 id="procedure"><a class="header" href="#procedure"><a id="nr166539"></a>Procedure</a></h2>
<p>Following are the tasks to complete to set up Kerberos authentication for SynxDB.</p>
<ul>
<li><a href="#task_m43_vwl_2p">Creating SynxDB Principals in the KDC Database</a></li>
<li><a href="#topic6">Installing the Kerberos Client on the Master Host</a></li>
<li><a href="#topic7">Configuring SynxDB to use Kerberos Authentication</a></li>
<li><a href="#topic_kmr_gws_d2b">Mapping Kerberos Principals to SynxDB Roles</a></li>
<li><a href="#topic9">Configuring JDBC Kerberos Authentication for SynxDB</a></li>
<li><a href="kerberos-lin-client.html">Configuring Kerberos for Linux Clients</a></li>
<li><a href="kerberos-win-client.html">Configuring Kerberos For Windows Clients</a></li>
</ul>
<h2 id="creating-synxdb-principals-in-the-kdc-database"><a class="header" href="#creating-synxdb-principals-in-the-kdc-database"><a id="task_m43_vwl_2p"></a>Creating SynxDB Principals in the KDC Database</a></h2>
<p>Create a service principal for the SynxDB service and a Kerberos admin principal that allows managing the KDC database as the gpadmin user.</p>
<ol>
<li>
<p>Log in to the Kerberos KDC server as the root user.</p>
<pre><code>$ ssh root@&lt;kdc-server&gt;
</code></pre>
</li>
<li>
<p>Create a principal for the SynxDB service.</p>
<pre><code># kadmin.local -q "addprinc -randkey postgres/mdw@GPDB.KRB"
</code></pre>
<p>The <code>-randkey</code> option prevents the command from prompting for a password.</p>
<p>The <code>postgres</code> part of the principal names matches the value of the SynxDB <code>krb_srvname</code> server configuration parameter, which is <code>postgres</code> by default.</p>
<p>The host name part of the principal name must match the output of the <code>hostname</code> command on the SynxDB master host. If the <code>hostname</code> command shows the fully qualified domain name (FQDN), use it in the principal name, for example <code>postgres/mdw.example.com@GPDB.KRB</code>.</p>
<p>The <code>GPDB.KRB</code> part of the principal name is the Kerberos realm name.</p>
</li>
<li>
<p>Create a principal for the gpadmin/admin role.</p>
<pre><code># kadmin.local -q "addprinc gpadmin/admin@GPDB.KRB"
</code></pre>
<p>This principal allows you to manage the KDC database when you are logged in as gpadmin. Make sure that the Kerberos <code>kadm.acl</code> configuration file contains an ACL to grant permissions to this principal. For example, this ACL grants all permissions to any admin user in the GPDB.KRB realm.</p>
<pre><code>*/admin@GPDB.KRB *
</code></pre>
</li>
<li>
<p>Create a keytab file with <code>kadmin.local</code>. The following example creates a keytab file <code>gpdb-kerberos.keytab</code> in the current directory with authentication information for the SynxDB service principal and the gpadmin/admin principal.</p>
<pre><code># kadmin.local -q "ktadd -k gpdb-kerberos.keytab postgres/mdw@GPDB.KRB gpadmin/admin@GPDB.KRB"
</code></pre>
</li>
<li>
<p>Copy the keytab file to the master host.</p>
<pre><code># scp gpdb-kerberos.keytab gpadmin@mdw:~
</code></pre>
</li>
</ol>
<h2 id="installing-the-kerberos-client-on-the-master-host"><a class="header" href="#installing-the-kerberos-client-on-the-master-host"><a id="topic6"></a>Installing the Kerberos Client on the Master Host</a></h2>
<p>Install the Kerberos client utilities and libraries on the SynxDB master.</p>
<ol>
<li>
<p>Install the Kerberos packages on the SynxDB master.</p>
<pre><code>$ sudo yum install krb5-libs krb5-workstation
</code></pre>
</li>
<li>
<p>Copy the <code>/etc/krb5.conf</code> file from the KDC server to <code>/etc/krb5.conf</code> on the SynxDB Master host.</p>
</li>
</ol>
<h2 id="configuring-synxdb-to-use-kerberos-authentication"><a class="header" href="#configuring-synxdb-to-use-kerberos-authentication"><a id="topic7"></a>Configuring SynxDB to use Kerberos Authentication</a></h2>
<p>Configure SynxDB to use Kerberos.</p>
<ol>
<li>
<p>Log in to the SynxDB master host as the gpadmin user.</p>
<pre><code>$ ssh gpadmin@&lt;master&gt;
$ source /usr/local/synxdb/synxdb_path.sh
</code></pre>
</li>
<li>
<p>Set the ownership and permissions of the keytab file you copied from the KDC server.</p>
<pre><code>$ chown gpadmin:gpadmin /home/gpadmin/gpdb-kerberos.keytab
$ chmod 400 /home/gpadmin/gpdb-kerberos.keytab
</code></pre>
</li>
<li>
<p>Configure the location of the keytab file by setting the SynxDB <code>krb_server_keyfile</code> server configuration parameter. This <code>gpconfig</code> command specifies the folder /home/gpadmin as the location of the keytab file gpdb-kerberos.keytab.</p>
<pre><code>$ gpconfig -c krb_server_keyfile -v  '/home/gpadmin/gpdb-kerberos.keytab'
</code></pre>
</li>
<li>
<p>Modify the SynxDB file <code>pg_hba.conf</code> to enable Kerberos support. For example, adding the following line to <code>pg_hba.conf</code> adds GSSAPI and Kerberos authentication support for connection requests from all users and hosts on the same network to all SynxDB databases.</p>
<pre><code>host all all 0.0.0.0/0 gss include_realm=0 krb_realm=GPDB.KRB
</code></pre>
<p>Setting the <code>krb_realm</code> option to a realm name ensures that only users from that realm can successfully authenticate with Kerberos. Setting the <code>include_realm</code> option to <code>0</code> excludes the realm name from the authenticated user name. For information about the <code>pg_hba.conf</code> file, see <a href="https://www.postgresql.org/docs/9.4/auth-pg-hba-conf.html">The pg_hba.conf file</a> in the PostgreSQL documentation.</p>
</li>
<li>
<p>Restart SynxDB after updating the <code>krb_server_keyfile</code> parameter and the <code>pg_hba.conf</code> file.</p>
<pre><code>$ gpstop -ar
</code></pre>
</li>
<li>
<p>Create the gpadmin/admin SynxDB superuser role.</p>
<pre><code>$ createuser gpadmin/admin --superuser
</code></pre>
<p>The Kerberos keys for this database role are in the keyfile you copied from the KDC server.</p>
</li>
<li>
<p>Create a ticket using <code>kinit</code> and show the tickets in the Kerberos ticket cache with <code>klist</code>.</p>
<pre><code>$ LD_LIBRARY_PATH= kinit -k -t /home/gpadmin/gpdb-kerberos.keytab gpadmin/admin@GPDB.KRB
$ LD_LIBRARY_PATH= klist
Ticket cache: FILE:/tmp/krb5cc_1000
Default principal: gpadmin/admin@GPDB.KRB

Valid starting       Expires              Service principal
06/13/2018 17:37:35  06/14/2018 17:37:35  krbtgt/GPDB.KRB@GPDB.KRB
</code></pre>
<blockquote>
<p><strong>Note</strong> When you set up the SynxDB environment by sourcing the <code>greenplum-db_path.sh</code> script, the <code>LD_LIBRARY_PATH</code> environment variable is set to include the SynxDB <code>lib</code> directory, which includes Kerberos libraries. This may cause Kerberos utility commands such as <code>kinit</code> and <code>klist</code> to fail due to version conflicts. The solution is to run Kerberos utilities before you source the <code>greenplum-db_path.sh</code> file or temporarily unset the <code>LD_LIBRARY_PATH</code> variable when you run Kerberos utilities, as shown in the example.</p>
</blockquote>
</li>
<li>
<p>As a test, log in to the postgres database with the <code>gpadmin/admin</code> role:</p>
<pre><code>$ psql -U "gpadmin/admin" -h mdw postgres
psql (9.4.20)
Type "help" for help.

postgres=# select current_user;
 current_user
---------------
 gpadmin/admin
(1 row)
</code></pre>
<blockquote>
<p><strong>Note</strong> When you start <code>psql</code> on the master host, you must include the <code>-h &lt;master-hostname&gt;</code> option to force a TCP connection because Kerberos authentication does not work with local connections.</p>
</blockquote>
</li>
</ol>
<p>If a Kerberos principal is not a SynxDB user, a message similar to the following is displayed from the <code>psql</code> command line when the user attempts to log in to the database:</p>
<pre><code>psql: krb5_sendauth: Bad response
</code></pre>
<p>The principal must be added as a SynxDB user.</p>
<h2 id="mapping-kerberos-principals-to-synxdb-roles"><a class="header" href="#mapping-kerberos-principals-to-synxdb-roles"><a id="topic_kmr_gws_d2b"></a>Mapping Kerberos Principals to SynxDB Roles</a></h2>
<p>To connect to a SynxDB system with Kerberos authentication enabled, a user first requests a ticket-granting ticket from the KDC server using the <code>kinit</code> utility with a password or a keytab file provided by the Kerberos admin. When the user then connects to the Kerberos-enabled SynxDB system, the user’s Kerberos principle name will be the SynxDB role name, subject to transformations specified in the options field of the <code>gss</code> entry in the SynxDB <code>pg_hba.conf</code> file:</p>
<ul>
<li>If the <code>krb_realm=&lt;realm&gt;</code> option is present, SynxDB only accepts Kerberos principals who are members pf the specified realm.</li>
<li>If the <code>include_realm=0</code> option is specified, the SynxDB role name is the Kerberos principal name without the Kerberos realm. If the <code>include_realm=1</code> option is instead specified, the Kerberos realm is not stripped from the SynxDB rolename. The role must have been created with the SynxDB <code>CREATE ROLE</code> command.</li>
<li>If the <code>map=&lt;map-name&gt;</code> option is specified, the Kerberos principal name is compared to entries labeled with the specified <code>&lt;map-name&gt;</code> in the <code>$MASTER_DATA_DIRECTORY/pg_ident.conf</code> file and replaced with the SynxDB role name specified in the first matching entry.</li>
</ul>
<p>A user name map is defined in the <code>$MASTER_DATA_DIRECTORY/pg_ident.conf</code> configuration file. This example defines a map named <code>mymap</code> with two entries.</p>
<pre><code>
# MAPNAME   SYSTEM-USERNAME        GP-USERNAME
mymap       /^admin@GPDB.KRB$      gpadmin
mymap       /^(.*)_gp)@GPDB.KRB$   \1
</code></pre>
<p>The map name is specified in the <code>pg_hba.conf</code> Kerberos entry in the options field:</p>
<pre><code>host all all 0.0.0.0/0 gss include_realm=0 krb_realm=GPDB.KRB map=mymap
</code></pre>
<p>The first map entry matches the Kerberos principal admin@GPDB.KRB and replaces it with the SynxDB gpadmin role name. The second entry uses a wildcard to match any Kerberos principal in the GPDB-KRB realm with a name ending with the characters <code>_gp</code> and replaces it with the initial portion of the principal name. SynxDB applies the first matching map entry in the <code>pg_ident.conf</code> file, so the order of entries is significant.</p>
<p>For more information about using username maps see <a href="https://www.postgresql.org/docs/9.4/auth-username-maps.html">Username maps</a> in the PostgreSQL documentation.</p>
<h2 id="configuring-jdbc-kerberos-authentication-for-synxdb"><a class="header" href="#configuring-jdbc-kerberos-authentication-for-synxdb"><a id="topic9"></a>Configuring JDBC Kerberos Authentication for SynxDB</a></h2>
<p>Enable Kerberos-authenticated JDBC access to SynxDB.</p>
<p>You can configure SynxDB to use Kerberos to run user-defined Java functions.</p>
<ol>
<li>
<p>Ensure that Kerberos is installed and configured on the SynxDB master. See <a href="#topic6">Installing the Kerberos Client on the Master Host</a>.</p>
</li>
<li>
<p>Create the file .java.login.config in the folder <code>/home/gpadmin</code> and add the following text to the file:</p>
<pre><code>pgjdbc {
  com.sun.security.auth.module.Krb5LoginModule required
  doNotPrompt=true
  useTicketCache=true
  debug=true
  client=true;
};
</code></pre>
</li>
<li>
<p>Create a Java application that connects to SynxDB using Kerberos authentication. The following example database connection URL uses a PostgreSQL JDBC driver and specifies parameters for Kerberos authentication:</p>
<pre><code>jdbc:postgresql://mdw:5432/mytest?kerberosServerName=postgres
&amp;jaasApplicationName=pgjdbc&amp;user=gpadmin/gpdb-kdc
</code></pre>
<p>The parameter names and values specified depend on how the Java application performs Kerberos authentication.</p>
</li>
<li>
<p>Test the Kerberos login by running a sample Java application from SynxDB.</p>
</li>
</ol>
<h2 id="installing-and-configuring-a-kerberos-kdc-server"><a class="header" href="#installing-and-configuring-a-kerberos-kdc-server"><a id="task_setup_kdc"></a>Installing and Configuring a Kerberos KDC Server</a></h2>
<p>Steps to set up a Kerberos Key Distribution Center (KDC) server on a Red Hat Enterprise Linux host for use with SynxDB.</p>
<p>If you do not already have a KDC, follow these steps to install and configure a KDC server on a Red Hat Enterprise Linux host with a <code>GPDB.KRB</code> realm. The host name of the KDC server in this example is gpdb-kdc.</p>
<ol>
<li>
<p>Install the Kerberos server and client packages:</p>
<pre><code>$ sudo yum install krb5-libs krb5-server krb5-workstation
</code></pre>
</li>
<li>
<p>Edit the /etc/krb5.conf configuration file. The following example shows a Kerberos server configured with a default <code>GPDB.KRB</code> realm.</p>
<pre><code>[logging]
 default = FILE:/var/log/krb5libs.log
 kdc = FILE:/var/log/krb5kdc.log
 admin_server = FILE:/var/log/kadmind.log

[libdefaults]
 default_realm = GPDB.KRB
 dns_lookup_realm = false
 dns_lookup_kdc = false
 ticket_lifetime = 24h
 renew_lifetime = 7d
 forwardable = true
 default_tgs_enctypes = aes128-cts des3-hmac-sha1 des-cbc-crc des-cbc-md5
 default_tkt_enctypes = aes128-cts des3-hmac-sha1 des-cbc-crc des-cbc-md5
 permitted_enctypes = aes128-cts des3-hmac-sha1 des-cbc-crc des-cbc-md5

[realms]
 GPDB.KRB = {
  kdc = gpdb-kdc:88
  admin_server = gpdb-kdc:749
  default_domain = gpdb.krb
 }

[domain_realm]
 .gpdb.krb = GPDB.KRB
 gpdb.krb = GPDB.KRB

[appdefaults]
 pam = {
    debug = false
    ticket_lifetime = 36000
    renew_lifetime = 36000
    forwardable = true
    krb4_convert = false
 }

</code></pre>
<p>The <code>kdc</code> and <code>admin_server</code> keys in the <code>[realms]</code> section specify the host (<code>gpdb-kdc</code>) and port where the Kerberos server is running. IP numbers can be used in place of host names.</p>
<p>If your Kerberos server manages authentication for other realms, you would instead add the <code>GPDB.KRB</code> realm in the <code>[realms]</code> and <code>[domain_realm]</code> section of the <code>kdc.conf</code> file. See the <a href="http://web.mit.edu/kerberos/krb5-latest/doc/">Kerberos documentation</a> for information about the <code>kdc.conf</code> file.</p>
</li>
<li>
<p>To create the Kerberos database, run the <code>kdb5_util</code>.</p>
<pre><code># kdb5_util create -s
</code></pre>
<p>The <code>kdb5_util</code> create command creates the database to store keys for the Kerberos realms that are managed by this KDC server. The -s option creates a stash file. Without the stash file, every time the KDC server starts it requests a password.</p>
</li>
<li>
<p>Add an administrative user to the KDC database with the <code>kadmin.local</code> utility. Because it does not itself depend on Kerberos authentication, the <code>kadmin.local</code> utility allows you to add an initial administrative user to the local Kerberos server. To add the user <code>gpadmin</code> as an administrative user to the KDC database, run the following command:</p>
<pre><code># kadmin.local -q "addprinc gpadmin/admin"
</code></pre>
<p>Most users do not need administrative access to the Kerberos server. They can use <code>kadmin</code> to manage their own principals (for example, to change their own password). For information about <code>kadmin</code>, see the <a href="http://web.mit.edu/kerberos/krb5-latest/doc/">Kerberos documentation</a>.</p>
</li>
<li>
<p>If needed, edit the /var/kerberos/krb5kdc/kadm5.acl file to grant the appropriate permissions to <code>gpadmin</code>.</p>
</li>
<li>
<p>Start the Kerberos daemons:</p>
<pre><code># /sbin/service krb5kdc start#
/sbin/service kadmin start
</code></pre>
</li>
<li>
<p>To start Kerberos automatically upon restart:</p>
<pre><code># /sbin/chkconfig krb5kdc on
# /sbin/chkconfig kadmin on
</code></pre>
</li>
</ol>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../admin_guide/ldap.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../admin_guide/kerberos-lin-client.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../admin_guide/ldap.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../admin_guide/kerberos-lin-client.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
