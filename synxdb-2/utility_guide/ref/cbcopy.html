<!DOCTYPE HTML>
<html lang="en" class="ayu sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>cbcopy - SynxDB 2 Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "ayu";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">SynxDB 2 Documentation</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <a href="https://www.synxdata.com/"><img id="fa fa-print" src="../../SYNX-Text-and-Circular-Logo-142x28-White-text-Black-background.png" alt="Synx Data Labs Logo"/></a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="cbcopy"><a class="header" href="#cbcopy">cbcopy</a></h1>
<p>Copy utility for migrating data from Greenplum Database to SynxDB, or between SynxDB clusters.</p>
<h2 id="synopsis"><a class="header" href="#synopsis">Synopsis</a></h2>
<pre><code>cbcopy [flags]
</code></pre>
<h2 id="description"><a class="header" href="#description">Description</a></h2>
<p>The <code>cbcopy</code> utility copies database objects from a source database system to a destination system. You can perform one of the following types of copy operations:</p>
<ul>
<li>Copy a SynxDB system with the <code>--full</code> option. This option copies all database objects including, tables, table data, indexes, views, users, roles, functions, and resource queues for all user-defined databases to a different destination system.</li>
<li>Copy a set of user-defined database tables to a destination system.
<ul>
<li>The <code>--dbname</code> option copies all user-defined tables, table data, and re-creates the table indexes from specified databases.</li>
<li>The <code>--include-schema</code>, <code>--include-table</code>, or <code>--include-table-file</code> option copies a specified set of user-defined schemas or tables.</li>
<li>The <code>--exclude-table</code> and <code>--exclude-table-file</code> options exclude a specified set of user-defined tables and table data to be copied.</li>
</ul>
</li>
<li>Copy only the database schemas with the <code>--metadata-only</code> option.</li>
</ul>
<h2 id="prerequisites"><a class="header" href="#prerequisites">Prerequisites</a></h2>
<p>The user IDs for connecting to the source and destination systems must have appropriate access to the systems.</p>
<p>When the <code>--full</code> option is specified, resource groups and table spaces are copied, however, the utility does not configure the destination system. For example, you must configure the system to use resource groups and create the host directories required for the tablespaces.</p>
<h3 id="general-settings"><a class="header" href="#general-settings">General Settings</a></h3>
<p>The following settings display basic information about the <code>cbcopy</code> utility or control the amount of information displayed for copy operations.</p>
<h3 id="--help"><a class="header" href="#--help"><code>--help</code></a></h3>
<p>Display help information and exit (default: false).</p>
<h3 id="--version"><a class="header" href="#--version"><code>--version</code></a></h3>
<p>Display the application version and exit (default: false).</p>
<h3 id="--debug"><a class="header" href="#--debug"><code>--debug</code></a></h3>
<p>Enable debug-level log messages for troubleshooting (default: false).</p>
<h3 id="--verbose"><a class="header" href="#--verbose"><code>--verbose</code></a></h3>
<p>Enable verbose logging for detailed output (default: false).</p>
<h3 id="--quiet"><a class="header" href="#--quiet"><code>--quiet</code></a></h3>
<p>Suppress informational logs; only show warnings and errors (default: false).</p>
<h2 id="source-cluster-settings"><a class="header" href="#source-cluster-settings">Source Cluster Settings</a></h2>
<p><code>cbcopy</code> provides a range of options to define the scope of data that is copied from the source cluster. You can choose options to perform a full cluster migration or to copy specific databases or tables. Additional options enable you to exclude certain tables from being copied.</p>
<p>Use one of the options <code>--dbname</code>, <code>--schema</code>, <code>--include-table</code>, or <code>--include-table-file</code>, or use the migration option <code>--full</code> to copy all data in the cluster. Use additional options as needed to exclude data from the copy.</p>
<h3 id="--source-host-host_or_ip"><a class="header" href="#--source-host-host_or_ip"><code>--source-host &lt;host_or_ip&gt;</code></a></h3>
<p>The host name or IP address of the source cluster master segment (default: 127.0.0.1).</p>
<h3 id="--source-port-port"><a class="header" href="#--source-port-port"><code>--source-port &lt;port&gt;</code></a></h3>
<p>Port number for the source database master segment (default: 5432).</p>
<h3 id="--source-user-user_id"><a class="header" href="#--source-user-user_id"><code>--source-user &lt;user_id&gt;</code></a></h3>
<p>User ID to use to connect to the source database (default: gpadmin).</p>
<h3 id="--dbname-database"><a class="header" href="#--dbname-database"><code>--dbname &lt;database[,...]&gt;</code></a></h3>
<p>Comma-separated list of databases to migrate from the source. Copies all the user-defined tables and table data from the source system.</p>
<h3 id="--schema-databaseschema"><a class="header" href="#--schema-databaseschema"><code>--schema &lt;database.schema[,...]&gt;</code></a></h3>
<p>Comma-separated list of schemas to migrate using the format: <code>database.schema</code>.</p>
<h3 id="--include-table-databaseschematable"><a class="header" href="#--include-table-databaseschematable"><code>--include-table &lt;database.schema.table[,...]&gt;</code></a></h3>
<p>Comma-separated list of specific tables to migrate using the format: <code>database.schema.table</code>.</p>
<h3 id="--include-table-file-file_name"><a class="header" href="#--include-table-file-file_name"><code>--include-table-file &lt;file_name&gt;</code></a></h3>
<p>Migrate tables listed in the specified <code>file_name</code>. Specify one table per line in the file, using the format: <code>database.schema.table</code>.</p>
<h3 id="--exclude-table-databaseschematable"><a class="header" href="#--exclude-table-databaseschematable"><code>--exclude-table &lt;database.schema.table[,...]</code></a></h3>
<p>Exclude specific tables from migration. Use a comma-separated list with the format: <code>database.schema.table</code>.</p>
<h3 id="--exclude-table-file-file_name"><a class="header" href="#--exclude-table-file-file_name"><code>--exclude-table-file &lt;file_name&gt;</code></a></h3>
<p>Exclude tables listed in the specified <code>file_name</code>. Specify one table per line in the file, using the format: <code>database.schema.table</code>.</p>
<h2 id="destination-database-settings"><a class="header" href="#destination-database-settings">Destination Database Settings</a></h2>
<p>Options in this category specify connection details for the destination cluster, and provide options for mapping source databases, schemas, and tables to destination databases, schemas, and tables.</p>
<h3 id="--dest-host-host_or_ip"><a class="header" href="#--dest-host-host_or_ip"><code>--dest-host &lt;host_or_ip&gt;</code></a></h3>
<p>The host name or IP address of the destination cluster master segment (default: 127.0.0.1).</p>
<h3 id="--dest-port-port"><a class="header" href="#--dest-port-port"><code>--dest-port &lt;port&gt;</code></a></h3>
<p>Port number for the destination database master segment (default: 5432).</p>
<h3 id="--dest-user-user_id"><a class="header" href="#--dest-user-user_id"><code>--dest-user &lt;user_id&gt;</code></a></h3>
<p>User ID to use to connect to the destination database (default: gpadmin).</p>
<h3 id="--dest-dbname-database"><a class="header" href="#--dest-dbname-database"><code>--dest-dbname &lt;database[,...]&gt;</code></a></h3>
<p>Comma-separated list of target databases in the destination cluster. Use this option to copy a database to a different destination database. The number of database names provided with this option must match the number of names specified in the <code>--dbname</code> option. The utility copies the source databases to the destination databases in the listed order.</p>
<h3 id="--dest-schema-databaseschema"><a class="header" href="#--dest-schema-databaseschema"><code>--dest-schema &lt;database.schema[,...]&gt;</code></a></h3>
<p>Comma-separated list of target schemas in the destination cluster. Use this option to copy to a different destination schema. The number of schemas provided with this option must match the number of schemas specified in the <code>--schema</code> option.</p>
<h3 id="--schema-mapping-file-file_name"><a class="header" href="#--schema-mapping-file-file_name"><code>--schema-mapping-file &lt;file_name&gt;</code></a></h3>
<p>File that maps source schemas to target schemas using the format: <code>source_db.schema,dest_db.schema</code>.</p>
<h3 id="--dest-table-databaseschematable"><a class="header" href="#--dest-table-databaseschematable"><code>--dest-table &lt;database.schema.table[,...]&gt;</code></a></h3>
<p>Specifies new table names for migrated tables. The number of tables provided with this option must match the number of tables specified in the <code>--include-table</code> option.</p>
<h3 id="--dest-table-file-file_name"><a class="header" href="#--dest-table-file-file_name"><code>--dest-table-file &lt;file_name&gt;</code></a></h3>
<p>File containing new table names for migration. The number of tables defined in the file must match the number of tables specified in the file provided to <code>--include-table-file</code>.</p>
<h2 id="data-migration-controls"><a class="header" href="#data-migration-controls">Data Migration Controls</a></h2>
<p>Options in this category specify whether <code>cbcopy</code> migrates data as well as metadata, and how the utility handles existing data in the destination cluster.</p>
<h3 id="--full"><a class="header" href="#--full"><code>--full</code></a></h3>
<p>Migrates the entire data cluster, including all databases, schemas, and tables (default: false).</p>
<h3 id="--data-only"><a class="header" href="#--data-only"><code>--data-only</code></a></h3>
<p>Migrates only the table data; skips metadata like schema definitions (default: false).</p>
<h3 id="--metadata-only"><a class="header" href="#--metadata-only"><code>--metadata-only</code></a></h3>
<p>Migrates only metadata (schemas, tables, roles); excludes table data (default: false).</p>
<h3 id="--global-metadata-only"><a class="header" href="#--global-metadata-only"><code>--global-metadata-only</code></a></h3>
<p>Migrates global metadata (roles, tablespaces) without table data (default: false).</p>
<h3 id="--with-global-metadata"><a class="header" href="#--with-global-metadata"><code>--with-global-metadata</code></a></h3>
<p>Include global objects (roles, tablespaces) during migration (default: false).</p>
<h3 id="--append"><a class="header" href="#--append"><code>--append</code></a></h3>
<p>Appends data to existing tables in the destination (default: false).</p>
<h3 id="--truncate"><a class="header" href="#--truncate"><code>--truncate</code></a></h3>
<p>Clears (truncates) existing data in destination tables before migration (default: false).</p>
<h3 id="--validate"><a class="header" href="#--validate"><code>--validate</code></a></h3>
<p>Validates data consistency after migration (default: true).</p>
<h2 id="performance-tuning--parallelism"><a class="header" href="#performance-tuning--parallelism">Performance Tuning &amp; Parallelism</a></h2>
<p>Options in this category affect the number of jobs and the copy mode that <code>cbcopy</code> uses to migrate data.</p>
<h3 id="--copy-jobs-count"><a class="header" href="#--copy-jobs-count"><code>--copy-jobs &lt;count&gt;</code></a></h3>
<p>Maximum number of tables to migrate concurrently (1-512, default: 4).</p>
<h3 id="--metadata-jobs-count"><a class="header" href="#--metadata-jobs-count"><code>--metadata-jobs &lt;count&gt;</code></a></h3>
<p>Maximum number of concurrent metadata restore tasks (1-512, default: 2).</p>
<h3 id="--on-segment-threshold-count"><a class="header" href="#--on-segment-threshold-count"><code>--on-segment-threshold &lt;count&gt;</code></a></h3>
<p>Threshold (row count) for switching to direct coordinator copy mode (default: 1000000).</p>
<h2 id="advanced-settings"><a class="header" href="#advanced-settings">Advanced Settings</a></h2>
<p>These less-frequently-used options provide additional control over mapping data to the destination cluster, provide compression options, or control connectivity options for the destination cluster.</p>
<h3 id="--owner-mapping-file-file_name"><a class="header" href="#--owner-mapping-file-file_name"><code>--owner-mapping-file &lt;file_name&gt;</code></a></h3>
<p>File that maps source roles to target roles using the format: <code>source_role,dest_role</code>.</p>
<h3 id="--dest-tablespace-tablespace"><a class="header" href="#--dest-tablespace-tablespace"><code>--dest-tablespace &lt;tablespace&gt;</code></a></h3>
<p>Create all migrated objects in the specified tablespace in the destination cluster.</p>
<h3 id="--tablespace-mapping-file-file_name"><a class="header" href="#--tablespace-mapping-file-file_name"><code>--tablespace-mapping-file &lt;file_name&gt;</code></a></h3>
<p>File that maps source tablespaces to destination tablespaces using the format: <code>source,dest</code>.</p>
<h3 id="--compression"><a class="header" href="#--compression"><code>--compression</code></a></h3>
<p>Transfers compressed data instead of uncompressed/plain data (default: false).</p>
<h3 id="--data-port-range"><a class="header" href="#--data-port-range"><code>--data-port-range</code></a></h3>
<p>Port range for data transfer during migration (format: start-end) (default: 1024-65535).</p>
<h2 id="examples"><a class="header" href="#examples">Examples</a></h2>
<p>This command copies all user created databases in a source system to a destination system with the <code>--full</code> option.</p>
<pre><code>cbcopy --source-host mytest --source-port 1234 --source-user gpuser \
    --dest-host demohost --dest-port 1234 --dest-user gpuser \
    --full
</code></pre>
<p>This command copies the specified databases in a source system to a destination system with the <code>--dbname</code> option. The <code>--truncate</code> option truncates the table data before copying table data from the source table.</p>
<pre><code>cbcopy --source-host mytest --source-port 1234 --source-user gpuser \
   --dest-host demohost --dest-port 1234 --dest-user gpuser \
   --dbname database1,database2 --truncate
</code></pre>
<p>This command copies the specified tables in a source system to a destination system with the <code>--include-table</code> option.</p>
<pre><code>cbcopy --source-host mytest --source-port 1234 --source-user gpuser \
   --dest-host demohost --dest-port 1234 --dest-user gpuser \
   --include-table database.schema.table1,database.schema.table2
</code></pre>
<p>This command copies the tables from the source database to the destination system, excluding the tables specified in <code>/home/gpuser/mytables</code> with the <code>--exclude-table-file</code> option. The <code>--truncate</code> option truncates tables that already exist in the destination system.</p>
<pre><code>cbcopy --source-host mytest --source-port 1234 --source-user gpuser \
   --dest-host demohost --dest-port 1234 --dest-user gpuser \
   --dbname database1 --exclude-table-file /home/gpuser/mytables \
   --truncate
</code></pre>
<p>This command specifies the <code>--full</code> and <code>--metadata-only</code> options to copy the complete database schema, including all tables, indexes, views, user-defined types (UDT), and user-defined functions (UDF) from all the source databases. No data is copied.</p>
<pre><code>cbcopy --source-host mytest --source-port 1234 --source-user gpuser \
   --dest-host demohost --dest-port 1234 --dest-user gpuser \
   --full --metadata-only
</code></pre>
<p>This command copies the specified databases in a source system to a destination system with the <code>--dbname</code> option and specifies 8 parallel processes with the <code>--copy-jobs</code> option. The command uses ports in the range 2000-2010 for the parallel process connections.</p>
<pre><code>cbcopy --source-host mytest --source-port 1234 --source-user gpuser \
   --dest-host demohost --dest-port 1234 --dest-user gpuser \
   --dbname database1,database2 --truncate --copy-jobs 8 --data-port-range 2000-2010
</code></pre>
<p>This command copies the specified database in a source system to a destination system with the <code>--dbname</code> option and specifies 16 parallel processes with the <code>--copy-jobs</code> option. The <code>--truncate</code> option truncates the table if it already exists in the destination database.</p>
<pre><code>cbcopy --source-host mytest --source-port 1234 --source-user gpuser \
   --dest-host demohost --dest-port 1234 --dest-user gpuser \
   --dbname database1 --truncate --copy-jobs 16
</code></pre>
<h2 id="see-also"><a class="header" href="#see-also">See Also</a></h2>
<p><a href="../../admin_guide/managing/cbcopy-migrate.html">Migrating Data with cbcopy</a></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../utility_guide/ref/gpconfig.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../utility_guide/ref/gpdeletesystem.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../utility_guide/ref/gpconfig.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../utility_guide/ref/gpdeletesystem.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
