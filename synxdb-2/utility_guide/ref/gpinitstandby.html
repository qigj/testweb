<!DOCTYPE HTML>
<html lang="en" class="ayu sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>gpinitstandby - SynxDB 2 Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "ayu";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">SynxDB 2 Documentation</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <a href="https://www.synxdata.com/"><img id="fa fa-print" src="../../SYNX-Text-and-Circular-Logo-142x28-White-text-Black-background.png" alt="Synx Data Labs Logo"/></a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="gpinitstandby"><a class="header" href="#gpinitstandby">gpinitstandby</a></h1>
<p>Adds and/or initializes a standby master host for a SynxDB system.</p>
<h2 id="synopsis"><a class="header" href="#synopsis"><a id="section2"></a>Synopsis</a></h2>
<pre><code>gpinitstandby { -s &lt;standby_hostname&gt; [-P port] | -r | -n } [-a] [-q] 
    [-D] [-S &lt;standby_data_directory&gt;] [-l &lt;logfile_directory&gt;] 
    [--hba-hostnames &lt;boolean&gt;] 

gpinitstandby -v 

gpinitstandby -?
</code></pre>
<h2 id="description"><a class="header" href="#description"><a id="section3"></a>Description</a></h2>
<p>The <code>gpinitstandby</code> utility adds a backup, standby master instance to your SynxDB system. If your system has an existing standby master instance configured, use the <code>-r</code> option to remove it before adding the new standby master instance.</p>
<p>Before running this utility, make sure that the SynxDB software is installed on the standby master host and that you have exchanged SSH keys between the hosts. It is recommended that the master port is set to the same port number on the master host and the standby master host.</p>
<p>This utility should be run on the currently active <em>primary</em> master host. See the <em>SynxDB Installation Guide</em> for instructions.</p>
<p>The utility performs the following steps:</p>
<ul>
<li>Updates the SynxDB system catalog to remove the existing standby master information (if the <code>-r</code> option is supplied)</li>
<li>Updates the SynxDB system catalog to add the new standby master instance information</li>
<li>Edits the <code>pg_hba.conf</code> file of the SynxDB master to allow access from the newly added standby master</li>
<li>Sets up the standby master instance on the alternate master host</li>
<li>Starts the synchronization process</li>
</ul>
<p>A backup, standby master instance serves as a ‘warm standby’ in the event of the primary master becoming non-operational. The standby master is kept up to date by transaction log replication processes (the <code>walsender</code> and <code>walreceiver</code>), which run on the primary master and standby master hosts and keep the data between the primary and standby master instances synchronized. If the primary master fails, the log replication process is shut down, and the standby master can be activated in its place by using the <code>gpactivatestandby</code> utility. Upon activation of the standby master, the replicated logs are used to reconstruct the state of the master instance at the time of the last successfully committed transaction.</p>
<p>The activated standby master effectively becomes the SynxDB master, accepting client connections on the master port and performing normal master operations such as SQL command processing and resource management.</p>
<blockquote>
<p><strong>Important</strong> If the <code>gpinitstandby</code> utility previously failed to initialize the standby master, you must delete the files in the standby master data directory before running <code>gpinitstandby</code> again. The standby master data directory is not cleaned up after an initialization failure because it contains log files that can help in determining the reason for the failure.</p>
</blockquote>
<p>If an initialization failure occurs, a summary report file is generated in the standby host directory <code>/tmp</code>. The report file lists the directories on the standby host that require clean up.</p>
<h2 id="options"><a class="header" href="#options"><a id="section4"></a>Options</a></h2>
<h3 id="-a-do-not-prompt"><a class="header" href="#-a-do-not-prompt">-a (do not prompt)</a></h3>
<p>Do not prompt the user for confirmation.</p>
<h3 id="-d-debug"><a class="header" href="#-d-debug">-D (debug)</a></h3>
<p>Sets logging level to debug.</p>
<h3 id="hba-hostnames-boolean"><a class="header" href="#hba-hostnames-boolean">–hba-hostnames boolean</a></h3>
<p>Optional. Controls whether this utility uses IP addresses or host names in the <code>pg_hba.conf</code> file when updating this file with addresses that can connect to SynxDB. When set to 0 – the default value – this utility uses IP addresses when updating this file. When set to 1, this utility uses host names when updating this file. For consistency, use the same value that was specified for <code>HBA_HOSTNAMES</code> when the SynxDB system was initialized. For information about how SynxDB resolves host names in the <code>pg_hba.conf</code> file, see <a href="../../admin_guide/client_auth.html">Configuring Client Authentication</a>.</p>
<h3 id="-l-logfile_directory"><a class="header" href="#-l-logfile_directory">-l logfile_directory</a></h3>
<p>The directory to write the log file. Defaults to <code>~/gpAdminLogs</code>.</p>
<h3 id="-n-restart-standby-master"><a class="header" href="#-n-restart-standby-master">-n (restart standby master)</a></h3>
<p>Specify this option to start a SynxDB standby master that has been configured but has stopped for some reason.</p>
<h3 id="-p-port"><a class="header" href="#-p-port">-P port</a></h3>
<p>This option specifies the port that is used by the SynxDB standby master. The default is the same port used by the active SynxDB master.</p>
<p>If the SynxDB standby master is on the same host as the active master, the ports must be different. If the ports are the same for the active and standby master and the host is the same, the utility returns an error.</p>
<h3 id="-q-no-screen-output"><a class="header" href="#-q-no-screen-output">-q (no screen output)</a></h3>
<p>Run in quiet mode. Command output is not displayed on the screen, but is still written to the log file.</p>
<h3 id="-r-remove-standby-master"><a class="header" href="#-r-remove-standby-master">-r (remove standby master)</a></h3>
<p>Removes the currently configured standby master instance from your SynxDB system.</p>
<h3 id="-s-standby_hostname"><a class="header" href="#-s-standby_hostname">-s standby_hostname</a></h3>
<p>The host name of the standby master host.</p>
<h3 id="-s-standby_data_directory"><a class="header" href="#-s-standby_data_directory">-S standby_data_directory</a></h3>
<p>The data directory to use for a new standby master. The default is the same directory used by the active master.</p>
<p>If the standby master is on the same host as the active master, a different directory must be specified using this option.</p>
<h3 id="-v-show-utility-version"><a class="header" href="#-v-show-utility-version">-v (show utility version)</a></h3>
<p>Displays the version, status, last updated date, and checksum of this utility.</p>
<h3 id="--help"><a class="header" href="#--help">-? (help)</a></h3>
<p>Displays the online help.</p>
<h2 id="examples"><a class="header" href="#examples"><a id="section5"></a>Examples</a></h2>
<p>Add a standby master instance to your SynxDB system and start the synchronization process:</p>
<pre><code>gpinitstandby -s host09
</code></pre>
<p>Start an existing standby master instance and synchronize the data with the current primary master instance:</p>
<pre><code>gpinitstandby -n
</code></pre>
<blockquote>
<p><strong>Note</strong> Do not specify the -n and -s options in the same command.</p>
</blockquote>
<p>Add a standby master instance to your SynxDB system specifying a different port:</p>
<pre><code>gpinitstandby -s myhost -P 2222
</code></pre>
<p>If you specify the same host name as the active SynxDB master, you must also specify a different port number with the <code>-P</code> option and a standby data directory with the <code>-S</code> option.</p>
<p>Remove the existing standby master from your SynxDB system configuration:</p>
<pre><code>gpinitstandby -r
</code></pre>
<h2 id="see-also"><a class="header" href="#see-also"><a id="section6"></a>See Also</a></h2>
<p><a href="gpinitsystem.html">gpinitsystem</a>, <a href="gpaddmirrors.html">gpaddmirrors</a>, <a href="gpactivatestandby.html">gpactivatestandby</a></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../utility_guide/ref/gpfdist.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../utility_guide/ref/gpinitsystem.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../utility_guide/ref/gpfdist.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../utility_guide/ref/gpinitsystem.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
