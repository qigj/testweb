<!DOCTYPE HTML>
<html lang="en" class="ayu sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>gpssh-exkeys - SynxDB 2 Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "ayu";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">SynxDB 2 Documentation</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <a href="https://www.synxdata.com/"><img id="fa fa-print" src="../../SYNX-Text-and-Circular-Logo-142x28-White-text-Black-background.png" alt="Synx Data Labs Logo"/></a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="gpssh-exkeys"><a class="header" href="#gpssh-exkeys">gpssh-exkeys</a></h1>
<p>Exchanges SSH public keys between hosts.</p>
<h2 id="synopsis"><a class="header" href="#synopsis"><a id="section2"></a>Synopsis</a></h2>
<pre><code>gpssh-exkeys -f &lt;hostfile_exkeys&gt; | -h &lt;hostname&gt; [-h &lt;hostname&gt; ...]

gpssh-exkeys -e &lt;hostfile_exkeys&gt; -x &lt;hostfile_gpexpand&gt;

gpssh-exkeys -? 

gpssh-exkeys --version
</code></pre>
<h2 id="description"><a class="header" href="#description"><a id="section3"></a>Description</a></h2>
<p>The <code>gpssh-exkeys</code> utility exchanges SSH keys between the specified host names (or host addresses). This allows SSH connections between SynxDB hosts and network interfaces without a password prompt. The utility is used to initially prepare a SynxDB system for passwordless SSH access, and also to prepare additional hosts for passwordless SSH access when expanding a SynxDB system.</p>
<p>Keys are exchanged as the currently logged in user. You run the utility on the master host as the <code>gpadmin</code> user (the user designated to own your SynxDB installation). SynxDB management utilities require that the <code>gpadmin</code> user be created on all hosts in the SynxDB system, and the utilities must be able to connect as that user to all hosts without a password prompt.</p>
<p>You can also use <code>gpssh-exkeys</code> to enable passwordless SSH for additional users, <code>root</code>, for example.</p>
<p>The <code>gpssh-exkeys</code> utility has the following prerequisites:</p>
<ul>
<li>The user must have an account on the master, standby, and every segment host in the SynxDB cluster.</li>
<li>The user must have an <code>id_rsa</code> SSH key pair installed on the master host.</li>
<li>The user must be able to connect with SSH from the master host to every other host machine without entering a password. (This is called “1-<em>n</em> passwordless SSH.”)</li>
</ul>
<p>You can enable 1-<em>n</em> passwordless SSH using the <code>ssh-copy-id</code> command to add the user’s public key to each host’s <code>authorized_keys</code> file. The <code>gpssh-exkeys</code> utility enables “<em>n</em>-<em>n</em> passwordless SSH,” which allows the user to connect with SSH from any host to any other host in the cluster without a password.</p>
<p>To specify the hosts involved in an SSH key exchange, use the <code>-f</code> option to specify a file containing a list of host names (recommended), or use the <code>-h</code> option to name single host names on the command-line. At least one host name (<code>-h</code>) or a host file (<code>-f</code>) is required. Note that the local host is included in the key exchange by default.</p>
<p>To specify new expansion hosts to be added to an existing SynxDB system, use the <code>-e</code> and <code>-x</code> options. The <code>-e</code> option specifies a file containing a list of existing hosts in the system that have already exchanged SSH keys. The <code>-x</code> option specifies a file containing a list of new hosts that need to participate in the SSH key exchange.</p>
<p>The <code>gpssh-exkeys</code> utility performs key exchange using the following steps:</p>
<ul>
<li>Adds the user’s public key to the user’s own <code>authorized_keys</code> file on the current host.</li>
<li>Updates the <code>known_hosts</code> file of the current user with the host key of each host specified using the <code>-h</code>, <code>-f</code>, <code>-e</code>, and <code>-x</code> options.</li>
<li>Connects to each host using <code>ssh</code> and obtains the user’s <code>authorized_keys</code>, <code>known_hosts</code>, and <code>id_rsa.pub</code> files.</li>
<li>Adds keys from the <code>id_rsa.pub</code> files obtained from each host to the <code>authorized_keys</code> file of the current user.</li>
<li>Updates the <code>authorized_keys</code>, <code>known_hosts</code>, and <code>id_rsa.pub</code> files on all hosts with new host information (if any).</li>
</ul>
<h2 id="options"><a class="header" href="#options"><a id="section4"></a>Options</a></h2>
<h3 id="-e-hostfile_exkeys"><a class="header" href="#-e-hostfile_exkeys">-e hostfile_exkeys</a></h3>
<p>When doing a system expansion, this is the name and location of a file containing all configured host names and host addresses (interface names) for each host in your current SynxDB system (master, standby master, and segments), one name per line without blank lines or extra spaces. Hosts specified in this file cannot be specified in the host file used with <code>-x</code>.</p>
<h3 id="-f-hostfile_exkeys"><a class="header" href="#-f-hostfile_exkeys">-f hostfile_exkeys</a></h3>
<p>Specifies the name and location of a file containing all configured host names and host addresses (interface names) for each host in your SynxDB system (master, standby master and segments), one name per line without blank lines or extra spaces.</p>
<h3 id="-h-hostname"><a class="header" href="#-h-hostname">-h hostname</a></h3>
<p>Specifies a single host name (or host address) that will participate in the SSH key exchange. You can use the <code>-h</code> option multiple times to specify multiple host names and host addresses.</p>
<h3 id="version"><a class="header" href="#version">–version</a></h3>
<p>Displays the version of this utility.</p>
<h3 id="-x-hostfile_gpexpand"><a class="header" href="#-x-hostfile_gpexpand">-x hostfile_gpexpand</a></h3>
<p>When doing a system expansion, this is the name and location of a file containing all configured host names and host addresses (interface names) for each new segment host you are adding to your SynxDB system, one name per line without blank lines or extra spaces. Hosts specified in this file cannot be specified in the host file used with <code>-e</code>.</p>
<h3 id="--help"><a class="header" href="#--help">-? (help)</a></h3>
<p>Displays the online help.</p>
<h2 id="examples"><a class="header" href="#examples"><a id="section5"></a>Examples</a></h2>
<p>Exchange SSH keys between all host names and addresses listed in the file <code>hostfile_exkeys</code>:</p>
<pre><code>$ gpssh-exkeys -f hostfile_exkeys
</code></pre>
<p>Exchange SSH keys between the hosts <code>sdw1</code>, <code>sdw2</code>, and <code>sdw3</code>:</p>
<pre><code>$ gpssh-exkeys -h sdw1 -h sdw2 -h sdw3
</code></pre>
<p>Exchange SSH keys between existing hosts <code>sdw1</code>, <code>sdw2</code>, and <code>sdw3</code>, and new hosts <code>sdw4</code> and <code>sdw5</code> as part of a system expansion operation:</p>
<pre><code>$ cat hostfile_exkeys
mdw
mdw-1
mdw-2
smdw
smdw-1
smdw-2
sdw1
sdw1-1
sdw1-2
sdw2
sdw2-1
sdw2-2
sdw3
sdw3-1
sdw3-2
$ cat hostfile_gpexpand
sdw4
sdw4-1
sdw4-2
sdw5
sdw5-1
sdw5-2
$ gpssh-exkeys -e hostfile_exkeys -x hostfile_gpexpand
</code></pre>
<h2 id="see-also"><a class="header" href="#see-also"><a id="section6"></a>See Also</a></h2>
<p><a href="gpssh.html">gpssh</a>, <a href="gpscp.html">gpscp</a></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../utility_guide/ref/gpssh.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../utility_guide/ref/gpstart.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../utility_guide/ref/gpssh.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../utility_guide/ref/gpstart.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
