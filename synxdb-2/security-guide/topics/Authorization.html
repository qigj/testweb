<!DOCTYPE HTML>
<html lang="en" class="ayu sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Configuring Database Authorization - SynxDB 2 Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "ayu";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">SynxDB 2 Documentation</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <a href="https://www.synxdata.com/"><img id="fa fa-print" src="../../SYNX-Text-and-Circular-Logo-142x28-White-text-Black-background.png" alt="Synx Data Labs Logo"/></a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="configuring-database-authorization"><a class="header" href="#configuring-database-authorization">Configuring Database Authorization</a></h1>
<p>Describes how to restrict authorization access to database data at the user level by using roles and permissions.</p>
<h2 id="access-permissions-and-roles"><a class="header" href="#access-permissions-and-roles"><a id="topic_k35_qtx_kr"></a>Access Permissions and Roles</a></h2>
<p>SynxDB manages database access permissions using <em>roles</em>. The concept of roles subsumes the concepts of users and groups. A role can be a database user, a group, or both. Roles can own database objects (for example, tables) and can assign privileges on those objects to other roles to control access to the objects. Roles can be members of other roles, thus a member role can inherit the object privileges of its parent role.</p>
<p>Every SynxDB system contains a set of database roles (users and groups). Those roles are separate from the users and groups managed by the operating system on which the server runs. However, for convenience you may want to maintain a relationship between operating system user names and SynxDB role names, since many of the client applications use the current operating system user name as the default.</p>
<p>In SynxDB, users log in and connect through the master instance, which verifies their role and access privileges. The master then issues out commands to the segment instances behind the scenes using the currently logged in role.</p>
<p>Roles are defined at the system level, so they are valid for all databases in the system.</p>
<p>To bootstrap the SynxDB system, a freshly initialized system always contains one predefined superuser role (also referred to as the system user). This role will have the same name as the operating system user that initialized the SynxDB system. Customarily, this role is named <code>gpadmin</code>. To create more roles you first must connect as this initial role.</p>
<h2 id="managing-object-privileges"><a class="header" href="#managing-object-privileges"><a id="managing_obj_priv"></a>Managing Object Privileges</a></h2>
<p>When an object (table, view, sequence, database, function, language, schema, or tablespace) is created, it is assigned an owner. The owner is normally the role that ran the creation statement. For most kinds of objects, the initial state is that only the owner (or a superuser) can do anything with the object. To allow other roles to use it, privileges must be granted. SynxDB supports the following privileges for each object type:</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">Object Type</th><th style="text-align: left">Privileges</th></tr></thead><tbody>
<tr><td style="text-align: left">Tables, Views, Sequences</td><td style="text-align: left"><code>SELECT</code><br/><code>INSERT</code><br/><code>UPDATE</code><br/><code>DELETE</code><br/><code>RULE</code><br/><code>ALL</code></td></tr>
<tr><td style="text-align: left">External Tables</td><td style="text-align: left"><code>SELECT</code><br/><code>RULE</code><br/><code>ALL</code></td></tr>
<tr><td style="text-align: left">Databases</td><td style="text-align: left"><code>CONNECT</code><br/><code>CREATE</code><br/><code>TEMPORARY</code> or <code>TEMP</code><br/><code>ALL</code></td></tr>
<tr><td style="text-align: left">Functions</td><td style="text-align: left"><code>EXECUTE</code></td></tr>
<tr><td style="text-align: left">Procedural Languages</td><td style="text-align: left"><code>USAGE</code></td></tr>
<tr><td style="text-align: left">Schemas</td><td style="text-align: left"><code>CREATE</code><br/><code>USAGE</code><br/><code>ALL</code></td></tr>
</tbody></table>
</div>
<p>Privileges must be granted for each object individually. For example, granting <code>ALL</code> on a database does not grant full access to the objects within that database. It only grants all of the database-level privileges (<code>CONNECT</code>, <code>CREATE</code>, <code>TEMPORARY</code>) to the database itself.</p>
<p>Use the <code>GRANT</code> SQL command to give a specified role privileges on an object. For example:</p>
<pre><code>=# GRANT INSERT ON mytable TO jsmith; 
</code></pre>
<p>To revoke privileges, use the <code>REVOKE</code> command. For example:</p>
<pre><code>=# REVOKE ALL PRIVILEGES ON mytable FROM jsmith; 
</code></pre>
<p>You can also use the <code>DROP OWNED</code> and <code>REASSIGN OWNED</code> commands for managing objects owned by deprecated roles. Only an object’s owner or a superuser can drop an object or reassign ownership.) For example:</p>
<pre><code> =# REASSIGN OWNED BY sally TO bob;
 =# DROP OWNED BY visitor; 
</code></pre>
<h2 id="about-object-access-privileges"><a class="header" href="#about-object-access-privileges"><a id="obj-access"></a>About Object Access Privileges</a></h2>
<p>SynxDB access control corresponds roughly to the Orange Book ‘C2’ level of security, not the ‘B1’ level. SynxDB currently supports access privileges at the object level. SynxDB does not support row-level access or row-level, labeled security.</p>
<p>You can simulate row-level access by using views to restrict the rows that are selected. You can simulate row-level labels by adding an extra column to the table to store sensitivity information, and then using views to control row-level access based on this column. You can then grant roles access to the views rather than the base table. While these workarounds do not provide the same as “B1” level security, they may still be a viable alternative for many organizations.</p>
<h2 id="about-password-encryption-in-synxdb"><a class="header" href="#about-password-encryption-in-synxdb"><a id="password-encryption"></a>About Password Encryption in SynxDB</a></h2>
<p>The available password encryption methods in SynxDB are SCRAM-SHA-256, SHA-256, and MD5 (the default).</p>
<p>You can set your chosen encryption method system-wide or on a per-session basis.</p>
<h3 id="using-scram-sha-256-password-encryption"><a class="header" href="#using-scram-sha-256-password-encryption"><a id="using-scram-256"></a>Using SCRAM-SHA-256 Password Encryption</a></h3>
<p>To use SCRAM-SHA-256 password encryption, you must set a server configuration parameter either at the system or the session level. This section outlines how to use a server parameter to implement SCRAM-SHA-256 encrypted password storage.</p>
<p>Note that in order to use SCRAM-SHA-256 encryption for password storage, the <code>pg_hba.conf</code> client authentication method must be set to <code>scram-sha-256</code> rather than the default, <code>md5</code>.</p>
<h3 id="setting-the-scram-sha-256-password-hash-algorithm-system-wide"><a class="header" href="#setting-the-scram-sha-256-password-hash-algorithm-system-wide"><a id="scram-system-wide"></a>Setting the SCRAM-SHA-256 Password Hash Algorithm System-wide</a></h3>
<p>To set the <code>password_hash_algorithm</code> server parameter on a complete SynxDB system (master and its segments):</p>
<ol>
<li>
<p>Log in to your SynxDB instance as a superuser.</p>
</li>
<li>
<p>Execute <code>gpconfig</code> with the <code>password_hash_algorithm</code> set to SCRAM-SHA-256:</p>
<pre><code>$ gpconfig -c password_hash_algorithm -v 'SCRAM-SHA-256' 
</code></pre>
</li>
<li>
<p>Verify the setting:</p>
<pre><code>$ gpconfig -s
</code></pre>
<p>You will see:</p>
<pre><code>Master value: SCRAM-SHA-256
Segment value: SCRAM-SHA-256 
</code></pre>
</li>
</ol>
<h3 id="setting-the-scram-sha-256-password-hash-algorithm-for-an-individual-session"><a class="header" href="#setting-the-scram-sha-256-password-hash-algorithm-for-an-individual-session"><a id="scram-individual_session"></a>Setting the SCRAM-SHA-256 Password Hash Algorithm for an Individual Session</a></h3>
<p>To set the <code>password_hash_algorithm</code> server parameter for an individual session:</p>
<ol>
<li>
<p>Log in to your SynxDB instance as a superuser.</p>
</li>
<li>
<p>Set the <code>password_hash_algorithm</code> to SCRAM-SHA-256:</p>
<pre><code># set password_hash_algorithm = 'SCRAM-SHA-256'
  
</code></pre>
</li>
<li>
<p>Verify the setting:</p>
<pre><code># show password_hash_algorithm;
</code></pre>
<p>You will see:</p>
<pre><code>SCRAM-SHA-256 
</code></pre>
</li>
</ol>
<h3 id="using-sha-256-password-encryption"><a class="header" href="#using-sha-256-password-encryption"><a id="using-ssh-256"></a>Using SHA-256 Password Encryption</a></h3>
<p>To use SHA-256 password encryption, you must set a server configuration parameter either at the system or the session level. This section outlines how to use a server parameter to implement SHA-256 encrypted password storage.</p>
<p>Note that in order to use SHA-256 encryption for password storage, the <code>pg_hba.conf</code> client authentication method must be set to <code>password</code> rather than the default, <code>md5</code>. (See <a href="Authenticate.html#config_ssl_client_conn">Configuring the SSL Client Connection</a> for more details.) <strong>With this authentication setting, the password is transmitted in clear text over the network; it is highly recommend that you set up SSL to encrypt the client server communication channel.</strong></p>
<h4 id="setting-the-sha-256-password-hash-algorithm-system-wide"><a class="header" href="#setting-the-sha-256-password-hash-algorithm-system-wide"><a id="system-wide"></a>Setting the SHA-256 Password Hash Algorithm System-wide</a></h4>
<p>To set the <code>password_hash_algorithm</code> server parameter on a complete SynxDB system (master and its segments):</p>
<ol>
<li>
<p>Log in to your SynxDB instance as a superuser.</p>
</li>
<li>
<p>Execute <code>gpconfig</code> with the <code>password_hash_algorithm</code> set to SHA-256:</p>
<pre><code>$ gpconfig -c password_hash_algorithm -v 'SHA-256' 
</code></pre>
</li>
<li>
<p>Verify the setting:</p>
<pre><code>$ gpconfig -s
</code></pre>
<p>You will see:</p>
<pre><code>Master value: SHA-256
Segment value: SHA-256 
</code></pre>
</li>
</ol>
<h4 id="setting-the-sha-256-password-hash-algorithm-for-an-individual-session"><a class="header" href="#setting-the-sha-256-password-hash-algorithm-for-an-individual-session"><a id="individual_session"></a>Setting the SHA-256 Password Hash Algorithm for an Individual Session</a></h4>
<p>To set the <code>password_hash_algorithm</code> server parameter for an individual session:</p>
<ol>
<li>
<p>Log in to your SynxDB instance as a superuser.</p>
</li>
<li>
<p>Set the <code>password_hash_algorithm</code> to SHA-256:</p>
<pre><code># set password_hash_algorithm = 'SHA-256'
  
</code></pre>
</li>
<li>
<p>Verify the setting:</p>
<pre><code># show password_hash_algorithm;
</code></pre>
<p>You will see:</p>
<pre><code>SHA-256 
</code></pre>
</li>
</ol>
<h4 id="example"><a class="header" href="#example"><a id="sha256-example"></a>Example</a></h4>
<p>An example of how to use and verify the <code>SHA-256</code> <code>password_hash_algorithm</code> follows:</p>
<ol>
<li>
<p>Log in as a super user and verify the password hash algorithm setting:</p>
<pre><code>SHOW password_hash_algorithm 
 password_hash_algorithm 
 ------------------------------- 
 SHA-256
</code></pre>
</li>
<li>
<p>Create a new role with password that has login privileges.</p>
<pre><code>CREATE ROLE testdb WITH PASSWORD 'testdb12345#' LOGIN; 
</code></pre>
</li>
<li>
<p>Change the client authentication method to allow for storage of SHA-256 encrypted passwords:</p>
<p>Open the <code>pg_hba.conf</code> file on the master and add the following line:</p>
<pre><code>host all testdb 0.0.0.0/0 password
</code></pre>
</li>
<li>
<p>Restart the cluster.</p>
</li>
<li>
<p>Log in to the database as the user just created, <code>testdb</code>.</p>
<pre><code>psql -U testdb
</code></pre>
</li>
<li>
<p>Enter the correct password at the prompt.</p>
</li>
<li>
<p>Verify that the password is stored as a SHA-256 hash.</p>
<p>Password hashes are stored in <code>pg_authid.rolpasswod</code>.</p>
</li>
<li>
<p>Log in as the super user.</p>
</li>
<li>
<p>Execute the following query:</p>
<pre><code># SELECT rolpassword FROM pg_authid WHERE rolname = 'testdb';
Rolpassword
-----------
sha256&lt;64 hexadecimal characters&gt;
</code></pre>
</li>
</ol>
<h2 id="restricting-access-by-time"><a class="header" href="#restricting-access-by-time"><a id="time-based-restriction"></a>Restricting Access by Time</a></h2>
<p>SynxDB enables the administrator to restrict access to certain times by role. Use the <code>CREATE ROLE</code> or <code>ALTER ROLE</code> commands to specify time-based constraints.</p>
<p>Access can be restricted by day or by day and time. The constraints are removable without deleting and recreating the role.</p>
<p>Time-based constraints only apply to the role to which they are assigned. If a role is a member of another role that contains a time constraint, the time constraint is not inherited.</p>
<p>Time-based constraints are enforced only during login. The <code>SET ROLE</code> and <code>SET SESSION AUTHORIZATION</code> commands are not affected by any time-based constraints.</p>
<p>Superuser or <code>CREATEROLE</code> privileges are required to set time-based constraints for a role. No one can add time-based constraints to a superuser.</p>
<p>There are two ways to add time-based constraints. Use the keyword <code>DENY</code> in the <code>CREATE ROLE</code> or <code>ALTER ROLE</code> command followed by one of the following.</p>
<ul>
<li>A day, and optionally a time, when access is restricted. For example, no access on Wednesdays.</li>
<li>An interval—that is, a beginning and ending day and optional time—when access is restricted. For example, no access from Wednesday 10 p.m. through Thursday at 8 a.m.</li>
</ul>
<p>You can specify more than one restriction; for example, no access Wednesdays at any time and no access on Fridays between 3:00 p.m. and 5:00 p.m. </p>
<p>There are two ways to specify a day. Use the word <code>DAY</code> followed by either the English term for the weekday, in single quotation marks, or a number between 0 and 6, as shown in the table below.</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: left">English Term</th><th style="text-align: left">Number</th></tr></thead><tbody>
<tr><td style="text-align: left">DAY ‘Sunday’</td><td style="text-align: left">DAY 0</td></tr>
<tr><td style="text-align: left">DAY ‘Monday’</td><td style="text-align: left">DAY 1</td></tr>
<tr><td style="text-align: left">DAY ‘Tuesday’</td><td style="text-align: left">DAY 2</td></tr>
<tr><td style="text-align: left">DAY ‘Wednesday’</td><td style="text-align: left">DAY 3</td></tr>
<tr><td style="text-align: left">DAY ‘Thursday’</td><td style="text-align: left">DAY 4</td></tr>
<tr><td style="text-align: left">DAY ‘Friday’</td><td style="text-align: left">DAY 5</td></tr>
<tr><td style="text-align: left">DAY ‘Saturday’</td><td style="text-align: left">DAY 6</td></tr>
</tbody></table>
</div>
<p>A time of day is specified in either 12- or 24-hour format. The word <code>TIME</code> is followed by the specification in single quotation marks. Only hours and minutes are specified and are separated by a colon ( : ). If using a 12-hour format, add <code>AM</code> or <code>PM</code> at the end. The following examples show various time specifications.</p>
<pre><code>TIME '14:00'     # 24-hour time implied
TIME '02:00 PM'  # 12-hour time specified by PM 
TIME '02:00'     # 24-hour time implied. This is equivalent to TIME '02:00 AM'. 
</code></pre>
<blockquote>
<p><strong>Important</strong> Time-based authentication is enforced with the server time. Timezones are disregarded.</p>
</blockquote>
<p>To specify an interval of time during which access is denied, use two day/time specifications with the words <code>BETWEEN</code> and <code>AND</code>, as shown. <code>DAY</code> is always required.</p>
<pre><code>BETWEEN DAY 'Monday' AND DAY 'Tuesday' 

BETWEEN DAY 'Monday' TIME '00:00' AND
        DAY 'Monday' TIME '01:00'

BETWEEN DAY 'Monday' TIME '12:00 AM' AND
        DAY 'Tuesday' TIME '02:00 AM'

BETWEEN DAY 'Monday' TIME '00:00' AND
        DAY 'Tuesday' TIME '02:00'
        DAY 2 TIME '02:00'
</code></pre>
<p>The last three statements are equivalent.</p>
<blockquote>
<p><strong>Note</strong> Intervals of days cannot wrap past Saturday.</p>
</blockquote>
<p>The following syntax is not correct:</p>
<pre><code>DENY BETWEEN DAY 'Saturday' AND DAY 'Sunday'
</code></pre>
<p>The correct specification uses two DENY clauses, as follows:</p>
<pre><code>DENY DAY 'Saturday'
DENY DAY 'Sunday'
</code></pre>
<p>The following examples demonstrate creating a role with time-based constraints and modifying a role to add time-based constraints. Only the statements needed for time-based constraints are shown. For more details on creating and altering roles see the descriptions of <code>CREATE ROLE</code> and <code>ALTER ROLE</code> in the <em>SynxDB Reference Guide</em>.</p>
<h3 id="example-1--create-a-new-role-with-time-based-constraints"><a class="header" href="#example-1--create-a-new-role-with-time-based-constraints"><a id="ex1"></a>Example 1 – Create a New Role with Time-based Constraints</a></h3>
<p>No access is allowed on weekends.</p>
<pre><code> CREATE ROLE generaluser
 DENY DAY 'Saturday'
 DENY DAY 'Sunday'
 ... 
</code></pre>
<h3 id="example-2--alter-a-role-to-add-time-based-constraints"><a class="header" href="#example-2--alter-a-role-to-add-time-based-constraints"><a id="ex2"></a>Example 2 – Alter a Role to Add Time-based Constraints</a></h3>
<p>No access is allowed every night between 2:00 a.m. and 4:00 a.m.</p>
<pre><code>ALTER ROLE generaluser
 DENY BETWEEN DAY 'Monday' TIME '02:00' AND DAY 'Monday' TIME '04:00'
 DENY BETWEEN DAY 'Tuesday' TIME '02:00' AND DAY 'Tuesday' TIME '04:00'
 DENY BETWEEN DAY 'Wednesday' TIME '02:00' AND DAY 'Wednesday' TIME '04:00'
 DENY BETWEEN DAY 'Thursday' TIME '02:00' AND DAY 'Thursday' TIME '04:00'
 DENY BETWEEN DAY 'Friday' TIME '02:00' AND DAY 'Friday' TIME '04:00'
 DENY BETWEEN DAY 'Saturday' TIME '02:00' AND DAY 'Saturday' TIME '04:00'
 DENY BETWEEN DAY 'Sunday' TIME '02:00' AND DAY 'Sunday' TIME '04:00'
  ... 
</code></pre>
<h3 id="excample-3--alter-a-role-to-add-time-based-constraints"><a class="header" href="#excample-3--alter-a-role-to-add-time-based-constraints"><a id="ex3"></a>Excample 3 – Alter a Role to Add Time-based Constraints</a></h3>
<p>No access is allowed Wednesdays or Fridays between 3:00 p.m. and 5:00 p.m.</p>
<pre><code>ALTER ROLE generaluser
 DENY DAY 'Wednesday'
 DENY BETWEEN DAY 'Friday' TIME '15:00' AND DAY 'Friday' TIME '17:00'
 
</code></pre>
<h2 id="dropping-a-time-based-restriction"><a class="header" href="#dropping-a-time-based-restriction"><a id="drop_timebased_restriction"></a>Dropping a Time-based Restriction</a></h2>
<p>To remove a time-based restriction, use the ALTER ROLE command. Enter the keywords DROP DENY FOR followed by a day/time specification to drop.</p>
<pre><code>DROP DENY FOR DAY 'Sunday' 
</code></pre>
<p>Any constraint containing all or part of the conditions in a DROP clause is removed. For example, if an existing constraint denies access on Mondays and Tuesdays, and the DROP clause removes constraints for Mondays, the existing constraint is completely dropped. The DROP clause completely removes all constraints that overlap with the constraint in the drop clause. The overlapping constraints are completely removed even if they contain more restrictions that the restrictions mentioned in the DROP clause.</p>
<p>Example 1 - Remove a Time-based Restriction from a Role</p>
<pre><code> ALTER ROLE generaluser
 DROP DENY FOR DAY 'Monday'
    ... 
</code></pre>
<p>This statement would remove all constraints that overlap with a Monday constraint for the role <code>generaluser</code> in Example 2, even if there are additional constraints.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../security-guide/topics/Authenticate.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../security-guide/topics/Auditing.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../security-guide/topics/Authenticate.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../security-guide/topics/Auditing.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
