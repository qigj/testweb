<!DOCTYPE HTML>
<html lang="en" class="ayu sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>CREATE LANGUAGE - SynxDB 2 Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "ayu";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">SynxDB 2 Documentation</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <a href="https://www.synxdata.com/"><img id="fa fa-print" src="../../SYNX-Text-and-Circular-Logo-142x28-White-text-Black-background.png" alt="Synx Data Labs Logo"/></a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="create-language"><a class="header" href="#create-language">CREATE LANGUAGE</a></h1>
<p>Defines a new procedural language.</p>
<h2 id="synopsis"><a class="header" href="#synopsis"><a id="section2"></a>Synopsis</a></h2>
<pre><code class="language-{#sql_command_synopsis}">CREATE [ OR REPLACE ] [ PROCEDURAL ] LANGUAGE &lt;name&gt;

CREATE [ OR REPLACE ] [ TRUSTED ] [ PROCEDURAL ] LANGUAGE &lt;name&gt;
    HANDLER &lt;call_handler&gt; [ INLINE &lt;inline_handler&gt; ] 
   [ VALIDATOR &lt;valfunction&gt; ]
            
</code></pre>
<h2 id="description"><a class="header" href="#description"><a id="section3"></a>Description</a></h2>
<p><code>CREATE LANGUAGE</code> registers a new procedural language with a SynxDB database. Subsequently, functions and trigger procedures can be defined in this new language.</p>
<blockquote>
<p><strong>Note</strong> Procedural languages for SynxDB have been made into “extensions,” and should therefore be installed with <a href="CREATE_EXTENSION.html">CREATE EXTENSION</a>, not <code>CREATE LANGUAGE</code>. Using <code>CREATE LANGUAGE</code> directly should be restricted to extension installation scripts. If you have a “bare” language in your database, perhaps as a result of an upgrade, you can convert it to an extension using <code>CREATE EXTENSION langname FROM unpackaged</code>.</p>
</blockquote>
<p>Superusers can register a new language with a SynxDB database. A database owner can also register within that database any language listed in the <code>pg_pltemplate</code> catalog in which the <code>tmpldbacreate</code> field is true. The default configuration allows only trusted languages to be registered by database owners. The creator of a language becomes its owner and can later drop it, rename it, or assign ownership to a new owner.</p>
<p><code>CREATE OR REPLACE LANGUAGE</code> will either create a new language, or replace an existing definition. If the language already exists, its parameters are updated according to the values specified or taken from pg_pltemplate, but the language’s ownership and permissions settings do not change, and any existing functions written in the language are assumed to still be valid. In addition to the normal privilege requirements for creating a language, the user must be superuser or owner of the existing language. The <code>REPLACE</code> case is mainly meant to be used to ensure that the language exists. If the language has a pg_pltemplate entry then <code>REPLACE</code> will not actually change anything about an existing definition, except in the unusual case where the pg_pltemplate entry has been modified since the language was created.</p>
<p><code>CREATE LANGUAGE</code> effectively associates the language name with handler function(s) that are responsible for running functions written in that language. For a function written in a procedural language (a language other than C or SQL), the database server has no built-in knowledge about how to interpret the function’s source code. The task is passed to a special handler that knows the details of the language. The handler could either do all the work of parsing, syntax analysis, execution, and so on or it could serve as a bridge between SynxDB and an existing implementation of a programming language. The handler itself is a C language function compiled into a shared object and loaded on demand, just like any other C function. Therese procedural language packages are included in the standard SynxDB distribution: PL/pgSQL, PL/Perl, and PL/Python. Language handlers have also been added for PL/Java and PL/R, but those languages are not pre-installed with SynxDB. See the topic on <a href="https://www.postgresql.org/docs/9.4/xplang.html">Procedural Languages</a> in the PostgreSQL documentation for more information on developing functions using these procedural languages.</p>
<p>The PL/Perl, PL/Java, and PL/R libraries require the correct versions of Perl, Java, and R to be installed, respectively.</p>
<p>On RHEL and SUSE platforms, download the extensions and install them using the SynxDB Package Manager (<code>gppkg</code>) utility to ensure that all dependencies are installed as well as the extensions. See the SynxDB Utility Guide for details about <code>gppkg</code>.</p>
<p>There are two forms of the <code>CREATE LANGUAGE</code> command. In the first form, the user specifies the name of the desired language and the SynxDB server uses the <code>pg_pltemplate</code> system catalog to determine the correct parameters. In the second form, the user specifies the language parameters as well as the language name. You can use the second form to create a language that is not defined in <code>pg_pltemplate</code>.</p>
<p>When the server finds an entry in the <code>pg_pltemplate</code> catalog for the given language name, it will use the catalog data even if the command includes language parameters. This behavior simplifies loading of old dump files, which are likely to contain out-of-date information about language support functions.</p>
<h2 id="parameters"><a class="header" href="#parameters"><a id="section4"></a>Parameters</a></h2>
<h3 id="trusted"><a class="header" href="#trusted">TRUSTED</a></h3>
<p><code>TRUSTED</code> specifies that the language does not grant access to data that the user would not otherwise have. If this key word is omitted when registering the language, only users with the SynxDB superuser privilege can use this language to create new functions.</p>
<h3 id="procedural"><a class="header" href="#procedural">PROCEDURAL</a></h3>
<p>This is a noise word.</p>
<h3 id="name"><a class="header" href="#name">name</a></h3>
<p>The name of the new procedural language. The name must be unique among the languages in the database. Built-in support is included for <code>plpgsql</code>, <code>plperl</code>, and <code>plpythonu</code>. The languages <code>plpgsql</code> (PL/pgSQL) and <code>plpythonu</code> (PL/Python) are installed by default in SynxDB.</p>
<h3 id="handler-call_handler"><a class="header" href="#handler-call_handler">HANDLER call_handler</a></h3>
<p>Ignored if the server has an entry for the specified language name in <code>pg_pltemplate</code>. The name of a previously registered function that will be called to run the procedural language functions. The call handler for a procedural language must be written in a compiled language such as C with version 1 call convention and registered with SynxDB as a function taking no arguments and returning the <code>language_handler</code> type, a placeholder type that is simply used to identify the function as a call handler.</p>
<h3 id="inline-inline_handler"><a class="header" href="#inline-inline_handler">INLINE inline_handler</a></h3>
<p>The name of a previously registered function that is called to run an anonymous code block in this language that is created with the <a href="DO.html">DO</a> command. If an <code>inline_handler</code> function is not specified, the language does not support anonymous code blocks. The handler function must take one argument of type <code>internal</code>, which is the <a href="DO.html">DO</a> command internal representation. The function typically return <code>void</code>. The return value of the handler is ignored.</p>
<h3 id="validator-valfunction"><a class="header" href="#validator-valfunction">VALIDATOR valfunction</a></h3>
<p>Ignored if the server has an entry for the specified language name in <code>pg_pltemplate</code>. The name of a previously registered function that will be called to run the procedural language functions. The call handler for a procedural language must be written in a compiled language such as C with version 1 call convention and registered with SynxDB as a function taking no arguments and returning the <code>language_handler</code> type, a placeholder type that is simply used to identify the function as a call handler.</p>
<h2 id="notes"><a class="header" href="#notes"><a id="section5"></a>Notes</a></h2>
<p>The PL/pgSQL language is already registered in all databases by default. The PL/Python language extension is installed but not registered.</p>
<p>The system catalog <code>pg_language</code> records information about the currently installed languages.</p>
<p>To create functions in a procedural language, a user must have the <code>USAGE</code> privilege for the language. By default, <code>USAGE</code> is granted to <code>PUBLIC</code> (everyone) for trusted languages. This may be revoked if desired.</p>
<p>Procedural languages are local to individual databases. You create and drop languages for individual databases.</p>
<p>The call handler function and the validator function (if any) must already exist if the server does not have an entry for the language in <code>pg_pltemplate</code>. But when there is an entry, the functions need not already exist; they will be automatically defined if not present in the database.</p>
<p>Any shared library that implements a language must be located in the same <code>LD_LIBRARY_PATH</code> location on all segment hosts in your SynxDB array.</p>
<h2 id="examples"><a class="header" href="#examples"><a id="section6"></a>Examples</a></h2>
<p>The preferred way of creating any of the standard procedural languages is to use <code>CREATE EXTENSION</code> instead of <code>CREATE LANGUAGE</code>. For example:</p>
<pre><code>CREATE EXTENSION plperl;
</code></pre>
<p>For a language not known in the <code>pg_pltemplate</code> catalog:</p>
<pre><code>CREATE FUNCTION plsample_call_handler() RETURNS 
language_handler
    AS '$libdir/plsample'
    LANGUAGE C;
CREATE LANGUAGE plsample
    HANDLER plsample_call_handler;
</code></pre>
<h2 id="compatibility"><a class="header" href="#compatibility"><a id="section7"></a>Compatibility</a></h2>
<p><code>CREATE LANGUAGE</code> is a SynxDB extension.</p>
<h2 id="see-also"><a class="header" href="#see-also"><a id="section8"></a>See Also</a></h2>
<p><a href="ALTER_LANGUAGE.html">ALTER LANGUAGE</a>, <a href="CREATE_EXTENSION.html">CREATE EXTENSION</a>, <a href="CREATE_FUNCTION.html">CREATE FUNCTION</a>, <a href="DROP_EXTENSION.html">DROP EXTENSION</a>, <a href="DROP_LANGUAGE.html">DROP LANGUAGE</a>, <a href="GRANT.html">GRANT</a> <a href="DO.html">DO</a></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../ref_guide/sql_commands/CREATE_INDEX.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../ref_guide/sql_commands/CREATE_MATERIALIZED_VIEW.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../ref_guide/sql_commands/CREATE_INDEX.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../ref_guide/sql_commands/CREATE_MATERIALIZED_VIEW.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
