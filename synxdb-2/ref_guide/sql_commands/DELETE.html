<!DOCTYPE HTML>
<html lang="en" class="ayu sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>DELETE - SynxDB 2 Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "ayu";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">SynxDB 2 Documentation</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <a href="https://www.synxdata.com/"><img id="fa fa-print" src="../../SYNX-Text-and-Circular-Logo-142x28-White-text-Black-background.png" alt="Synx Data Labs Logo"/></a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="delete"><a class="header" href="#delete">DELETE</a></h1>
<p>Deletes rows from a table.</p>
<h2 id="synopsis"><a class="header" href="#synopsis"><a id="section2"></a>Synopsis</a></h2>
<pre><code class="language-{#sql_command_synopsis}">[ WITH [ RECURSIVE ] &lt;with_query&gt; [, ...] ]
DELETE FROM [ONLY] &lt;table&gt; [[AS] &lt;alias&gt;]
      [USING &lt;usinglist&gt;]
      [WHERE &lt;condition&gt; | WHERE CURRENT OF &lt;cursor_name&gt;]
      [RETURNING * | &lt;output_expression&gt; [[AS] &lt;output_name&gt;] [, …]]
</code></pre>
<h2 id="description"><a class="header" href="#description"><a id="section3"></a>Description</a></h2>
<p><code>DELETE</code> deletes rows that satisfy the <code>WHERE</code> clause from the specified table. If the <code>WHERE</code> clause is absent, the effect is to delete all rows in the table. The result is a valid, but empty table.</p>
<p>By default, <code>DELETE</code> will delete rows in the specified table and all its child tables. If you wish to delete only from the specific table mentioned, you must use the <code>ONLY</code> clause.</p>
<p>There are two ways to delete rows in a table using information contained in other tables in the database: using sub-selects, or specifying additional tables in the <code>USING</code> clause. Which technique is more appropriate depends on the specific circumstances.</p>
<p>If the <code>WHERE CURRENT OF</code> clause is specified, the row that is deleted is the one most recently fetched from the specified cursor.</p>
<p>The <code>WHERE CURRENT OF</code> clause is not supported with replicated tables.</p>
<p>The optional <code>RETURNING</code> clause causes <code>DELETE</code> to compute and return value(s) based on each row actually deleted. Any expression using the table’s columns, and/or columns of other tables mentioned in <code>USING</code>, can be computed. The syntax of the <code>RETURNING</code> list is identical to that of the output list of <code>SELECT</code>.</p>
<blockquote>
<p><strong>Note</strong> The <code>RETURNING</code> clause is not supported when deleting from append-optimized tables.</p>
</blockquote>
<p>You must have the <code>DELETE</code> privilege on the table to delete from it.</p>
<blockquote>
<p><strong>Note</strong> As the default, SynxDB acquires an <code>EXCLUSIVE</code> lock on tables for <code>DELETE</code> operations on heap tables. When the Global Deadlock Detector is enabled, the lock mode for <code>DELETE</code> operations on heap tables is <code>ROW EXCLUSIVE</code>. See <a href="../../admin_guide/dml.html#topic_gdd">Global Deadlock Detector</a>.</p>
</blockquote>
<p><strong>Outputs</strong></p>
<p>On successful completion, a <code>DELETE</code> command returns a command tag of the form</p>
<pre><code>DELETE &lt;count&gt;
</code></pre>
<p>The count is the number of rows deleted. If count is 0, no rows were deleted by the query (this is not considered an error).</p>
<p>If the <code>DELETE</code> command contains a <code>RETURNING</code> clause, the result will be similar to that of a <code>SELECT</code> statement containing the columns and values defined in the <code>RETURNING</code> list, computed over the row(s) deleted by the command.</p>
<h2 id="parameters"><a class="header" href="#parameters"><a id="section5"></a>Parameters</a></h2>
<h3 id="with_query"><a class="header" href="#with_query">with_query</a></h3>
<p>The <code>WITH</code> clause allows you to specify one or more subqueries that can be referenced by name in the <code>DELETE</code> query.</p>
<p>For a <code>DELETE</code> command that includes a <code>WITH</code> clause, the clause can only contain <code>SELECT</code> statements, the <code>WITH</code> clause cannot contain a data-modifying command (<code>INSERT</code>, <code>UPDATE</code>, or <code>DELETE</code>).</p>
<p>See <a href="../../admin_guide/query/topics/CTE-query.html">WITH Queries (Common Table Expressions)</a> and <a href="SELECT.html">SELECT</a> for details.</p>
<h3 id="only"><a class="header" href="#only">ONLY</a></h3>
<p>If specified, delete rows from the named table only. When not specified, any tables inheriting from the named table are also processed.</p>
<h3 id="table"><a class="header" href="#table">table</a></h3>
<p>The name (optionally schema-qualified) of an existing table.</p>
<h3 id="alias"><a class="header" href="#alias">alias</a></h3>
<p>A substitute name for the target table. When an alias is provided, it completely hides the actual name of the table. For example, given <code>DELETE FROM foo AS f</code>, the remainder of the <code>DELETE</code> statement must refer to this table as <code>f</code> not <code>foo</code>.</p>
<h3 id="usinglist"><a class="header" href="#usinglist">usinglist</a></h3>
<p>A list of table expressions, allowing columns from other tables to appear in the <code>WHERE</code> condition. This is similar to the list of tables that can be specified in the <code>FROM</code> Clause of a <a href="SELECT.html">SELECT</a> statement; for example, an alias for the table name can be specified. Do not repeat the target table in the <code>usinglist</code>, unless you wish to set up a self-join.</p>
<h3 id="condition"><a class="header" href="#condition">condition</a></h3>
<p>An expression returning a value of type <code>boolean</code>, which determines the rows that are to be deleted.</p>
<h3 id="cursor_name"><a class="header" href="#cursor_name">cursor_name</a></h3>
<p>The name of the cursor to use in a <code>WHERE CURRENT OF</code> condition. The row to be deleted is the one most recently fetched from this cursor. The cursor must be a simple non-grouping query on the <code>DELETE</code> target table.</p>
<p><code>WHERE CURRENT OF</code> cannot be specified together with a Boolean condition.</p>
<p>The <code>DELETE...WHERE CURRENT OF</code> cursor statement can only be run on the server, for example in an interactive psql session or a script. Language extensions such as PL/pgSQL do not have support for updatable cursors.</p>
<p>See <a href="DECLARE.html">DECLARE</a> for more information about creating cursors.</p>
<h3 id="output_expression"><a class="header" href="#output_expression">output_expression</a></h3>
<p>An expression to be computed and returned by the <code>DELETE</code> command after each row is deleted. The expression can use any column names of the table or table(s) listed in <code>USING</code>. Write * to return all columns.</p>
<h3 id="output_name"><a class="header" href="#output_name">output_name</a></h3>
<p>A name to use for a returned column.</p>
<h2 id="notes"><a class="header" href="#notes"><a id="section6"></a>Notes</a></h2>
<p>SynxDB lets you reference columns of other tables in the <code>WHERE</code> condition by specifying the other tables in the <code>USING</code> clause. For example, to the name <code>Hannah</code> from the <code>rank</code> table, one might do:</p>
<pre><code>DELETE FROM rank USING names WHERE names.id = rank.id AND 
name = 'Hannah';
</code></pre>
<p>What is essentially happening here is a join between <code>rank</code> and <code>names</code>, with all successfully joined rows being marked for deletion. This syntax is not standard. However, this join style is usually easier to write and faster to run than a more standard sub-select style, such as:</p>
<pre><code>DELETE FROM rank WHERE id IN (SELECT id FROM names WHERE name 
= 'Hannah');
</code></pre>
<p>Execution of <code>UPDATE</code> and <code>DELETE</code> commands directly on a specific partition (child table) of a partitioned table is not supported. Instead, these commands must be run on the root partitioned table, the table created with the <code>CREATE TABLE</code> command.</p>
<p>For a partitioned table, all the child tables are locked during the <code>DELETE</code> operation when the Global Deadlock Detector is not enabled (the default). Only some of the leaf child tables are locked when the Global Deadlock Detector is enabled. For information about the Global Deadlock Detector, see <a href="../../admin_guide/dml.html#topic_gdd">Global Deadlock Detector</a>.</p>
<h2 id="examples"><a class="header" href="#examples"><a id="section7"></a>Examples</a></h2>
<p>Delete all films but musicals:</p>
<pre><code>DELETE FROM films WHERE kind &lt;&gt; 'Musical';
</code></pre>
<p>Clear the table films:</p>
<pre><code>DELETE FROM films;
</code></pre>
<p>Delete completed tasks, returning full details of the deleted rows:</p>
<pre><code>DELETE FROM tasks WHERE status = 'DONE' RETURNING *;
</code></pre>
<p>Delete using a join:</p>
<pre><code>DELETE FROM rank USING names WHERE names.id = rank.id AND 
name = 'Hannah';
</code></pre>
<h2 id="compatibility"><a class="header" href="#compatibility"><a id="section8"></a>Compatibility</a></h2>
<p>This command conforms to the SQL standard, except that the <code>USING</code> and <code>RETURNING</code> clauses are SynxDB extensions, as is the ability to use <code>WITH</code> with <code>DELETE</code>.</p>
<h2 id="see-also"><a class="header" href="#see-also"><a id="section9"></a>See Also</a></h2>
<p><a href="DECLARE.html">DECLARE</a>, <a href="TRUNCATE.html">TRUNCATE</a></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../ref_guide/sql_commands/DECLARE.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../ref_guide/sql_commands/DISCARD.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../ref_guide/sql_commands/DECLARE.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../ref_guide/sql_commands/DISCARD.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
