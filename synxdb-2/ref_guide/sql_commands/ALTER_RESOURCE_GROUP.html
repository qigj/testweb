<!DOCTYPE HTML>
<html lang="en" class="ayu sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>ALTER RESOURCE GROUP - SynxDB 2 Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "ayu";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">SynxDB 2 Documentation</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <a href="https://www.synxdata.com/"><img id="fa fa-print" src="../../SYNX-Text-and-Circular-Logo-142x28-White-text-Black-background.png" alt="Synx Data Labs Logo"/></a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="alter-resource-group"><a class="header" href="#alter-resource-group">ALTER RESOURCE GROUP</a></h1>
<p>Changes the limits of a resource group.</p>
<h2 id="synopsis"><a class="header" href="#synopsis"><a id="section2"></a>Synopsis</a></h2>
<pre><code class="language-{#sql_command_synopsis}">ALTER RESOURCE GROUP &lt;name&gt; SET &lt;group_attribute&gt; &lt;value&gt;
</code></pre>
<p>where group_attribute is one of:</p>
<pre><code>CONCURRENCY &lt;integer&gt;
CPU_RATE_LIMIT &lt;integer&gt; 
CPUSET &lt;master_cores&gt;;&lt;segment_cores&gt; 
MEMORY_LIMIT &lt;integer&gt;
MEMORY_SHARED_QUOTA &lt;integer&gt;
MEMORY_SPILL_RATIO &lt;integer&gt;
</code></pre>
<h2 id="description"><a class="header" href="#description"><a id="section3"></a>Description</a></h2>
<p><code>ALTER RESOURCE GROUP</code> changes the limits of a resource group. Only a superuser can alter a resource group.</p>
<p>You can set or reset the concurrency limit of a resource group that you create for roles to control the maximum number of active concurrent statements in that group. You can also reset the memory or CPU resources of a resource group to control the amount of memory or CPU resources that all queries submitted through the group can consume on each segment host.</p>
<p>When you alter the CPU resource management mode or limit of a resource group, the new mode or limit is immediately applied.</p>
<p>When you alter a memory limit of a resource group that you create for roles, the new resource limit is immediately applied if current resource usage is less than or equal to the new value and there are no running transactions in the resource group. If the current resource usage exceeds the new memory limit value, or if there are running transactions in other resource groups that hold some of the resource, then SynxDB defers assigning the new limit until resource usage falls within the range of the new value.</p>
<p>When you increase the memory limit of a resource group that you create for external components, the new resource limit is phased in as system memory resources become available. If you decrease the memory limit of a resource group that you create for external components, the behavior is component-specific. For example, if you decrease the memory limit of a resource group that you create for a PL/Container runtime, queries in a running container may fail with an out of memory error.</p>
<p>You can alter one limit type in a single <code>ALTER RESOURCE GROUP</code> call.</p>
<h2 id="parameters"><a class="header" href="#parameters"><a id="section4"></a>Parameters</a></h2>
<h3 id="name"><a class="header" href="#name">name</a></h3>
<p>The name of the resource group to alter.</p>
<h3 id="concurrency-integer"><a class="header" href="#concurrency-integer">CONCURRENCY integer</a></h3>
<p>The maximum number of concurrent transactions, including active and idle transactions, that are permitted for resource groups that you assign to roles. Any transactions submitted after the <code>CONCURRENCY</code> value limit is reached are queued. When a running transaction completes, the earliest queued transaction is run.</p>
<h3 id=""><a class="header" href="#"></a></h3>
<p>The <code>CONCURRENCY</code> value must be an integer in the range [0 .. <code>max_connections</code>]. The default <code>CONCURRENCY</code> value for a resource group that you create for roles is 20.</p>
<blockquote>
<p><strong>Note</strong> You cannot set the <code>CONCURRENCY</code> value for the <code>admin_group</code> to zero (0).</p>
</blockquote>
<h3 id="cpu_rate_limit-integer"><a class="header" href="#cpu_rate_limit-integer">CPU_RATE_LIMIT integer</a></h3>
<p>The percentage of CPU resources to allocate to this resource group. The minimum CPU percentage for a resource group is 1. The maximum is 100. The sum of the <code>CPU_RATE_LIMIT</code>s of all resource groups defined in the SynxDB cluster must not exceed 100.</p>
<p>If you alter the <code>CPU_RATE_LIMIT</code> of a resource group in which you previously configured a <code>CPUSET</code>, <code>CPUSET</code> is deactivated, the reserved CPU cores are returned to SynxDB, and <code>CPUSET</code> is set to -1.</p>
<h3 id="cpuset-master_coressegment_cores"><a class="header" href="#cpuset-master_coressegment_cores">CPUSET &lt;master_cores&gt;;&lt;segment_cores&gt;</a></h3>
<p>The CPU cores to reserve for this resource group on the master host and segment hosts. The CPU cores that you specify in must be available in the system and cannot overlap with any CPU cores that you specify for other resource groups.</p>
<p>Specify cores as a comma-separated list of single core numbers or core intervals. Define the master host cores first, followed by segment host cores, and separate the two with a semicolon. You must enclose the full core configuration in single quotes. For example, ‘1;1,3-4’ configures core 1 for the master host, and cores 1, 3, and 4 for the segment hosts.</p>
<p>If you alter the <code>CPUSET</code> value of a resource group for which you previously configured a <code>CPU_RATE_LIMIT</code>, <code>CPU_RATE_LIMIT</code> is deactivated, the reserved CPU resources are returned to SynxDB, and <code>CPU_RATE_LIMIT</code> is set to -1.</p>
<p>You can alter <code>CPUSET</code> for a resource group only after you have enabled resource group-based resource management for your SynxDB cluster.</p>
<h3 id="memory_limit-integer"><a class="header" href="#memory_limit-integer">MEMORY_LIMIT integer</a></h3>
<p>The percentage of SynxDB memory resources to reserve for this resource group. The minimum memory percentage for a resource group is 0. The maximum is 100. The default value is 0.</p>
<p>When <code>MEMORY_LIMIT</code> is 0, SynxDB reserves no memory for the resource group, but uses global shared memory to fulfill all memory requests in the group. If <code>MEMORY_LIMIT</code> is 0, <code>MEMORY_SPILL_RATIO</code> must also be 0.</p>
<p>The sum of the <code>MEMORY_LIMIT</code>s of all resource groups defined in the SynxDB cluster must not exceed 100. If this sum is less than 100, SynxDB allocates any unreserved memory to a resource group global shared memory pool.</p>
<h3 id="memory_shared_quota-integer"><a class="header" href="#memory_shared_quota-integer">MEMORY_SHARED_QUOTA integer</a></h3>
<p>The percentage of memory resources to share among transactions in the resource group. The minimum memory shared quota percentage for a resource group is 0. The maximum is 100. The default <code>MEMORY_SHARED_QUOTA</code> value is 80.</p>
<h3 id="memory_spill_ratio-integer"><a class="header" href="#memory_spill_ratio-integer">MEMORY_SPILL_RATIO integer</a></h3>
<p>The memory usage threshold for memory-intensive operators in a transaction. You can specify an integer percentage value from 0 to 100 inclusive. The default <code>MEMORY_SPILL_RATIO</code> value is 0. When <code>MEMORY_SPILL_RATIO</code> is 0, SynxDB uses the <a href="../config_params/guc-list.html"><code>statement_mem</code></a> server configuration parameter value to control initial query operator memory.</p>
<h2 id="notes"><a class="header" href="#notes"><a id="section5"></a>Notes</a></h2>
<p>Use <a href="CREATE_ROLE.html">CREATE ROLE</a> or <a href="ALTER_ROLE.html">ALTER ROLE</a> to assign a specific resource group to a role (user).</p>
<p>You cannot submit an <code>ALTER RESOURCE GROUP</code> command in an explicit transaction or sub-transaction.</p>
<h2 id="examples"><a class="header" href="#examples"><a id="section6"></a>Examples</a></h2>
<p>Change the active transaction limit for a resource group:</p>
<pre><code>ALTER RESOURCE GROUP rgroup1 SET CONCURRENCY 13;
</code></pre>
<p>Update the CPU limit for a resource group:</p>
<pre><code>ALTER RESOURCE GROUP rgroup2 SET CPU_RATE_LIMIT 45;
</code></pre>
<p>Update the memory limit for a resource group:</p>
<pre><code>ALTER RESOURCE GROUP rgroup3 SET MEMORY_LIMIT 30;
</code></pre>
<p>Update the memory spill ratio for a resource group:</p>
<pre><code>ALTER RESOURCE GROUP rgroup4 SET MEMORY_SPILL_RATIO 25;
</code></pre>
<p>Reserve CPU core 1 for a resource group on the master host and all segment hosts:</p>
<pre><code>ALTER RESOURCE GROUP rgroup5 SET CPUSET '1;1';
</code></pre>
<h2 id="compatibility"><a class="header" href="#compatibility"><a id="section7"></a>Compatibility</a></h2>
<p>The <code>ALTER RESOURCE GROUP</code> statement is a SynxDB extension. This command does not exist in standard PostgreSQL.</p>
<h2 id="see-also"><a class="header" href="#see-also"><a id="section8"></a>See Also</a></h2>
<p><a href="CREATE_RESOURCE_GROUP.html">CREATE RESOURCE GROUP</a>, <a href="DROP_RESOURCE_GROUP.html">DROP RESOURCE GROUP</a>, <a href="CREATE_ROLE.html">CREATE ROLE</a>, <a href="ALTER_ROLE.html">ALTER ROLE</a></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../ref_guide/sql_commands/ALTER_PROTOCOL.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../ref_guide/sql_commands/ALTER_RESOURCE_QUEUE.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../ref_guide/sql_commands/ALTER_PROTOCOL.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../ref_guide/sql_commands/ALTER_RESOURCE_QUEUE.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
