<!DOCTYPE HTML>
<html lang="en" class="ayu sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>ALTER TYPE - SynxDB 2 Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "ayu";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">SynxDB 2 Documentation</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <a href="https://www.synxdata.com/"><img id="fa fa-print" src="../../SYNX-Text-and-Circular-Logo-142x28-White-text-Black-background.png" alt="Synx Data Labs Logo"/></a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="alter-type"><a class="header" href="#alter-type">ALTER TYPE</a></h1>
<p>Changes the definition of a data type.</p>
<h2 id="synopsis"><a class="header" href="#synopsis"><a id="section2"></a>Synopsis</a></h2>
<pre><code class="language-{#sql_command_synopsis}">
ALTER TYPE &lt;name&gt; &lt;action&gt; [, ... ]
ALTER TYPE &lt;name&gt; OWNER TO &lt;new_owner&gt;
ALTER TYPE &lt;name&gt; RENAME ATTRIBUTE &lt;attribute_name&gt; TO &lt;new_attribute_name&gt; [ CASCADE | RESTRICT ]
ALTER TYPE &lt;name&gt; RENAME TO &lt;new_name&gt;
ALTER TYPE &lt;name&gt; SET SCHEMA &lt;new_schema&gt;
ALTER TYPE &lt;name&gt; ADD VALUE [ IF NOT EXISTS ] &lt;new_enum_value&gt; [ { BEFORE | AFTER } &lt;existing_enum_value&gt; ]
ALTER TYPE &lt;name&gt; SET DEFAULT ENCODING ( &lt;storage_directive&gt; )

where &lt;action&gt; is one of:
  
  ADD ATTRIBUTE &lt;attribute_name&gt; &lt;data_type&gt; [ COLLATE &lt;collation&gt; ] [ CASCADE | RESTRICT ]
  DROP ATTRIBUTE [ IF EXISTS ] &lt;attribute_name&gt; [ CASCADE | RESTRICT ]
  ALTER ATTRIBUTE &lt;attribute_name&gt; [ SET DATA ] TYPE &lt;data_type&gt; [ COLLATE &lt;collation&gt; ] [ CASCADE | RESTRICT ]

</code></pre>
<p>where storage_directive is:</p>
<pre><code>   COMPRESSTYPE={ZLIB | ZSTD | RLE_TYPE | NONE}
   COMPRESSLEVEL={0-19}
   BLOCKSIZE={8192-2097152}
</code></pre>
<h2 id="description"><a class="header" href="#description"><a id="section3"></a>Description</a></h2>
<p><code>ALTER TYPE</code> changes the definition of an existing type. There are several subforms:</p>
<ul>
<li>
<p><strong><code>ADD ATTRIBUTE</code></strong> — Adds a new attribute to a composite type, using the same syntax as <code>CREATE TYPE</code>.</p>
</li>
<li>
<p><strong><code>DROP ATTRIBUTE [ IF EXISTS ]</code></strong> — Drops an attribute from a composite type. If <code>IF EXISTS</code> is specified and the attribute does not exist, no error is thrown. In this case a notice is issued instead.</p>
</li>
<li>
<p><strong><code>SET DATA TYPE</code></strong> — Changes the type of an attribute of a composite type.</p>
</li>
<li>
<p><strong><code>OWNER</code></strong> — Changes the owner of the type.</p>
</li>
<li>
<p><strong><code>RENAME</code></strong> — Changes the name of the type or the name of an individual attribute of a composite type.</p>
</li>
<li>
<p><strong><code>SET SCHEMA</code></strong> — Moves the type into another schema.</p>
</li>
<li>
<p><strong><code>ADD VALUE [ IF NOT EXISTS ] [ BEFORE | AFTER ]</code></strong> — Adds a new value to an enum type. The new value’s place in the enum’s ordering can be specified as being <code>BEFORE</code> or <code>AFTER</code> one of the existing values. Otherwise, the new item is added at the end of the list of values.</p>
<p>If <code>IF NOT EXISTS</code> is specified, it is not an error if the type already contains the new value; a notice is issued but no other action is taken. Otherwise, an error will occur if the new value is already present.</p>
</li>
<li>
<p><strong><code>CASCADE</code></strong> — Automatically propagate the operation to typed tables of the type being altered, and their descendants.</p>
</li>
<li>
<p><strong><code>RESTRICT</code></strong> — Refuse the operation if the type being altered is the type of a typed table. This is the default.</p>
</li>
</ul>
<p>The <code>ADD ATTRIBUTE</code>, <code>DROP ATTRIBUTE</code>, and <code>ALTER ATTRIBUTE</code> actions can be combined into a list of multiple alterations to apply in parallel. For example, it is possible to add several attributes and/or alter the type of several attributes in a single command.</p>
<p>You can change the name, the owner, and the schema of a type. You can also add or update storage options for a scalar type.</p>
<blockquote>
<p><strong>Note</strong> SynxDB does not support adding storage options for row or composite types.</p>
</blockquote>
<p>You must own the type to use <code>ALTER TYPE</code>. To change the schema of a type, you must also have <code>CREATE</code> privilege on the new schema. To alter the owner, you must also be a direct or indirect member of the new owning role, and that role must have <code>CREATE</code> privilege on the type’s schema. (These restrictions enforce that altering the owner does not do anything that could be done by dropping and recreating the type. However, a superuser can alter ownership of any type.) To add an attribute or alter an attribute type, you must also have <code>USAGE</code> privilege on the data type.</p>
<p><code>ALTER TYPE ... ADD VALUE</code> (the form that adds a new value to an enum type) cannot be run inside a transaction block.</p>
<p>Comparisons involving an added enum value will sometimes be slower than comparisons involving only original members of the enum type. This will usually only occur if <code>BEFORE</code> or <code>AFTER</code> is used to set the new value’s sort position somewhere other than at the end of the list. However, sometimes it will happen even though the new value is added at the end (this occurs if the OID counter “wrapped around” since the original creation of the enum type). The slowdown is usually insignificant; but if it matters, optimal performance can be regained by dropping and recreating the enum type, or by dumping and reloading the database.</p>
<h2 id="parameters"><a class="header" href="#parameters"><a id="section4"></a>Parameters</a></h2>
<h3 id="name"><a class="header" href="#name">name</a></h3>
<p>The name (optionally schema-qualified) of an existing type to alter.</p>
<h3 id="new_name"><a class="header" href="#new_name">new_name</a></h3>
<p>The new name for the type.</p>
<h3 id="new_owner"><a class="header" href="#new_owner">new_owner</a></h3>
<p>The user name of the new owner of the type.</p>
<h3 id="new_schema"><a class="header" href="#new_schema">new_schema</a></h3>
<p>The new schema for the type.</p>
<h3 id="attribute_name"><a class="header" href="#attribute_name">attribute_name</a></h3>
<p>The name of the attribute to add, alter, or drop.</p>
<h3 id="new_attribute_name"><a class="header" href="#new_attribute_name">new_attribute_name</a></h3>
<p>The new name of the attribute to be renamed.</p>
<h3 id="data_type"><a class="header" href="#data_type">data_type</a></h3>
<p>The data type of the attribute to add, or the new type of the attribute to alter.</p>
<h3 id="new_enum_value"><a class="header" href="#new_enum_value">new_enum_value</a></h3>
<p>The new value to be added to an enum type’s list of values. Like all enum literals, it needs to be quoted.</p>
<h3 id="existing_enum_value"><a class="header" href="#existing_enum_value">existing_enum_value</a></h3>
<p>The existing enum value that the new value should be added immediately before or after in the enum type’s sort ordering. Like all enum literals, it needs to be quoted.</p>
<h3 id="storage_directive"><a class="header" href="#storage_directive">storage_directive</a></h3>
<p>Identifies default storage options for the type when specified in a table column definition. Options include <code>COMPRESSTYPE</code>, <code>COMPRESSLEVEL</code>, and <code>BLOCKSIZE</code>.</p>
<p><strong>COMPRESSTYPE</strong> — Set to <code>ZLIB</code> (the default), <code>ZSTD</code>, or <code>RLE_TYPE</code> to specify the type of compression used.</p>
<p><strong>COMPRESSLEVEL</strong> — For Zstd compression, set to an integer value from 1 (fastest compression) to 19 (highest compression ratio). For zlib compression, the valid range is from 1 to 9. The default compression level is 1.</p>
<p><strong>BLOCKSIZE</strong> — Set to the size, in bytes, for each block in the column. The <code>BLOCKSIZE</code> must be between 8192 and 2097152 bytes, and be a multiple of 8192. The default block size is 32768.</p>
<blockquote>
<p><strong>Note</strong> storage_directives defined at the table- or column-level override the default storage options defined for a type.</p>
</blockquote>
<h2 id="examples"><a class="header" href="#examples"><a id="section5"></a>Examples</a></h2>
<p>To rename the data type named <code>electronic_mail</code>:</p>
<pre><code>ALTER TYPE electronic_mail RENAME TO email;
</code></pre>
<p>To change the owner of the user-defined type <code>email</code> to <code>joe</code>:</p>
<pre><code>ALTER TYPE email OWNER TO joe;
</code></pre>
<p>To change the schema of the user-defined type <code>email</code> to <code>customers</code>:</p>
<pre><code>ALTER TYPE email SET SCHEMA customers;
</code></pre>
<p>To set or alter the compression type and compression level of the user-defined type named <code>int33</code>:</p>
<pre><code>ALTER TYPE int33 SET DEFAULT ENCODING (compresstype=zlib, compresslevel=7);
</code></pre>
<p>To add a new attribute to a type:</p>
<pre><code>ALTER TYPE compfoo ADD ATTRIBUTE f3 int;
</code></pre>
<p>To add a new value to an enum type in a particular sort position:</p>
<pre><code>ALTER TYPE colors ADD VALUE 'orange' AFTER 'red';
</code></pre>
<h2 id="compatibility"><a class="header" href="#compatibility"><a id="section6"></a>Compatibility</a></h2>
<p>The variants to add and drop attributes are part of the SQL standard; the other variants are SynxDB extensions.</p>
<h2 id="see-also"><a class="header" href="#see-also"><a id="section7"></a>See Also</a></h2>
<p><a href="CREATE_TYPE.html">CREATE TYPE</a>, <a href="DROP_TYPE.html">DROP TYPE</a></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../ref_guide/sql_commands/ALTER_TRIGGER.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../ref_guide/sql_commands/ALTER_USER.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../ref_guide/sql_commands/ALTER_TRIGGER.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../ref_guide/sql_commands/ALTER_USER.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
