<!DOCTYPE HTML>
<html lang="en" class="ayu sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>ALTER RESOURCE QUEUE - SynxDB 2 Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "ayu";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">SynxDB 2 Documentation</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <a href="https://www.synxdata.com/"><img id="fa fa-print" src="../../SYNX-Text-and-Circular-Logo-142x28-White-text-Black-background.png" alt="Synx Data Labs Logo"/></a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="alter-resource-queue"><a class="header" href="#alter-resource-queue">ALTER RESOURCE QUEUE</a></h1>
<p>Changes the limits of a resource queue.</p>
<h2 id="synopsis"><a class="header" href="#synopsis"><a id="section2"></a>Synopsis</a></h2>
<pre><code class="language-{#sql_command_synopsis}">ALTER RESOURCE QUEUE &lt;name&gt; WITH ( &lt;queue_attribute&gt;=&lt;value&gt; [, ... ] ) 
</code></pre>
<p>where queue_attribute is:</p>
<pre><code>   ACTIVE_STATEMENTS=&lt;integer&gt;
   MEMORY_LIMIT='&lt;memory_units&gt;'
   MAX_COST=&lt;float&gt;
   COST_OVERCOMMIT={TRUE|FALSE}
   MIN_COST=&lt;float&gt;
   PRIORITY={MIN|LOW|MEDIUM|HIGH|MAX}
</code></pre>
<pre><code>ALTER RESOURCE QUEUE &lt;name&gt; WITHOUT ( &lt;queue_attribute&gt; [, ... ] )
</code></pre>
<p>where queue_attribute is:</p>
<pre><code>   ACTIVE_STATEMENTS
   MEMORY_LIMIT
   MAX_COST
   COST_OVERCOMMIT
   MIN_COST
</code></pre>
<blockquote>
<p><strong>Note</strong> A resource queue must have either an <code>ACTIVE_STATEMENTS</code> or a <code>MAX_COST</code> value. Do not remove both these <code>queue_attributes</code> from a resource queue.</p>
</blockquote>
<h2 id="description"><a class="header" href="#description"><a id="section3"></a>Description</a></h2>
<p><code>ALTER RESOURCE QUEUE</code> changes the limits of a resource queue. Only a superuser can alter a resource queue. A resource queue must have either an <code>ACTIVE_STATEMENTS</code> or a <code>MAX_COST</code> value (or it can have both). You can also set or reset priority for a resource queue to control the relative share of available CPU resources used by queries associated with the queue, or memory limit of a resource queue to control the amount of memory that all queries submitted through the queue can consume on a segment host.</p>
<p><code>ALTER RESOURCE QUEUE WITHOUT</code> removes the specified limits on a resource that were previously set. A resource queue must have either an <code>ACTIVE_STATEMENTS</code> or a <code>MAX_COST</code> value. Do not remove both these <code>queue_attributes</code> from a resource queue.</p>
<h2 id="parameters"><a class="header" href="#parameters"><a id="section4"></a>Parameters</a></h2>
<h3 id="name"><a class="header" href="#name">name</a></h3>
<p>The name of the resource queue whose limits are to be altered.</p>
<h3 id="active_statements-integer"><a class="header" href="#active_statements-integer">ACTIVE_STATEMENTS integer</a></h3>
<p>The number of active statements submitted from users in this resource queue allowed on the system at any one time. The value for <code>ACTIVE_STATEMENTS</code> should be an integer greater than 0. To reset <code>ACTIVE_STATEMENTS</code> to have no limit, enter a value of <code>-1</code>.</p>
<h3 id="memory_limit-memory_units"><a class="header" href="#memory_limit-memory_units">MEMORY_LIMIT ‘memory_units’</a></h3>
<p>Sets the total memory quota for all statements submitted from users in this resource queue. Memory units can be specified in kB, MB or GB. The minimum memory quota for a resource queue is 10MB. There is no maximum; however the upper boundary at query execution time is limited by the physical memory of a segment host. The default value is no limit (<code>-1</code>).</p>
<h3 id="max_cost-float"><a class="header" href="#max_cost-float">MAX_COST float</a></h3>
<p>The total query optimizer cost of statements submitted from users in this resource queue allowed on the system at any one time. The value for <code>MAX_COST</code> is specified as a floating point number (for example 100.0) or can also be specified as an exponent (for example 1e+2). To reset <code>MAX_COST</code> to have no limit, enter a value of <code>-1.0</code>.</p>
<h3 id="cost_overcommit-boolean"><a class="header" href="#cost_overcommit-boolean">COST_OVERCOMMIT boolean</a></h3>
<p>If a resource queue is limited based on query cost, then the administrator can allow cost overcommit (<code>COST_OVERCOMMIT=TRUE</code>, the default). This means that a query that exceeds the allowed cost threshold will be allowed to run but only when the system is idle. If <code>COST_OVERCOMMIT=FALSE</code> is specified, queries that exceed the cost limit will always be rejected and never allowed to run.</p>
<h3 id="min_cost-float"><a class="header" href="#min_cost-float">MIN_COST float</a></h3>
<p>Queries with a cost under this limit will not be queued and run immediately. Cost is measured in units of disk page fetches; 1.0 equals one sequential disk page read. The value for <code>MIN_COST</code> is specified as a floating point number (for example 100.0) or can also be specified as an exponent (for example 1e+2). To reset <code>MIN_COST</code> to have no limit, enter a value of <code>-1.0</code>.</p>
<h3 id="priorityminlowmediumhighmax"><a class="header" href="#priorityminlowmediumhighmax">PRIORITY={MIN|LOW|MEDIUM|HIGH|MAX}</a></h3>
<p>Sets the priority of queries associated with a resource queue. Queries or statements in queues with higher priority levels will receive a larger share of available CPU resources in case of contention. Queries in low-priority queues may be delayed while higher priority queries are run.</p>
<h2 id="notes"><a class="header" href="#notes"><a id="section5"></a>Notes</a></h2>
<p>GPORCA and the Postgres planner utilize different query costing models and may compute different costs for the same query. The SynxDB resource queue resource management scheme neither differentiates nor aligns costs between GPORCA and the Postgres Planner; it uses the literal cost value returned from the optimizer to throttle queries.</p>
<p>When resource queue-based resource management is active, use the <code>MEMORY_LIMIT</code> and <code>ACTIVE_STATEMENTS</code> limits for resource queues rather than configuring cost-based limits. Even when using GPORCA, SynxDB may fall back to using the Postgres Planner for certain queries, so using cost-based limits can lead to unexpected results.</p>
<h2 id="examples"><a class="header" href="#examples"><a id="section6"></a>Examples</a></h2>
<p>Change the active query limit for a resource queue:</p>
<pre><code>ALTER RESOURCE QUEUE myqueue WITH (ACTIVE_STATEMENTS=20);
</code></pre>
<p>Change the memory limit for a resource queue:</p>
<pre><code>ALTER RESOURCE QUEUE myqueue WITH (MEMORY_LIMIT='2GB');
</code></pre>
<p>Reset the maximum and minimum query cost limit for a resource queue to no limit:</p>
<pre><code>ALTER RESOURCE QUEUE myqueue WITH (MAX_COST=-1.0, 
  MIN_COST= -1.0);
</code></pre>
<p>Reset the query cost limit for a resource queue to 310 (or 30000000000.0) and do not allow overcommit:</p>
<pre><code>ALTER RESOURCE QUEUE myqueue WITH (MAX_COST=3e+10, 
  COST_OVERCOMMIT=FALSE);
</code></pre>
<p>Reset the priority of queries associated with a resource queue to the minimum level:</p>
<pre><code>ALTER RESOURCE QUEUE myqueue WITH (PRIORITY=MIN);
</code></pre>
<p>Remove the <code>MAX_COST</code> and <code>MEMORY_LIMIT</code> limits from a resource queue:</p>
<pre><code>ALTER RESOURCE QUEUE myqueue WITHOUT (MAX_COST, MEMORY_LIMIT);
</code></pre>
<h2 id="compatibility"><a class="header" href="#compatibility"><a id="section7"></a>Compatibility</a></h2>
<p>The <code>ALTER RESOURCE QUEUE</code> statement is a SynxDB extension. This command does not exist in standard PostgreSQL.</p>
<h2 id="see-also"><a class="header" href="#see-also"><a id="section8"></a>See Also</a></h2>
<p><a href="CREATE_RESOURCE_QUEUE.html">CREATE RESOURCE QUEUE</a>, <a href="DROP_RESOURCE_QUEUE.html">DROP RESOURCE QUEUE</a>, <a href="CREATE_ROLE.html">CREATE ROLE</a>, <a href="ALTER_ROLE.html">ALTER ROLE</a></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../ref_guide/sql_commands/ALTER_RESOURCE_GROUP.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../ref_guide/sql_commands/ALTER_ROLE.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../ref_guide/sql_commands/ALTER_RESOURCE_GROUP.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../ref_guide/sql_commands/ALTER_ROLE.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
