<!DOCTYPE HTML>
<html lang="en" class="ayu sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>FETCH - SynxDB 2 Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "ayu";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">SynxDB 2 Documentation</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <a href="https://www.synxdata.com/"><img id="fa fa-print" src="../../SYNX-Text-and-Circular-Logo-142x28-White-text-Black-background.png" alt="Synx Data Labs Logo"/></a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="fetch"><a class="header" href="#fetch">FETCH</a></h1>
<p>Retrieves rows from a query using a cursor.</p>
<h2 id="synopsis"><a class="header" href="#synopsis"><a id="section2"></a>Synopsis</a></h2>
<pre><code class="language-{#sql_command_synopsis}">FETCH [ &lt;forward_direction&gt; { FROM | IN } ] &lt;cursor_name&gt;
</code></pre>
<p>where forward_direction can be empty or one of:</p>
<pre><code>    NEXT
    FIRST
    ABSOLUTE &lt;count&gt;
    RELATIVE &lt;count&gt;
    &lt;count&gt;
    ALL
    FORWARD
    FORWARD &lt;count&gt;
    FORWARD ALL
</code></pre>
<h2 id="description"><a class="header" href="#description"><a id="section3"></a>Description</a></h2>
<p><code>FETCH</code> retrieves rows using a previously-created cursor.</p>
<blockquote>
<p><strong>Note</strong> You cannot <code>FETCH</code> from a <code>PARALLEL RETRIEVE CURSOR</code>, you must <a href="RETRIEVE.html">RETRIEVE</a> the rows from it.</p>
</blockquote>
<blockquote>
<p><strong>Note</strong> This page describes usage of cursors at the SQL command level. If you are trying to use cursors inside a PL/pgSQL function, the rules are different. See <a href="../../analytics/pl_sql.html">PL/pgSQL function</a>.</p>
</blockquote>
<p>A cursor has an associated position, which is used by <code>FETCH</code>. The cursor position can be before the first row of the query result, on any particular row of the result, or after the last row of the result. When created, a cursor is positioned before the first row. After fetching some rows, the cursor is positioned on the row most recently retrieved. If <code>FETCH</code> runs off the end of the available rows then the cursor is left positioned after the last row. <code>FETCH ALL</code> will always leave the cursor positioned after the last row.</p>
<p>The forms <code>NEXT</code>, <code>FIRST</code>, <code>ABSOLUTE</code>, <code>RELATIVE</code> fetch a single row after moving the cursor appropriately. If there is no such row, an empty result is returned, and the cursor is left positioned before the first row or after the last row as appropriate.</p>
<p>The forms using <code>FORWARD</code> retrieve the indicated number of rows moving in the forward direction, leaving the cursor positioned on the last-returned row (or after all rows, if the count exceeds the number of rows available). Note that it is not possible to move a cursor position backwards in SynxDB, since scrollable cursors are not supported. You can only move a cursor forward in position using <code>FETCH</code>.</p>
<p><code>RELATIVE 0</code> and <code>FORWARD 0</code> request fetching the current row without moving the cursor, that is, re-fetching the most recently fetched row. This will succeed unless the cursor is positioned before the first row or after the last row, in which case no row is returned.</p>
<p><strong>Outputs</strong></p>
<p>On successful completion, a <code>FETCH</code> command returns a command tag of the form</p>
<pre><code>FETCH &lt;count&gt;
</code></pre>
<p>The count is the number of rows fetched (possibly zero). Note that in <code>psql</code>, the command tag will not actually be displayed, since <code>psql</code> displays the fetched rows instead.</p>
<h2 id="parameters"><a class="header" href="#parameters"><a id="section5"></a>Parameters</a></h2>
<h3 id="forward_direction"><a class="header" href="#forward_direction">forward_direction</a></h3>
<p>Defines the fetch direction and number of rows to fetch. Only forward fetches are allowed in SynxDB. It can be one of the following:</p>
<h3 id="next"><a class="header" href="#next">NEXT</a></h3>
<p>Fetch the next row. This is the default if direction is omitted.</p>
<h3 id="first"><a class="header" href="#first">FIRST</a></h3>
<p>Fetch the first row of the query (same as <code>ABSOLUTE 1</code>). Only allowed if it is the first <code>FETCH</code> operation using this cursor.</p>
<h3 id="absolute-count"><a class="header" href="#absolute-count">ABSOLUTE count</a></h3>
<p>Fetch the specified row of the query. Position after last row if count is out of range. Only allowed if the row specified by count moves the cursor position forward.</p>
<h3 id="relative-count"><a class="header" href="#relative-count">RELATIVE count</a></h3>
<p>Fetch the specified row of the query count rows ahead of the current cursor position. <code>RELATIVE 0</code> re-fetches the current row, if any. Only allowed if count moves the cursor position forward.</p>
<h3 id="count"><a class="header" href="#count">count</a></h3>
<p>Fetch the next count number of rows (same as <code>FORWARD count</code>).</p>
<h3 id="all"><a class="header" href="#all">ALL</a></h3>
<p>Fetch all remaining rows (same as <code>FORWARD ALL</code>).</p>
<h3 id="forward"><a class="header" href="#forward">FORWARD</a></h3>
<p>Fetch the next row (same as <code>NEXT</code>).</p>
<h3 id="forward-count"><a class="header" href="#forward-count">FORWARD count</a></h3>
<p>Fetch the next count number of rows. <code>FORWARD 0</code> re-fetches the current row.</p>
<h3 id="forward-all"><a class="header" href="#forward-all">FORWARD ALL</a></h3>
<p>Fetch all remaining rows.</p>
<h3 id="cursor_name"><a class="header" href="#cursor_name">cursor_name</a></h3>
<p>The name of an open cursor.</p>
<h2 id="notes"><a class="header" href="#notes"><a id="section6"></a>Notes</a></h2>
<p>SynxDB does not support scrollable cursors, so you can only use <code>FETCH</code> to move the cursor position forward.</p>
<p><code>ABSOLUTE</code> fetches are not any faster than navigating to the desired row with a relative move: the underlying implementation must traverse all the intermediate rows anyway.</p>
<p><code>DECLARE</code> is used to define a cursor. Use <code>MOVE</code> to change cursor position without retrieving data.</p>
<h2 id="examples"><a class="header" href="#examples"><a id="section7"></a>Examples</a></h2>
<p>– Start the transaction:</p>
<pre><code>BEGIN;
</code></pre>
<p>– Set up a cursor:</p>
<pre><code>DECLARE mycursor CURSOR FOR SELECT * FROM films;
</code></pre>
<p>– Fetch the first 5 rows in the cursor <code>mycursor</code>:</p>
<pre><code>FETCH FORWARD 5 FROM mycursor;
 code  |          title          | did | date_prod  |   kind   |  len
-------+-------------------------+-----+------------+----------+-------
 BL101 | The Third Man           | 101 | 1949-12-23 | Drama    | 01:44
 BL102 | The African Queen       | 101 | 1951-08-11 | Romantic | 01:43
 JL201 | Une Femme est une Femme | 102 | 1961-03-12 | Romantic | 01:25
 P_301 | Vertigo                 | 103 | 1958-11-14 | Action   | 02:08
 P_302 | Becket                  | 103 | 1964-02-03 | Drama    | 02:28
</code></pre>
<p>– Close the cursor and end the transaction:</p>
<pre><code>CLOSE mycursor;
COMMIT;
</code></pre>
<p>Change the <code>kind</code> column of the table <code>films</code> in the row at the <code>c_films</code> cursor’s current position:</p>
<pre><code>UPDATE films SET kind = 'Dramatic' WHERE CURRENT OF c_films;
</code></pre>
<h2 id="compatibility"><a class="header" href="#compatibility"><a id="section8"></a>Compatibility</a></h2>
<p>SQL standard allows cursors only in embedded SQL and in modules. SynxDB permits cursors to be used interactively.</p>
<p>The variant of <code>FETCH</code> described here returns the data as if it were a <code>SELECT</code> result rather than placing it in host variables. Other than this point, <code>FETCH</code> is fully upward-compatible with the SQL standard.</p>
<p>The <code>FETCH</code> forms involving <code>FORWARD</code>, as well as the forms <code>FETCH</code> count and <code>FETCH ALL</code>, in which <code>FORWARD</code> is implicit, are SynxDB extensions. <code>BACKWARD</code> is not supported.</p>
<p>The SQL standard allows only <code>FROM</code> preceding the cursor name; the option to use <code>IN</code>, or to leave them out altogether, is an extension.</p>
<h2 id="see-also"><a class="header" href="#see-also"><a id="section9"></a>See Also</a></h2>
<p><a href="DECLARE.html">DECLARE</a>, <a href="CLOSE.html">CLOSE</a>, <a href="MOVE.html">MOVE</a></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../ref_guide/sql_commands/EXPLAIN.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../ref_guide/sql_commands/GRANT.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../ref_guide/sql_commands/EXPLAIN.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../ref_guide/sql_commands/GRANT.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
