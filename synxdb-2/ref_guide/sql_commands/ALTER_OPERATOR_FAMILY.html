<!DOCTYPE HTML>
<html lang="en" class="ayu sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>ALTER OPERATOR FAMILY - SynxDB 2 Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "ayu";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">SynxDB 2 Documentation</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <a href="https://www.synxdata.com/"><img id="fa fa-print" src="../../SYNX-Text-and-Circular-Logo-142x28-White-text-Black-background.png" alt="Synx Data Labs Logo"/></a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="alter-operator-family"><a class="header" href="#alter-operator-family">ALTER OPERATOR FAMILY</a></h1>
<p>Changes the definition of an operator family.</p>
<h2 id="synopsis"><a class="header" href="#synopsis"><a id="section2"></a>Synopsis</a></h2>
<pre><code class="language-{#sql_command_synopsis}">ALTER OPERATOR FAMILY &lt;name&gt; USING &lt;index_method&gt; ADD
  {  OPERATOR &lt;strategy_number&gt; &lt;operator_name&gt; ( &lt;op_type&gt;, &lt;op_type&gt; ) [ FOR SEARCH | FOR ORDER BY &lt;sort_family_name&gt; ]
    | FUNCTION &lt;support_number&gt; [ ( &lt;op_type&gt; [ , &lt;op_type&gt; ] ) ] &lt;funcname&gt; ( &lt;argument_type&gt; [, ...] )
  } [, ... ]

ALTER OPERATOR FAMILY &lt;name&gt; USING &lt;index_method&gt; DROP
  {  OPERATOR &lt;strategy_number&gt; ( &lt;op_type&gt;, &lt;op_type&gt; ) 
    | FUNCTION &lt;support_number&gt; [ ( &lt;op_type&gt; [ , &lt;op_type&gt; ] ) 
  } [, ... ]

ALTER OPERATOR FAMILY &lt;name&gt; USING &lt;index_method&gt; RENAME TO &lt;new_name&gt;

ALTER OPERATOR FAMILY &lt;name&gt; USING &lt;index_method&gt; OWNER TO &lt;new_owner&gt;

ALTER OPERATOR FAMILY &lt;name&gt; USING &lt;index_method&gt; SET SCHEMA &lt;new_schema&gt;
</code></pre>
<h2 id="description"><a class="header" href="#description"><a id="section3"></a>Description</a></h2>
<p><code>ALTER OPERATOR FAMILY</code> changes the definition of an operator family. You can add operators and support functions to the family, remove them from the family, or change the family’s name or owner.</p>
<p>When operators and support functions are added to a family with <code>ALTER OPERATOR FAMILY</code>, they are not part of any specific operator class within the family, but are just “loose” within the family. This indicates that these operators and functions are compatible with the family’s semantics, but are not required for correct functioning of any specific index. (Operators and functions that are so required should be declared as part of an operator class, instead; see <a href="CREATE_OPERATOR_CLASS.html">CREATE OPERATOR CLASS</a>.) You can drop loose members of a family from the family at any time, but members of an operator class cannot be dropped without dropping the whole class and any indexes that depend on it. Typically, single-data-type operators and functions are part of operator classes because they are needed to support an index on that specific data type, while cross-data-type operators and functions are made loose members of the family.</p>
<p>You must be a superuser to use <code>ALTER OPERATOR FAMILY</code>. (This restriction is made because an erroneous operator family definition could confuse or even crash the server.)</p>
<p><code>ALTER OPERATOR FAMILY</code> does not presently check whether the operator family definition includes all the operators and functions required by the index method, nor whether the operators and functions form a self-consistent set. It is the user’s responsibility to define a valid operator family.</p>
<p><code>OPERATOR</code> and <code>FUNCTION</code> clauses can appear in any order.</p>
<h2 id="parameters"><a class="header" href="#parameters"><a id="section4"></a>Parameters</a></h2>
<h3 id="name"><a class="header" href="#name">name</a></h3>
<p>The name (optionally schema-qualified) of an existing operator family.</p>
<h3 id="index_method"><a class="header" href="#index_method">index_method</a></h3>
<p>The name of the index method this operator family is for.</p>
<h3 id="strategy_number"><a class="header" href="#strategy_number">strategy_number</a></h3>
<p>The index method’s strategy number for an operator associated with the operator family.</p>
<h3 id="operator_name"><a class="header" href="#operator_name">operator_name</a></h3>
<p>The name (optionally schema-qualified) of an operator associated with the operator family.</p>
<h3 id="op_type"><a class="header" href="#op_type">op_type</a></h3>
<p>In an <code>OPERATOR</code> clause, the operand data type(s) of the operator, or <code>NONE</code> to signify a left-unary or right-unary operator. Unlike the comparable syntax in <code>CREATE OPERATOR CLASS</code>, the operand data types must always be specified. In an <code>ADD FUNCTION</code> clause, the operand data type(s) the function is intended to support, if different from the input data type(s) of the function. For B-tree comparison functions it is not necessary to specify op_type since the function’s input data type(s) are always the correct ones to use. For B-tree sort support functions and all functions in GiST, SP-GiST, and GIN operator classes, it is necessary to specify the operand data type(s) the function is to be used with.</p>
<h3 id="sort_family_name"><a class="header" href="#sort_family_name">sort_family_name</a></h3>
<p>The name (optionally schema-qualified) of an existing <code>btree</code> operator family that describes the sort ordering associated with an ordering operator.</p>
<p>If neither <code>FOR SEARCH</code> nor <code>FOR ORDER BY</code> is specified, <code>FOR SEARCH</code> is the default.</p>
<h3 id="support_number"><a class="header" href="#support_number">support_number</a></h3>
<p>The index method’s support procedure number for a function associated with the operator family.</p>
<h3 id="funcname"><a class="header" href="#funcname">funcname</a></h3>
<p>The name (optionally schema-qualified) of a function that is an index method support procedure for the operator family.</p>
<h3 id="argument_types"><a class="header" href="#argument_types">argument_types</a></h3>
<p>The parameter data type(s) of the function.</p>
<h3 id="new_name"><a class="header" href="#new_name">new_name</a></h3>
<p>The new name of the operator family.</p>
<h3 id="new_owner"><a class="header" href="#new_owner">new_owner</a></h3>
<p>The new owner of the operator family.</p>
<h3 id="new_schema"><a class="header" href="#new_schema">new_schema</a></h3>
<p>The new schema for the operator family.</p>
<h2 id="compatibility"><a class="header" href="#compatibility"><a id="section5"></a>Compatibility</a></h2>
<p>There is no <code>ALTER OPERATOR FAMILY</code> statement in the SQL standard.</p>
<h2 id="notes"><a class="header" href="#notes"><a id="section6"></a>Notes</a></h2>
<p>Notice that the <code>DROP</code> syntax only specifies the “slot” in the operator family, by strategy or support number and input data type(s). The name of the operator or function occupying the slot is not mentioned. Also, for <code>DROP FUNCTION</code> the type(s) to specify are the input data type(s) the function is intended to support; for <code>GiST</code>, <code>SP_GiST</code>, and <code>GIN</code> indexes this might have nothing to do with the actual input argument types of the function.</p>
<p>Because the index machinery does not check access permissions on functions before using them, including a function or operator in an operator family is tantamount to granting public execute permission on it. This is usually not an issue for the sorts of functions that are useful in an operator family.</p>
<p>The operators should not be defined by SQL functions. A SQL function is likely to be inlined into the calling query, which will prevent the optimizer from recognizing that the query matches an index.</p>
<p>Before SynxDB 2, the <code>OPERATOR</code> clause could include a <code>RECHECK</code> option. This option is no longer supported. SynxDB now determines whether an index operator is “lossy” on-the-fly at run time. This allows more efficient handling of cases where an operator might or might not be lossy.</p>
<h2 id="examples"><a class="header" href="#examples"><a id="section7"></a>Examples</a></h2>
<p>The following example command adds cross-data-type operators and support functions to an operator family that already contains B-tree operator classes for data types int4 and int2.:</p>
<pre><code>ALTER OPERATOR FAMILY integer_ops USING btree ADD

  -- int4 vs int2
  OPERATOR 1 &lt; (int4, int2) ,
  OPERATOR 2 &lt;= (int4, int2) ,
  OPERATOR 3 = (int4, int2) ,
  OPERATOR 4 &gt;= (int4, int2) ,
  OPERATOR 5 &gt; (int4, int2) ,
  FUNCTION 1 btint42cmp(int4, int2) ,

  -- int2 vs int4
  OPERATOR 1 &lt; (int2, int4) ,
  OPERATOR 2 &lt;= (int2, int4) ,
  OPERATOR 3 = (int2, int4) ,
  OPERATOR 4 &gt;= (int2, int4) ,
  OPERATOR 5 &gt; (int2, int4) ,
  FUNCTION 1 btint24cmp(int2, int4) ;
</code></pre>
<p>To remove these entries:</p>
<pre><code>ALTER OPERATOR FAMILY integer_ops USING btree DROP

  -- int4 vs int2
  OPERATOR 1 (int4, int2) ,
  OPERATOR 2 (int4, int2) ,
  OPERATOR 3 (int4, int2) ,
  OPERATOR 4 (int4, int2) ,
  OPERATOR 5 (int4, int2) ,
  FUNCTION 1 (int4, int2) ,

  -- int2 vs int4
  OPERATOR 1 (int2, int4) ,
  OPERATOR 2 (int2, int4) ,
  OPERATOR 3 (int2, int4) ,
  OPERATOR 4 (int2, int4) ,
  OPERATOR 5 (int2, int4) ,
  FUNCTION 1 (int2, int4) ;
</code></pre>
<h2 id="see-also"><a class="header" href="#see-also"><a id="section8"></a>See Also</a></h2>
<p><a href="CREATE_OPERATOR_FAMILY.html">CREATE OPERATOR FAMILY</a>, <a href="DROP_OPERATOR_FAMILY.html">DROP OPERATOR FAMILY</a>, <a href="ALTER_OPERATOR_CLASS.html">ALTER OPERATOR CLASS</a>, <a href="CREATE_OPERATOR_CLASS.html">CREATE OPERATOR CLASS</a>, <a href="DROP_OPERATOR_CLASS.html">DROP OPERATOR CLASS</a></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../ref_guide/sql_commands/ALTER_OPERATOR_CLASS.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../ref_guide/sql_commands/ALTER_PROTOCOL.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../ref_guide/sql_commands/ALTER_OPERATOR_CLASS.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../ref_guide/sql_commands/ALTER_PROTOCOL.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
