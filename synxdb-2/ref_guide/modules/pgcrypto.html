<!DOCTYPE HTML>
<html lang="en" class="ayu sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>pgcrypto - SynxDB 2 Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "ayu";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">SynxDB 2 Documentation</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <a href="https://www.synxdata.com/"><img id="fa fa-print" src="../../SYNX-Text-and-Circular-Logo-142x28-White-text-Black-background.png" alt="Synx Data Labs Logo"/></a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="pgcrypto"><a class="header" href="#pgcrypto">pgcrypto</a></h1>
<p>SynxDB is installed with an optional module of encryption/decryption functions called <code>pgcrypto</code>. The <code>pgcrypto</code> functions allow database administrators to store certain columns of data in encrypted form. This adds an extra layer of protection for sensitive data, as data stored in SynxDB in encrypted form cannot be read by anyone who does not have the encryption key, nor can it be read directly from the disks.</p>
<blockquote>
<p><strong>Note</strong> The <code>pgcrypto</code> functions run inside the database server, which means that all the data and passwords move between <code>pgcrypto</code> and the client application in clear-text. For optimal security, consider also using SSL connections between the client and the SynxDB master server.</p>
</blockquote>
<h2 id="installing-and-registering-the-module"><a class="header" href="#installing-and-registering-the-module"><a id="topic_reg"></a>Installing and Registering the Module</a></h2>
<p>The <code>pgcrypto</code> module is installed when you install SynxDB. Before you can use any of the functions defined in the module, you must register the <code>pgcrypto</code> extension in each database in which you want to use the functions. Refer to <a href="../../install_guide/install_modules.html">Installing Additional Supplied Modules</a> for more information.</p>
<h2 id="configuring-fips-encryption"><a class="header" href="#configuring-fips-encryption"><a id="configuring-fips-encryption"></a>Configuring FIPS Encryption</a></h2>
<p>The <code>pgcrypto</code> extension provides a module-specific configuration parameter, <code>pgcrypto.fips</code>. This parameter configures SynxDB support for a limited set of FIPS encryption functionality (<em>Federal Information Processing Standard</em> (FIPS) 140-2). For information about FIPS, see <a href="https://www.nist.gov/itl/popular-links/federal-information-processing-standards-fips">https://www.nist.gov/itl/popular-links/federal-information-processing-standards-fips</a>. The default setting is <code>off</code>, FIPS encryption is not enabled.</p>
<p>Before enabling this parameter, ensure that FIPS is enabled on all SynxDB system hosts.</p>
<p>When this parameter is enabled, these changes occur:</p>
<ul>
<li>FIPS mode is initialized in the OpenSSL library</li>
<li>The functions <code>digest()</code> and <code>hmac()</code> allow only the SHA encryption algorithm (MD5 is not allowed)</li>
<li>The functions for the crypt and gen_salt algorithms are deactivated</li>
<li>PGP encryption and decryption functions support only AES and 3DES encryption algorithms (other algorithms such as blowfish are not allowed)</li>
<li>RAW encryption and decryption functions support only AES and 3DES (other algorithms such as blowfish are not allowed)</li>
</ul>
<p><strong>To enable <code>pgcrypto.fips</code></strong></p>
<ol>
<li>
<p>Enable the <code>pgcrypto</code> functions as an extension if it is not enabled. See <a href="../../install_guide/install_modules.html">Installing Additional Supplied Modules</a>. This example <code>psql</code> command creates the <code>pgcrypto</code> extension in the database <code>testdb</code>.</p>
<pre><code>psql -d testdb -c 'CREATE EXTENSION pgcrypto'
</code></pre>
</li>
<li>
<p>Configure the SynxDB server configuration parameter <code>shared_preload_libraries</code> to load the <code>pgcrypto</code> library. This example uses the <code>gpconfig</code> utility to update the parameter in the SynxDB <code>postgresql.conf</code> files.</p>
<pre><code>gpconfig -c shared_preload_libraries -v '\$libdir/pgcrypto'
</code></pre>
<p>This command displays the value of <code>shared_preload_libraries</code>.</p>
<pre><code>gpconfig -s shared_preload_libraries
</code></pre>
</li>
<li>
<p>Restart the SynxDB system.</p>
<pre><code>gpstop -ra 
</code></pre>
</li>
<li>
<p>Set the <code>pgcrypto.fips</code> server configuration parameter to <code>on</code> for each database that uses FIPS encryption. For example, these commands set the parameter to <code>on</code> for the database <code>testdb</code>.</p>
<pre><code>psql -d postgres
</code></pre>
<pre><code>ALTER DATABASE testdb SET pgcrypto.fips TO on;
</code></pre>
<blockquote>
<p><strong>Important</strong> You must use the <code>ALTER DATABASE</code> command to set the parameter. You cannot use the <code>SET</code> command that updates the parameter for a session, or use the <code>gpconfig</code> utility that updates <code>postgresql.conf</code> files.</p>
</blockquote>
</li>
<li>
<p>After setting the parameter, reconnect to the database to enable encryption support for a session. This example uses the <code>psql</code> meta command <code>\c</code> to connect to the <code>testdb</code> database.</p>
<pre><code>\c testdb
</code></pre>
</li>
</ol>
<p><strong>To deactivate <code>pgcrypto.fips</code></strong></p>
<ol>
<li>
<p>If the database does not use <code>pgcrypto</code> functions, deactivate the <code>pgcrypto</code> extension. This example <code>psql</code> command drops the <code>pgcrypto</code> extension in the database <code>testdb</code>.</p>
<pre><code>psql -d testdb -c 'DROP EXTENSION pgcrypto'
</code></pre>
</li>
<li>
<p>Remove <code>\$libdir/pgcrypto</code> from the <code>shared_preload_libraries</code> parameter, and restart SynxDB. This <code>gpconfig</code> command displays the value of the parameter from the SynxDB <code>postgresql.conf</code> files.</p>
<pre><code>gpconfig -s shared_preload_libraries
</code></pre>
<p>Use the <code>gpconfig</code> utility with the <code>-c</code> and <code>-v</code> options to change the value of the parameter. Use the <code>-r</code> option to remove the parameter.</p>
</li>
<li>
<p>Restart the SynxDB system.</p>
<pre><code>gpstop -ra 
</code></pre>
</li>
</ol>
<h2 id="additional-module-documentation"><a class="header" href="#additional-module-documentation"><a id="topic_info"></a>Additional Module Documentation</a></h2>
<p>Refer to <a href="https://www.postgresql.org/docs/9.4/pgcrypto.html">pgcrypto</a> in the PostgreSQL documentation for more information about the individual functions in this module.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../ref_guide/modules/pgaudit.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../ref_guide/modules/postgres_fdw.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../ref_guide/modules/pgaudit.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../ref_guide/modules/postgres_fdw.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
