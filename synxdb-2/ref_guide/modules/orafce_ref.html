<!DOCTYPE HTML>
<html lang="en" class="ayu sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>orafce - SynxDB 2 Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "ayu" : "ayu";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('ayu')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">SynxDB 2 Documentation</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                        &nbsp;&nbsp;&nbsp;&nbsp;
                        <a href="https://www.synxdata.com/"><img id="fa fa-print" src="../../SYNX-Text-and-Circular-Logo-142x28-White-text-Black-background.png" alt="Synx Data Labs Logo"/></a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="orafce"><a class="header" href="#orafce">orafce</a></h1>
<p>The <code>orafce</code> module provides Oracle Compatibility SQL functions in SynxDB. These functions target PostgreSQL but can also be used in SynxDB.</p>
<p>The SynxDB <code>orafce</code> module is a modified version of the <a href="https://github.com/orafce/orafce">open source Orafce PostgreSQL module extension</a>. The modified <code>orafce</code> source files for SynxDB can be found in the <code>gpcontrib/orafce</code> directory in the <a href="https://github.com/apache/cloudberry/tree/main/gpcontrib/orafce">Apache Cloudberry (Incubating) project</a>. The source reflects the Orafce 3.6.1 release and additional commits to <a href="https://github.com/orafce/orafce/tree/3af70a28f6ab81f43c990fb5661df99a37328b8a">3af70a28f6</a>.</p>
<p>There are some restrictions and limitations when you use the module in SynxDB.</p>
<h2 id="installing-and-registering-the-module"><a class="header" href="#installing-and-registering-the-module"><a id="topic_reg"></a>Installing and Registering the Module</a></h2>
<blockquote>
<p><strong>Note</strong> Always use the Oracle Compatibility Functions module included with your SynxDB version. Before upgrading to a new SynxDB version, uninstall the compatibility functions from each of your databases, and then, when the upgrade is complete, reinstall the compatibility functions from the new SynxDB release. See the SynxDB release notes for upgrade prerequisites and procedures.</p>
</blockquote>
<p>The <code>orafce</code> module is installed when you install SynxDB. Before you can use any of the functions defined in the module, you must register the <code>orafce</code> extension in each database in which you want to use the functions. Refer to <a href="../../install_guide/install_modules.html">Installing Additional Supplied Modules</a> for more information.</p>
<h2 id="synxdb-considerations"><a class="header" href="#synxdb-considerations"><a id="topic_mpp"></a>SynxDB Considerations</a></h2>
<p>The following functions are available by default in SynxDB and do not require installing the Oracle Compatibility Functions:</p>
<ul>
<li>sinh()</li>
<li>tanh()</li>
<li>cosh()</li>
<li>decode() (See <a href="#topic3">SynxDB Implementation Differences</a> for more information.)</li>
</ul>
<h3 id="synxdb-implementation-differences"><a class="header" href="#synxdb-implementation-differences"><a id="topic3"></a>SynxDB Implementation Differences</a></h3>
<p>There are differences in the implementation of the compatibility functions in SynxDB from the original PostgreSQL <code>orafce</code> module extension implementation. Some of the differences are as follows:</p>
<ul>
<li>
<p>The original <code>orafce</code> module implementation performs a decimal round off, the SynxDB implementation does not:</p>
<ul>
<li>2.00 becomes 2 in the original module implementation</li>
<li>2.00 remains 2.00 in the SynxDB implementation</li>
</ul>
</li>
<li>
<p>The provided Oracle compatibility functions handle implicit type conversions differently. For example, using the <code>decode</code> function:</p>
<pre><code>decode(&lt;expression&gt;, &lt;value&gt;, &lt;return&gt; [,&lt;value&gt;, &lt;return&gt;]...
            [, default])
</code></pre>
<p>The original <code>orafce</code> module implementation automatically converts expression and each value to the data type of the first value before comparing. It automatically converts return to the same data type as the first result.</p>
<p>The SynxDB implementation restricts return and <code>default</code> to be of the same data type. The expression and value can be different types if the data type of value can be converted into the data type of the expression. This is done implicitly. Otherwise, <code>decode</code> fails with an <code>invalid input syntax</code> error. For example:</p>
<pre><code>SELECT decode('a','M',true,false);
CASE
------
 f
(1 row)
SELECT decode(1,'M',true,false);
ERROR: Invalid input syntax for integer:*"M" 
*LINE 1: SELECT decode(1,'M',true,false);
</code></pre>
</li>
<li>
<p>Numbers in <code>bigint</code> format are displayed in scientific notation in the original <code>orafce</code> module implementation but not in the SynxDB implementation:</p>
<ul>
<li>9223372036854775 displays as 9.2234E+15 in the original implementation</li>
<li>9223372036854775 remains 9223372036854775 in the SynxDB implementation</li>
</ul>
</li>
<li>
<p>The default date and timestamp format in the original <code>orafce</code> module implementation is different than the default format in the SynxDB implementation. If the following code is run:</p>
<pre><code>CREATE TABLE TEST(date1 date, time1 timestamp, time2 
                  timestamp with time zone);
INSERT INTO TEST VALUES ('2001-11-11','2001-12-13 
                 01:51:15','2001-12-13 01:51:15 -08:00');
SELECT DECODE(date1, '2001-11-11', '2001-01-01') FROM TEST;
</code></pre>
<p>The SynxDB implementation returns the row, but the original implementation returns no rows.</p>
<blockquote>
<p><strong>Note</strong> The correct syntax when using the original <code>orafce</code> implementation to return the row is:</p>
</blockquote>
<pre><code>SELECT DECODE(to_char(date1, 'YYYY-MM-DD'), '2001-11-11', 
              '2001-01-01') FROM TEST
</code></pre>
</li>
<li>
<p>The functions in the Oracle Compatibility Functions <code>dbms_alert</code> package are not implemented for SynxDB.</p>
</li>
<li>
<p>The <code>decode()</code> function is removed from the SynxDB Oracle Compatibility Functions. The SynxDB parser internally converts a <code>decode()</code> function call to a <code>CASE</code> statement.</p>
</li>
</ul>
<h2 id="using-orafce"><a class="header" href="#using-orafce"><a id="topic_using"></a>Using orafce</a></h2>
<p>Some Oracle Compatibility Functions reside in the <code>oracle</code> schema. To access them, set the search path for the database to include the <code>oracle</code> schema name. For example, this command sets the default search path for a database to include the <code>oracle</code> schema:</p>
<pre><code>ALTER DATABASE &lt;db_name&gt; SET &lt;search_path&gt; = "$user", public, oracle;
</code></pre>
<p>Note the following differences when using the Oracle Compatibility Functions with PostgreSQL vs. using them with SynxDB:</p>
<ul>
<li>If you use validation scripts, the output may not be exactly the same as with the original <code>orafce</code> module implementation.</li>
<li>The functions in the Oracle Compatibility Functions <code>dbms_pipe</code> package run only on the SynxDB master host.</li>
<li>The upgrade scripts in the Orafce project do not work with SynxDB.</li>
</ul>
<h2 id="additional-module-documentation"><a class="header" href="#additional-module-documentation"><a id="topic_info"></a>Additional Module Documentation</a></h2>
<p>Refer to the <a href="https://github.com/orafce/orafce/blob/master/README.asciidoc">README</a> and <a href="https://github.com/orafce/orafce/tree/master/doc/orafce_documentation">SynxDB orafce documentation</a> for detailed information about the individual functions and supporting objects provided in this module.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../ref_guide/modules/ltree.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../../ref_guide/modules/pageinspect.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../ref_guide/modules/ltree.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../../ref_guide/modules/pageinspect.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
